{"version":3,"file":"popup.bundle.js","mappings":"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","sources":["webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/loadImage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/spawnWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createJob.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/resolvePaths.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/languages.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getId.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/Tesseract.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/PSM.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/onMessage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/OEM.js","webpack://createcures-bloodwork-utility/./node_modules/regenerator-runtime/runtime.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createScheduler.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getEnvironment.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/send.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/log.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/terminateWorker.js","webpack://createcures-bloodwork-utility/webpack/bootstrap","webpack://createcures-bloodwork-utility/./imageProcessor.js","webpack://createcures-bloodwork-utility/./node_modules/pdfjs-dist/build/pdf.mjs","webpack://createcures-bloodwork-utility/./popup.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n * readFromBlobOrFile\r\n *\r\n * @name readFromBlobOrFile\r\n * @function\r\n * @access private\r\n */\r\nconst readFromBlobOrFile = (blob) => (\r\n  new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      resolve(fileReader.result);\r\n    };\r\n    fileReader.onerror = ({ target: { error: { code } } }) => {\r\n      reject(Error(`File could not be read! Code=${code}`));\r\n    };\r\n    fileReader.readAsArrayBuffer(blob);\r\n  })\r\n);\r\n\r\n/**\r\n * loadImage\r\n *\r\n * @name loadImage\r\n * @function load image from different source\r\n * @access private\r\n */\r\nconst loadImage = async (image) => {\r\n  let data = image;\r\n  if (typeof image === 'undefined') {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof image === 'string') {\r\n    // Base64 Image\r\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\r\n      data = atob(image.split(',')[1])\r\n        .split('')\r\n        .map((c) => c.charCodeAt(0));\r\n    } else {\r\n      const resp = await fetch(image);\r\n      data = await resp.arrayBuffer();\r\n    }\r\n  } else if (typeof HTMLElement !== 'undefined' && image instanceof HTMLElement) {\r\n    if (image.tagName === 'IMG') {\r\n      data = await loadImage(image.src);\r\n    }\r\n    if (image.tagName === 'VIDEO') {\r\n      data = await loadImage(image.poster);\r\n    }\r\n    if (image.tagName === 'CANVAS') {\r\n      await new Promise((resolve) => {\r\n        image.toBlob(async (blob) => {\r\n          data = await readFromBlobOrFile(blob);\r\n          resolve();\r\n        });\r\n      });\r\n    }\r\n  } else if (typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas) {\r\n    const blob = await image.convertToBlob();\r\n    data = await readFromBlobOrFile(blob);\r\n  } else if (image instanceof File || image instanceof Blob) {\r\n    data = await readFromBlobOrFile(image);\r\n  }\r\n\r\n  return new Uint8Array(data);\r\n};\r\n\r\nmodule.exports = loadImage;\r\n","'use strict';\r\n\r\n/**\r\n * spawnWorker\r\n *\r\n * @name spawnWorker\r\n * @function create a new Worker in browser\r\n * @access public\r\n */\r\nmodule.exports = ({ workerPath, workerBlobURL }) => {\r\n  let worker;\r\n  if (Blob && URL && workerBlobURL) {\r\n    const blob = new Blob([`importScripts(\"${workerPath}\");`], {\r\n      type: 'application/javascript',\r\n    });\r\n    worker = new Worker(URL.createObjectURL(blob));\r\n  } else {\r\n    worker = new Worker(workerPath);\r\n  }\r\n\r\n  return worker;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Tesseract Worker adapter for browser\r\n *\r\n * @fileoverview Tesseract Worker adapter for browser\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nconst defaultOptions = require('./defaultOptions');\r\nconst spawnWorker = require('./spawnWorker');\r\nconst terminateWorker = require('./terminateWorker');\r\nconst onMessage = require('./onMessage');\r\nconst send = require('./send');\r\nconst loadImage = require('./loadImage');\r\n\r\nmodule.exports = {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  send,\r\n  loadImage,\r\n};\r\n","'use strict';\r\n\r\nconst getId = require('./utils/getId');\r\n\r\nlet jobCounter = 0;\r\n\r\nmodule.exports = ({\r\n  id: _id,\r\n  action,\r\n  payload = {},\r\n}) => {\r\n  let id = _id;\r\n  if (typeof id === 'undefined') {\r\n    id = getId('Job', jobCounter);\r\n    jobCounter += 1;\r\n  }\r\n\r\n  return {\r\n    id,\r\n    action,\r\n    payload,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst isBrowser = require('./getEnvironment')('type') === 'browser';\r\n\r\nconst resolveURL = isBrowser ? s => (new URL(s, window.location.href)).href : s => s; // eslint-disable-line\r\n\r\nmodule.exports = (options) => {\r\n  const opts = { ...options };\r\n  ['corePath', 'workerPath', 'langPath'].forEach((key) => {\r\n    if (options[key]) {\r\n      opts[key] = resolveURL(opts[key]);\r\n    }\r\n  });\r\n  return opts;\r\n};\r\n","'use strict';\r\n\r\nconst resolvePaths = require('./utils/resolvePaths');\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\nconst OEM = require('./constants/OEM');\r\nconst {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  loadImage,\r\n  send,\r\n} = require('./worker/node');\r\n\r\nlet workerCounter = 0;\r\n\r\nmodule.exports = async (langs = 'eng', oem = OEM.LSTM_ONLY, _options = {}, config = {}) => {\r\n  const id = getId('Worker', workerCounter);\r\n  const {\r\n    logger,\r\n    errorHandler,\r\n    ...options\r\n  } = resolvePaths({\r\n    ...defaultOptions,\r\n    ..._options,\r\n  });\r\n  const promises = {};\r\n\r\n  // Current langs, oem, and config file.\r\n  // Used if the user ever re-initializes the worker using `worker.reinitialize`.\r\n  const currentLangs = typeof langs === 'string' ? langs.split('+') : langs;\r\n  let currentOem = oem;\r\n  let currentConfig = config;\r\n  const lstmOnlyCore = [OEM.DEFAULT, OEM.LSTM_ONLY].includes(oem) && !options.legacyCore;\r\n\r\n  let workerResReject;\r\n  let workerResResolve;\r\n  const workerRes = new Promise((resolve, reject) => {\r\n    workerResResolve = resolve;\r\n    workerResReject = reject;\r\n  });\r\n  const workerError = (event) => { workerResReject(event.message); };\r\n\r\n  let worker = spawnWorker(options);\r\n  worker.onerror = workerError;\r\n\r\n  workerCounter += 1;\r\n\r\n  const startJob = ({ id: jobId, action, payload }) => (\r\n    new Promise((resolve, reject) => {\r\n      log(`[${id}]: Start ${jobId}, action=${action}`);\r\n      // Using both `action` and `jobId` in case user provides non-unique `jobId`.\r\n      const promiseId = `${action}-${jobId}`;\r\n      promises[promiseId] = { resolve, reject };\r\n      send(worker, {\r\n        workerId: id,\r\n        jobId,\r\n        action,\r\n        payload,\r\n      });\r\n    })\r\n  );\r\n\r\n  const load = () => (\r\n    console.warn('`load` is depreciated and should be removed from code (workers now come pre-loaded)')\r\n  );\r\n\r\n  const loadInternal = (jobId) => (\r\n    startJob(createJob({\r\n      id: jobId, action: 'load', payload: { options: { lstmOnly: lstmOnlyCore, corePath: options.corePath, logging: options.logging } },\r\n    }))\r\n  );\r\n\r\n  const writeText = (path, text, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'writeFile', args: [path, text] },\r\n    }))\r\n  );\r\n\r\n  const readText = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'readFile', args: [path, { encoding: 'utf8' }] },\r\n    }))\r\n  );\r\n\r\n  const removeFile = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'unlink', args: [path] },\r\n    }))\r\n  );\r\n\r\n  const FS = (method, args, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method, args },\r\n    }))\r\n  );\r\n\r\n  const loadLanguageInternal = (_langs, jobId) => startJob(createJob({\r\n    id: jobId,\r\n    action: 'loadLanguage',\r\n    payload: {\r\n      langs: _langs,\r\n      options: {\r\n        langPath: options.langPath,\r\n        dataPath: options.dataPath,\r\n        cachePath: options.cachePath,\r\n        cacheMethod: options.cacheMethod,\r\n        gzip: options.gzip,\r\n        lstmOnly: [OEM.DEFAULT, OEM.LSTM_ONLY].includes(currentOem)\r\n          && !options.legacyLang,\r\n      },\r\n    },\r\n  }));\r\n\r\n  const initializeInternal = (_langs, _oem, _config, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'initialize',\r\n      payload: { langs: _langs, oem: _oem, config: _config },\r\n    }))\r\n  );\r\n\r\n  const reinitialize = (langs = 'eng', oem, config, jobId) => { // eslint-disable-line\r\n\r\n    if (lstmOnlyCore && [OEM.TESSERACT_ONLY, OEM.TESSERACT_LSTM_COMBINED].includes(oem)) throw Error('Legacy model requested but code missing.');\r\n\r\n    const _oem = oem || currentOem;\r\n    currentOem = _oem;\r\n\r\n    const _config = config || currentConfig;\r\n    currentConfig = _config;\r\n\r\n    // Only load langs that are not already loaded.\r\n    // This logic fails if the user downloaded the LSTM-only English data for a language\r\n    // and then uses `worker.reinitialize` to switch to the Legacy engine.\r\n    // However, the correct data will still be downloaded after initialization fails\r\n    // and this can be avoided entirely if the user loads the correct data ahead of time.\r\n    const langsArr = typeof langs === 'string' ? langs.split('+') : langs;\r\n    const _langs = langsArr.filter((x) => !currentLangs.includes(x));\r\n    currentLangs.push(..._langs);\r\n\r\n    if (_langs.length > 0) {\r\n      return loadLanguageInternal(_langs, jobId)\r\n        .then(() => initializeInternal(langs, _oem, _config, jobId));\r\n    }\r\n\r\n    return initializeInternal(langs, _oem, _config, jobId);\r\n  };\r\n\r\n  const setParameters = (params = {}, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'setParameters',\r\n      payload: { params },\r\n    }))\r\n  );\r\n\r\n  const recognize = async (image, opts = {}, output = {\r\n    text: true,\r\n  }, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'recognize',\r\n      payload: { image: await loadImage(image), options: opts, output },\r\n    }))\r\n  );\r\n\r\n  const detect = async (image, jobId) => {\r\n    if (lstmOnlyCore) throw Error('`worker.detect` requires Legacy model, which was not loaded.');\r\n\r\n    return startJob(createJob({\r\n      id: jobId,\r\n      action: 'detect',\r\n      payload: { image: await loadImage(image) },\r\n    }));\r\n  };\r\n\r\n  const terminate = async () => {\r\n    if (worker !== null) {\r\n      /*\r\n      await startJob(createJob({\r\n        id: jobId,\r\n        action: 'terminate',\r\n      }));\r\n      */\r\n      terminateWorker(worker);\r\n      worker = null;\r\n    }\r\n    return Promise.resolve();\r\n  };\r\n\r\n  onMessage(worker, ({\r\n    workerId, jobId, status, action, data,\r\n  }) => {\r\n    const promiseId = `${action}-${jobId}`;\r\n    if (status === 'resolve') {\r\n      log(`[${workerId}]: Complete ${jobId}`);\r\n      promises[promiseId].resolve({ jobId, data });\r\n      delete promises[promiseId];\r\n    } else if (status === 'reject') {\r\n      promises[promiseId].reject(data);\r\n      delete promises[promiseId];\r\n      if (action === 'load') workerResReject(data);\r\n      if (errorHandler) {\r\n        errorHandler(data);\r\n      } else {\r\n        throw Error(data);\r\n      }\r\n    } else if (status === 'progress') {\r\n      logger({ ...data, userJobId: jobId });\r\n    }\r\n  });\r\n\r\n  const resolveObj = {\r\n    id,\r\n    worker,\r\n    load,\r\n    writeText,\r\n    readText,\r\n    removeFile,\r\n    FS,\r\n    reinitialize,\r\n    setParameters,\r\n    recognize,\r\n    detect,\r\n    terminate,\r\n  };\r\n\r\n  loadInternal()\r\n    .then(() => loadLanguageInternal(langs))\r\n    .then(() => initializeInternal(langs, oem, config))\r\n    .then(() => workerResResolve(resolveObj))\r\n    .catch(() => {});\r\n\r\n  return workerRes;\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * languages with existing tesseract traineddata\r\n * https://tesseract-ocr.github.io/tessdoc/Data-Files#data-files-for-version-400-november-29-2016\r\n */\r\n\r\n/**\r\n * @typedef {object} Languages\r\n * @property {string} AFR Afrikaans\r\n * @property {string} AMH Amharic\r\n * @property {string} ARA Arabic\r\n * @property {string} ASM Assamese\r\n * @property {string} AZE Azerbaijani\r\n * @property {string} AZE_CYRL Azerbaijani - Cyrillic\r\n * @property {string} BEL Belarusian\r\n * @property {string} BEN Bengali\r\n * @property {string} BOD Tibetan\r\n * @property {string} BOS Bosnian\r\n * @property {string} BUL Bulgarian\r\n * @property {string} CAT Catalan; Valencian\r\n * @property {string} CEB Cebuano\r\n * @property {string} CES Czech\r\n * @property {string} CHI_SIM Chinese - Simplified\r\n * @property {string} CHI_TRA Chinese - Traditional\r\n * @property {string} CHR Cherokee\r\n * @property {string} CYM Welsh\r\n * @property {string} DAN Danish\r\n * @property {string} DEU German\r\n * @property {string} DZO Dzongkha\r\n * @property {string} ELL Greek, Modern (1453-)\r\n * @property {string} ENG English\r\n * @property {string} ENM English, Middle (1100-1500)\r\n * @property {string} EPO Esperanto\r\n * @property {string} EST Estonian\r\n * @property {string} EUS Basque\r\n * @property {string} FAS Persian\r\n * @property {string} FIN Finnish\r\n * @property {string} FRA French\r\n * @property {string} FRK German Fraktur\r\n * @property {string} FRM French, Middle (ca. 1400-1600)\r\n * @property {string} GLE Irish\r\n * @property {string} GLG Galician\r\n * @property {string} GRC Greek, Ancient (-1453)\r\n * @property {string} GUJ Gujarati\r\n * @property {string} HAT Haitian; Haitian Creole\r\n * @property {string} HEB Hebrew\r\n * @property {string} HIN Hindi\r\n * @property {string} HRV Croatian\r\n * @property {string} HUN Hungarian\r\n * @property {string} IKU Inuktitut\r\n * @property {string} IND Indonesian\r\n * @property {string} ISL Icelandic\r\n * @property {string} ITA Italian\r\n * @property {string} ITA_OLD Italian - Old\r\n * @property {string} JAV Javanese\r\n * @property {string} JPN Japanese\r\n * @property {string} KAN Kannada\r\n * @property {string} KAT Georgian\r\n * @property {string} KAT_OLD Georgian - Old\r\n * @property {string} KAZ Kazakh\r\n * @property {string} KHM Central Khmer\r\n * @property {string} KIR Kirghiz; Kyrgyz\r\n * @property {string} KOR Korean\r\n * @property {string} KUR Kurdish\r\n * @property {string} LAO Lao\r\n * @property {string} LAT Latin\r\n * @property {string} LAV Latvian\r\n * @property {string} LIT Lithuanian\r\n * @property {string} MAL Malayalam\r\n * @property {string} MAR Marathi\r\n * @property {string} MKD Macedonian\r\n * @property {string} MLT Maltese\r\n * @property {string} MSA Malay\r\n * @property {string} MYA Burmese\r\n * @property {string} NEP Nepali\r\n * @property {string} NLD Dutch; Flemish\r\n * @property {string} NOR Norwegian\r\n * @property {string} ORI Oriya\r\n * @property {string} PAN Panjabi; Punjabi\r\n * @property {string} POL Polish\r\n * @property {string} POR Portuguese\r\n * @property {string} PUS Pushto; Pashto\r\n * @property {string} RON Romanian; Moldavian; Moldovan\r\n * @property {string} RUS Russian\r\n * @property {string} SAN Sanskrit\r\n * @property {string} SIN Sinhala; Sinhalese\r\n * @property {string} SLK Slovak\r\n * @property {string} SLV Slovenian\r\n * @property {string} SPA Spanish; Castilian\r\n * @property {string} SPA_OLD Spanish; Castilian - Old\r\n * @property {string} SQI Albanian\r\n * @property {string} SRP Serbian\r\n * @property {string} SRP_LATN Serbian - Latin\r\n * @property {string} SWA Swahili\r\n * @property {string} SWE Swedish\r\n * @property {string} SYR Syriac\r\n * @property {string} TAM Tamil\r\n * @property {string} TEL Telugu\r\n * @property {string} TGK Tajik\r\n * @property {string} TGL Tagalog\r\n * @property {string} THA Thai\r\n * @property {string} TIR Tigrinya\r\n * @property {string} TUR Turkish\r\n * @property {string} UIG Uighur; Uyghur\r\n * @property {string} UKR Ukrainian\r\n * @property {string} URD Urdu\r\n * @property {string} UZB Uzbek\r\n * @property {string} UZB_CYRL Uzbek - Cyrillic\r\n * @property {string} VIE Vietnamese\r\n * @property {string} YID Yiddish\r\n */\r\n\r\n/**\r\n  * @type {Languages}\r\n  */\r\nmodule.exports = {\r\n  AFR: 'afr',\r\n  AMH: 'amh',\r\n  ARA: 'ara',\r\n  ASM: 'asm',\r\n  AZE: 'aze',\r\n  AZE_CYRL: 'aze_cyrl',\r\n  BEL: 'bel',\r\n  BEN: 'ben',\r\n  BOD: 'bod',\r\n  BOS: 'bos',\r\n  BUL: 'bul',\r\n  CAT: 'cat',\r\n  CEB: 'ceb',\r\n  CES: 'ces',\r\n  CHI_SIM: 'chi_sim',\r\n  CHI_TRA: 'chi_tra',\r\n  CHR: 'chr',\r\n  CYM: 'cym',\r\n  DAN: 'dan',\r\n  DEU: 'deu',\r\n  DZO: 'dzo',\r\n  ELL: 'ell',\r\n  ENG: 'eng',\r\n  ENM: 'enm',\r\n  EPO: 'epo',\r\n  EST: 'est',\r\n  EUS: 'eus',\r\n  FAS: 'fas',\r\n  FIN: 'fin',\r\n  FRA: 'fra',\r\n  FRK: 'frk',\r\n  FRM: 'frm',\r\n  GLE: 'gle',\r\n  GLG: 'glg',\r\n  GRC: 'grc',\r\n  GUJ: 'guj',\r\n  HAT: 'hat',\r\n  HEB: 'heb',\r\n  HIN: 'hin',\r\n  HRV: 'hrv',\r\n  HUN: 'hun',\r\n  IKU: 'iku',\r\n  IND: 'ind',\r\n  ISL: 'isl',\r\n  ITA: 'ita',\r\n  ITA_OLD: 'ita_old',\r\n  JAV: 'jav',\r\n  JPN: 'jpn',\r\n  KAN: 'kan',\r\n  KAT: 'kat',\r\n  KAT_OLD: 'kat_old',\r\n  KAZ: 'kaz',\r\n  KHM: 'khm',\r\n  KIR: 'kir',\r\n  KOR: 'kor',\r\n  KUR: 'kur',\r\n  LAO: 'lao',\r\n  LAT: 'lat',\r\n  LAV: 'lav',\r\n  LIT: 'lit',\r\n  MAL: 'mal',\r\n  MAR: 'mar',\r\n  MKD: 'mkd',\r\n  MLT: 'mlt',\r\n  MSA: 'msa',\r\n  MYA: 'mya',\r\n  NEP: 'nep',\r\n  NLD: 'nld',\r\n  NOR: 'nor',\r\n  ORI: 'ori',\r\n  PAN: 'pan',\r\n  POL: 'pol',\r\n  POR: 'por',\r\n  PUS: 'pus',\r\n  RON: 'ron',\r\n  RUS: 'rus',\r\n  SAN: 'san',\r\n  SIN: 'sin',\r\n  SLK: 'slk',\r\n  SLV: 'slv',\r\n  SPA: 'spa',\r\n  SPA_OLD: 'spa_old',\r\n  SQI: 'sqi',\r\n  SRP: 'srp',\r\n  SRP_LATN: 'srp_latn',\r\n  SWA: 'swa',\r\n  SWE: 'swe',\r\n  SYR: 'syr',\r\n  TAM: 'tam',\r\n  TEL: 'tel',\r\n  TGK: 'tgk',\r\n  TGL: 'tgl',\r\n  THA: 'tha',\r\n  TIR: 'tir',\r\n  TUR: 'tur',\r\n  UIG: 'uig',\r\n  UKR: 'ukr',\r\n  URD: 'urd',\r\n  UZB: 'uzb',\r\n  UZB_CYRL: 'uzb_cyrl',\r\n  VIE: 'vie',\r\n  YID: 'yid',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (prefix, cnt) => (\r\n  `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`\r\n);\r\n","'use strict';\r\n\r\nconst createWorker = require('./createWorker');\r\n\r\nconst recognize = async (image, langs, options) => {\r\n  const worker = await createWorker(langs, 1, options);\r\n  return worker.recognize(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nconst detect = async (image, options) => {\r\n  const worker = await createWorker('osd', 0, options);\r\n  return worker.detect(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n  recognize,\r\n  detect,\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * PSM = Page Segmentation Mode\r\n */\r\nmodule.exports = {\r\n  OSD_ONLY: '0',\r\n  AUTO_OSD: '1',\r\n  AUTO_ONLY: '2',\r\n  AUTO: '3',\r\n  SINGLE_COLUMN: '4',\r\n  SINGLE_BLOCK_VERT_TEXT: '5',\r\n  SINGLE_BLOCK: '6',\r\n  SINGLE_LINE: '7',\r\n  SINGLE_WORD: '8',\r\n  CIRCLE_WORD: '9',\r\n  SINGLE_CHAR: '10',\r\n  SPARSE_TEXT: '11',\r\n  SPARSE_TEXT_OSD: '12',\r\n  RAW_LINE: '13',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (worker, handler) => {\r\n  worker.onmessage = ({ data }) => { // eslint-disable-line\r\n    handler(data);\r\n  };\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * OEM = OCR Engine Mode, and there are 4 possible modes.\r\n *\r\n * By default tesseract.js uses LSTM_ONLY mode.\r\n *\r\n */\r\nmodule.exports = {\r\n  TESSERACT_ONLY: 0,\r\n  LSTM_ONLY: 1,\r\n  TESSERACT_LSTM_COMBINED: 2,\r\n  DEFAULT: 3,\r\n};\r\n","/**\r\n * Copyright (c) 2014-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nvar runtime = (function (exports) {\r\n  \"use strict\";\r\n\r\n  var Op = Object.prototype;\r\n  var hasOwn = Op.hasOwnProperty;\r\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\r\n  var undefined; // More compressible than void 0.\r\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n  function define(obj, key, value) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n    return obj[key];\r\n  }\r\n  try {\r\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\r\n    define({}, \"\");\r\n  } catch (err) {\r\n    define = function(obj, key, value) {\r\n      return obj[key] = value;\r\n    };\r\n  }\r\n\r\n  function wrap(innerFn, outerFn, self, tryLocsList) {\r\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n    var generator = Object.create(protoGenerator.prototype);\r\n    var context = new Context(tryLocsList || []);\r\n\r\n    // The ._invoke method unifies the implementations of the .next,\r\n    // .throw, and .return methods.\r\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\r\n\r\n    return generator;\r\n  }\r\n  exports.wrap = wrap;\r\n\r\n  // Try/catch helper to minimize deoptimizations. Returns a completion\r\n  // record like context.tryEntries[i].completion. This interface could\r\n  // have been (and was previously) designed to take a closure to be\r\n  // invoked without arguments, but in all the cases we care about we\r\n  // already have an existing method we want to call, so there's no need\r\n  // to create a new function object. We can even get away with assuming\r\n  // the method takes exactly one argument, since that happens to be true\r\n  // in every case, so we don't have to touch the arguments object. The\r\n  // only additional allocation required is the completion record, which\r\n  // has a stable shape and so hopefully should be cheap to allocate.\r\n  function tryCatch(fn, obj, arg) {\r\n    try {\r\n      return { type: \"normal\", arg: fn.call(obj, arg) };\r\n    } catch (err) {\r\n      return { type: \"throw\", arg: err };\r\n    }\r\n  }\r\n\r\n  var GenStateSuspendedStart = \"suspendedStart\";\r\n  var GenStateSuspendedYield = \"suspendedYield\";\r\n  var GenStateExecuting = \"executing\";\r\n  var GenStateCompleted = \"completed\";\r\n\r\n  // Returning this object from the innerFn has the same effect as\r\n  // breaking out of the dispatch switch statement.\r\n  var ContinueSentinel = {};\r\n\r\n  // Dummy constructor functions that we use as the .constructor and\r\n  // .constructor.prototype properties for functions that return Generator\r\n  // objects. For full spec compliance, you may wish to configure your\r\n  // minifier not to mangle the names of these two functions.\r\n  function Generator() {}\r\n  function GeneratorFunction() {}\r\n  function GeneratorFunctionPrototype() {}\r\n\r\n  // This is a polyfill for %IteratorPrototype% for environments that\r\n  // don't natively support it.\r\n  var IteratorPrototype = {};\r\n  define(IteratorPrototype, iteratorSymbol, function () {\r\n    return this;\r\n  });\r\n\r\n  var getProto = Object.getPrototypeOf;\r\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n  if (NativeIteratorPrototype &&\r\n      NativeIteratorPrototype !== Op &&\r\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n    // This environment has a native %IteratorPrototype%; use it instead\r\n    // of the polyfill.\r\n    IteratorPrototype = NativeIteratorPrototype;\r\n  }\r\n\r\n  var Gp = GeneratorFunctionPrototype.prototype =\r\n    Generator.prototype = Object.create(IteratorPrototype);\r\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\r\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\r\n  defineProperty(\r\n    GeneratorFunctionPrototype,\r\n    \"constructor\",\r\n    { value: GeneratorFunction, configurable: true }\r\n  );\r\n  GeneratorFunction.displayName = define(\r\n    GeneratorFunctionPrototype,\r\n    toStringTagSymbol,\r\n    \"GeneratorFunction\"\r\n  );\r\n\r\n  // Helper for defining the .next, .throw, and .return methods of the\r\n  // Iterator interface in terms of a single ._invoke method.\r\n  function defineIteratorMethods(prototype) {\r\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n      define(prototype, method, function(arg) {\r\n        return this._invoke(method, arg);\r\n      });\r\n    });\r\n  }\r\n\r\n  exports.isGeneratorFunction = function(genFun) {\r\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n    return ctor\r\n      ? ctor === GeneratorFunction ||\r\n        // For the native GeneratorFunction constructor, the best we can\r\n        // do is to check its .name property.\r\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n      : false;\r\n  };\r\n\r\n  exports.mark = function(genFun) {\r\n    if (Object.setPrototypeOf) {\r\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n    } else {\r\n      genFun.__proto__ = GeneratorFunctionPrototype;\r\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\r\n    }\r\n    genFun.prototype = Object.create(Gp);\r\n    return genFun;\r\n  };\r\n\r\n  // Within the body of any async function, `await x` is transformed to\r\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n  // meant to be awaited.\r\n  exports.awrap = function(arg) {\r\n    return { __await: arg };\r\n  };\r\n\r\n  function AsyncIterator(generator, PromiseImpl) {\r\n    function invoke(method, arg, resolve, reject) {\r\n      var record = tryCatch(generator[method], generator, arg);\r\n      if (record.type === \"throw\") {\r\n        reject(record.arg);\r\n      } else {\r\n        var result = record.arg;\r\n        var value = result.value;\r\n        if (value &&\r\n            typeof value === \"object\" &&\r\n            hasOwn.call(value, \"__await\")) {\r\n          return PromiseImpl.resolve(value.__await).then(function(value) {\r\n            invoke(\"next\", value, resolve, reject);\r\n          }, function(err) {\r\n            invoke(\"throw\", err, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\r\n          // When a yielded Promise is resolved, its final value becomes\r\n          // the .value of the Promise<{value,done}> result for the\r\n          // current iteration.\r\n          result.value = unwrapped;\r\n          resolve(result);\r\n        }, function(error) {\r\n          // If a rejected Promise was yielded, throw the rejection back\r\n          // into the async generator function so it can be handled there.\r\n          return invoke(\"throw\", error, resolve, reject);\r\n        });\r\n      }\r\n    }\r\n\r\n    var previousPromise;\r\n\r\n    function enqueue(method, arg) {\r\n      function callInvokeWithMethodAndArg() {\r\n        return new PromiseImpl(function(resolve, reject) {\r\n          invoke(method, arg, resolve, reject);\r\n        });\r\n      }\r\n\r\n      return previousPromise =\r\n        // If enqueue has been called before, then we want to wait until\r\n        // all previous Promises have been resolved before calling invoke,\r\n        // so that results are always delivered in the correct order. If\r\n        // enqueue has not been called before, then it is important to\r\n        // call invoke immediately, without waiting on a callback to fire,\r\n        // so that the async generator function has the opportunity to do\r\n        // any necessary setup in a predictable way. This predictability\r\n        // is why the Promise constructor synchronously invokes its\r\n        // executor callback, and why async functions synchronously\r\n        // execute code before the first await. Since we implement simple\r\n        // async functions in terms of async generators, it is especially\r\n        // important to get this right, even though it requires care.\r\n        previousPromise ? previousPromise.then(\r\n          callInvokeWithMethodAndArg,\r\n          // Avoid propagating failures to Promises returned by later\r\n          // invocations of the iterator.\r\n          callInvokeWithMethodAndArg\r\n        ) : callInvokeWithMethodAndArg();\r\n    }\r\n\r\n    // Define the unified helper method that is used to implement .next,\r\n    // .throw, and .return (see defineIteratorMethods).\r\n    defineProperty(this, \"_invoke\", { value: enqueue });\r\n  }\r\n\r\n  defineIteratorMethods(AsyncIterator.prototype);\r\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\r\n    return this;\r\n  });\r\n  exports.AsyncIterator = AsyncIterator;\r\n\r\n  // Note that simple async functions are implemented on top of\r\n  // AsyncIterator objects; they just return a Promise for the value of\r\n  // the final result produced by the iterator.\r\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\r\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\r\n\r\n    var iter = new AsyncIterator(\r\n      wrap(innerFn, outerFn, self, tryLocsList),\r\n      PromiseImpl\r\n    );\r\n\r\n    return exports.isGeneratorFunction(outerFn)\r\n      ? iter // If outerFn is a generator, return the full iterator.\r\n      : iter.next().then(function(result) {\r\n          return result.done ? result.value : iter.next();\r\n        });\r\n  };\r\n\r\n  function makeInvokeMethod(innerFn, self, context) {\r\n    var state = GenStateSuspendedStart;\r\n\r\n    return function invoke(method, arg) {\r\n      if (state === GenStateExecuting) {\r\n        throw new Error(\"Generator is already running\");\r\n      }\r\n\r\n      if (state === GenStateCompleted) {\r\n        if (method === \"throw\") {\r\n          throw arg;\r\n        }\r\n\r\n        // Be forgiving, per 25.3.3.3.3 of the spec:\r\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n        return doneResult();\r\n      }\r\n\r\n      context.method = method;\r\n      context.arg = arg;\r\n\r\n      while (true) {\r\n        var delegate = context.delegate;\r\n        if (delegate) {\r\n          var delegateResult = maybeInvokeDelegate(delegate, context);\r\n          if (delegateResult) {\r\n            if (delegateResult === ContinueSentinel) continue;\r\n            return delegateResult;\r\n          }\r\n        }\r\n\r\n        if (context.method === \"next\") {\r\n          // Setting context._sent for legacy support of Babel's\r\n          // function.sent implementation.\r\n          context.sent = context._sent = context.arg;\r\n\r\n        } else if (context.method === \"throw\") {\r\n          if (state === GenStateSuspendedStart) {\r\n            state = GenStateCompleted;\r\n            throw context.arg;\r\n          }\r\n\r\n          context.dispatchException(context.arg);\r\n\r\n        } else if (context.method === \"return\") {\r\n          context.abrupt(\"return\", context.arg);\r\n        }\r\n\r\n        state = GenStateExecuting;\r\n\r\n        var record = tryCatch(innerFn, self, context);\r\n        if (record.type === \"normal\") {\r\n          // If an exception is thrown from innerFn, we leave state ===\r\n          // GenStateExecuting and loop back for another invocation.\r\n          state = context.done\r\n            ? GenStateCompleted\r\n            : GenStateSuspendedYield;\r\n\r\n          if (record.arg === ContinueSentinel) {\r\n            continue;\r\n          }\r\n\r\n          return {\r\n            value: record.arg,\r\n            done: context.done\r\n          };\r\n\r\n        } else if (record.type === \"throw\") {\r\n          state = GenStateCompleted;\r\n          // Dispatch the exception by looping back around to the\r\n          // context.dispatchException(context.arg) call above.\r\n          context.method = \"throw\";\r\n          context.arg = record.arg;\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Call delegate.iterator[context.method](context.arg) and handle the\r\n  // result, either by returning a { value, done } result from the\r\n  // delegate iterator, or by modifying context.method and context.arg,\r\n  // setting context.delegate to null, and returning the ContinueSentinel.\r\n  function maybeInvokeDelegate(delegate, context) {\r\n    var methodName = context.method;\r\n    var method = delegate.iterator[methodName];\r\n    if (method === undefined) {\r\n      // A .throw or .return when the delegate iterator has no .throw\r\n      // method, or a missing .next mehtod, always terminate the\r\n      // yield* loop.\r\n      context.delegate = null;\r\n\r\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\r\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\r\n        // If the delegate iterator has a return method, give it a\r\n        // chance to clean up.\r\n        context.method = \"return\";\r\n        context.arg = undefined;\r\n        maybeInvokeDelegate(delegate, context);\r\n\r\n        if (context.method === \"throw\") {\r\n          // If maybeInvokeDelegate(context) changed context.method from\r\n          // \"return\" to \"throw\", let that override the TypeError below.\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n      if (methodName !== \"return\") {\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\r\n          \"The iterator does not provide a '\" + methodName + \"' method\");\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n    if (record.type === \"throw\") {\r\n      context.method = \"throw\";\r\n      context.arg = record.arg;\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var info = record.arg;\r\n\r\n    if (! info) {\r\n      context.method = \"throw\";\r\n      context.arg = new TypeError(\"iterator result is not an object\");\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    if (info.done) {\r\n      // Assign the result of the finished delegate to the temporary\r\n      // variable specified by delegate.resultName (see delegateYield).\r\n      context[delegate.resultName] = info.value;\r\n\r\n      // Resume execution at the desired location (see delegateYield).\r\n      context.next = delegate.nextLoc;\r\n\r\n      // If context.method was \"throw\" but the delegate handled the\r\n      // exception, let the outer generator proceed normally. If\r\n      // context.method was \"next\", forget context.arg since it has been\r\n      // \"consumed\" by the delegate iterator. If context.method was\r\n      // \"return\", allow the original .return call to continue in the\r\n      // outer generator.\r\n      if (context.method !== \"return\") {\r\n        context.method = \"next\";\r\n        context.arg = undefined;\r\n      }\r\n\r\n    } else {\r\n      // Re-yield the result returned by the delegate method.\r\n      return info;\r\n    }\r\n\r\n    // The delegate iterator is finished, so forget it and continue with\r\n    // the outer generator.\r\n    context.delegate = null;\r\n    return ContinueSentinel;\r\n  }\r\n\r\n  // Define Generator.prototype.{next,throw,return} in terms of the\r\n  // unified ._invoke helper method.\r\n  defineIteratorMethods(Gp);\r\n\r\n  define(Gp, toStringTagSymbol, \"Generator\");\r\n\r\n  // A Generator should always return itself as the iterator object when the\r\n  // @@iterator function is called on it. Some browsers' implementations of the\r\n  // iterator prototype chain incorrectly implement this, causing the Generator\r\n  // object to not be returned from this call. This ensures that doesn't happen.\r\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n  define(Gp, iteratorSymbol, function() {\r\n    return this;\r\n  });\r\n\r\n  define(Gp, \"toString\", function() {\r\n    return \"[object Generator]\";\r\n  });\r\n\r\n  function pushTryEntry(locs) {\r\n    var entry = { tryLoc: locs[0] };\r\n\r\n    if (1 in locs) {\r\n      entry.catchLoc = locs[1];\r\n    }\r\n\r\n    if (2 in locs) {\r\n      entry.finallyLoc = locs[2];\r\n      entry.afterLoc = locs[3];\r\n    }\r\n\r\n    this.tryEntries.push(entry);\r\n  }\r\n\r\n  function resetTryEntry(entry) {\r\n    var record = entry.completion || {};\r\n    record.type = \"normal\";\r\n    delete record.arg;\r\n    entry.completion = record;\r\n  }\r\n\r\n  function Context(tryLocsList) {\r\n    // The root entry object (effectively a try statement without a catch\r\n    // or a finally block) gives us a place to store values thrown from\r\n    // locations where there is no enclosing try statement.\r\n    this.tryEntries = [{ tryLoc: \"root\" }];\r\n    tryLocsList.forEach(pushTryEntry, this);\r\n    this.reset(true);\r\n  }\r\n\r\n  exports.keys = function(val) {\r\n    var object = Object(val);\r\n    var keys = [];\r\n    for (var key in object) {\r\n      keys.push(key);\r\n    }\r\n    keys.reverse();\r\n\r\n    // Rather than returning an object with a next method, we keep\r\n    // things simple and return the next function itself.\r\n    return function next() {\r\n      while (keys.length) {\r\n        var key = keys.pop();\r\n        if (key in object) {\r\n          next.value = key;\r\n          next.done = false;\r\n          return next;\r\n        }\r\n      }\r\n\r\n      // To avoid creating an additional object, we just hang the .value\r\n      // and .done properties off the next function object itself. This\r\n      // also ensures that the minifier will not anonymize the function.\r\n      next.done = true;\r\n      return next;\r\n    };\r\n  };\r\n\r\n  function values(iterable) {\r\n    if (iterable) {\r\n      var iteratorMethod = iterable[iteratorSymbol];\r\n      if (iteratorMethod) {\r\n        return iteratorMethod.call(iterable);\r\n      }\r\n\r\n      if (typeof iterable.next === \"function\") {\r\n        return iterable;\r\n      }\r\n\r\n      if (!isNaN(iterable.length)) {\r\n        var i = -1, next = function next() {\r\n          while (++i < iterable.length) {\r\n            if (hasOwn.call(iterable, i)) {\r\n              next.value = iterable[i];\r\n              next.done = false;\r\n              return next;\r\n            }\r\n          }\r\n\r\n          next.value = undefined;\r\n          next.done = true;\r\n\r\n          return next;\r\n        };\r\n\r\n        return next.next = next;\r\n      }\r\n    }\r\n\r\n    // Return an iterator with no values.\r\n    return { next: doneResult };\r\n  }\r\n  exports.values = values;\r\n\r\n  function doneResult() {\r\n    return { value: undefined, done: true };\r\n  }\r\n\r\n  Context.prototype = {\r\n    constructor: Context,\r\n\r\n    reset: function(skipTempReset) {\r\n      this.prev = 0;\r\n      this.next = 0;\r\n      // Resetting context._sent for legacy support of Babel's\r\n      // function.sent implementation.\r\n      this.sent = this._sent = undefined;\r\n      this.done = false;\r\n      this.delegate = null;\r\n\r\n      this.method = \"next\";\r\n      this.arg = undefined;\r\n\r\n      this.tryEntries.forEach(resetTryEntry);\r\n\r\n      if (!skipTempReset) {\r\n        for (var name in this) {\r\n          // Not sure about the optimal order of these conditions:\r\n          if (name.charAt(0) === \"t\" &&\r\n              hasOwn.call(this, name) &&\r\n              !isNaN(+name.slice(1))) {\r\n            this[name] = undefined;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function() {\r\n      this.done = true;\r\n\r\n      var rootEntry = this.tryEntries[0];\r\n      var rootRecord = rootEntry.completion;\r\n      if (rootRecord.type === \"throw\") {\r\n        throw rootRecord.arg;\r\n      }\r\n\r\n      return this.rval;\r\n    },\r\n\r\n    dispatchException: function(exception) {\r\n      if (this.done) {\r\n        throw exception;\r\n      }\r\n\r\n      var context = this;\r\n      function handle(loc, caught) {\r\n        record.type = \"throw\";\r\n        record.arg = exception;\r\n        context.next = loc;\r\n\r\n        if (caught) {\r\n          // If the dispatched exception was caught by a catch block,\r\n          // then let that catch block handle the exception normally.\r\n          context.method = \"next\";\r\n          context.arg = undefined;\r\n        }\r\n\r\n        return !! caught;\r\n      }\r\n\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        var record = entry.completion;\r\n\r\n        if (entry.tryLoc === \"root\") {\r\n          // Exception thrown outside of any try block that could handle\r\n          // it, so set the completion value of the entire function to\r\n          // throw the exception.\r\n          return handle(\"end\");\r\n        }\r\n\r\n        if (entry.tryLoc <= this.prev) {\r\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n          if (hasCatch && hasFinally) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            } else if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else if (hasCatch) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            }\r\n\r\n          } else if (hasFinally) {\r\n            if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else {\r\n            throw new Error(\"try statement without catch or finally\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    abrupt: function(type, arg) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc <= this.prev &&\r\n            hasOwn.call(entry, \"finallyLoc\") &&\r\n            this.prev < entry.finallyLoc) {\r\n          var finallyEntry = entry;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (finallyEntry &&\r\n          (type === \"break\" ||\r\n           type === \"continue\") &&\r\n          finallyEntry.tryLoc <= arg &&\r\n          arg <= finallyEntry.finallyLoc) {\r\n        // Ignore the finally entry if control is not jumping to a\r\n        // location outside the try/catch block.\r\n        finallyEntry = null;\r\n      }\r\n\r\n      var record = finallyEntry ? finallyEntry.completion : {};\r\n      record.type = type;\r\n      record.arg = arg;\r\n\r\n      if (finallyEntry) {\r\n        this.method = \"next\";\r\n        this.next = finallyEntry.finallyLoc;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      return this.complete(record);\r\n    },\r\n\r\n    complete: function(record, afterLoc) {\r\n      if (record.type === \"throw\") {\r\n        throw record.arg;\r\n      }\r\n\r\n      if (record.type === \"break\" ||\r\n          record.type === \"continue\") {\r\n        this.next = record.arg;\r\n      } else if (record.type === \"return\") {\r\n        this.rval = this.arg = record.arg;\r\n        this.method = \"return\";\r\n        this.next = \"end\";\r\n      } else if (record.type === \"normal\" && afterLoc) {\r\n        this.next = afterLoc;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    },\r\n\r\n    finish: function(finallyLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.finallyLoc === finallyLoc) {\r\n          this.complete(entry.completion, entry.afterLoc);\r\n          resetTryEntry(entry);\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n    },\r\n\r\n    \"catch\": function(tryLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc === tryLoc) {\r\n          var record = entry.completion;\r\n          if (record.type === \"throw\") {\r\n            var thrown = record.arg;\r\n            resetTryEntry(entry);\r\n          }\r\n          return thrown;\r\n        }\r\n      }\r\n\r\n      // The context.catch method must only be called with a location\r\n      // argument that corresponds to a known catch block.\r\n      throw new Error(\"illegal catch attempt\");\r\n    },\r\n\r\n    delegateYield: function(iterable, resultName, nextLoc) {\r\n      this.delegate = {\r\n        iterator: values(iterable),\r\n        resultName: resultName,\r\n        nextLoc: nextLoc\r\n      };\r\n\r\n      if (this.method === \"next\") {\r\n        // Deliberately forget the last sent value so that we don't\r\n        // accidentally pass it on to the delegate.\r\n        this.arg = undefined;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n  };\r\n\r\n  // Regardless of whether this script is executing as a CommonJS module\r\n  // or not, return the runtime object so that we can declare the variable\r\n  // regeneratorRuntime in the outer scope, which allows this module to be\r\n  // injected easily by `bin/regenerator --include-runtime script.js`.\r\n  return exports;\r\n\r\n}(\r\n  // If this script is executing as a CommonJS module, use module.exports\r\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n  // object. Either way, the resulting object will be used to initialize\r\n  // the regeneratorRuntime variable at the top of this file.\r\n  typeof module === \"object\" ? module.exports : {}\r\n));\r\n\r\ntry {\r\n  regeneratorRuntime = runtime;\r\n} catch (accidentalStrictMode) {\r\n  // This module should not be running in strict mode, so the above\r\n  // assignment should always work unless something is misconfigured. Just\r\n  // in case runtime.js accidentally runs in strict mode, in modern engines\r\n  // we can explicitly access globalThis. In older engines we can escape\r\n  // strict mode using a global Function call. This could conceivably fail\r\n  // if a Content Security Policy forbids using Function, but in that case\r\n  // the proper solution is to fix the accidental strict mode problem. If\r\n  // you've misconfigured your bundler to force strict mode and applied a\r\n  // CSP to forbid Function, and you're not willing to fix either of those\r\n  // problems, please detail your unique predicament in a GitHub issue.\r\n  if (typeof globalThis === \"object\") {\r\n    globalThis.regeneratorRuntime = runtime;\r\n  } else {\r\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\r\n  }\r\n}\r\n","'use strict';\r\n\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\n\r\nlet schedulerCounter = 0;\r\n\r\nmodule.exports = () => {\r\n  const id = getId('Scheduler', schedulerCounter);\r\n  const workers = {};\r\n  const runningWorkers = {};\r\n  let jobQueue = [];\r\n\r\n  schedulerCounter += 1;\r\n\r\n  const getQueueLen = () => jobQueue.length;\r\n  const getNumWorkers = () => Object.keys(workers).length;\r\n\r\n  const dequeue = () => {\r\n    if (jobQueue.length !== 0) {\r\n      const wIds = Object.keys(workers);\r\n      for (let i = 0; i < wIds.length; i += 1) {\r\n        if (typeof runningWorkers[wIds[i]] === 'undefined') {\r\n          jobQueue[0](workers[wIds[i]]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const queue = (action, payload) => (\r\n    new Promise((resolve, reject) => {\r\n      const job = createJob({ action, payload });\r\n      jobQueue.push(async (w) => {\r\n        jobQueue.shift();\r\n        runningWorkers[w.id] = job;\r\n        try {\r\n          resolve(await w[action].apply(this, [...payload, job.id]));\r\n        } catch (err) {\r\n          reject(err);\r\n        } finally {\r\n          delete runningWorkers[w.id];\r\n          dequeue();\r\n        }\r\n      });\r\n      log(`[${id}]: Add ${job.id} to JobQueue`);\r\n      log(`[${id}]: JobQueue length=${jobQueue.length}`);\r\n      dequeue();\r\n    })\r\n  );\r\n\r\n  const addWorker = (w) => {\r\n    workers[w.id] = w;\r\n    log(`[${id}]: Add ${w.id}`);\r\n    log(`[${id}]: Number of workers=${getNumWorkers()}`);\r\n    dequeue();\r\n    return w.id;\r\n  };\r\n\r\n  const addJob = async (action, ...payload) => {\r\n    if (getNumWorkers() === 0) {\r\n      throw Error(`[${id}]: You need to have at least one worker before adding jobs`);\r\n    }\r\n    return queue(action, payload);\r\n  };\r\n\r\n  const terminate = async () => {\r\n    Object.keys(workers).forEach(async (wid) => {\r\n      await workers[wid].terminate();\r\n    });\r\n    jobQueue = [];\r\n  };\r\n\r\n  return {\r\n    addWorker,\r\n    addJob,\r\n    terminate,\r\n    getQueueLen,\r\n    getNumWorkers,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst version = require('../../../package.json').version;\r\nconst defaultOptions = require('../../constants/defaultOptions');\r\n\r\n/*\r\n * Default options for browser worker\r\n */\r\nmodule.exports = {\r\n  ...defaultOptions,\r\n  workerPath: `https://cdn.jsdelivr.net/npm/tesseract.js@v${version}/dist/worker.min.js`,\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Entry point for tesseract.js, should be the entry when bundling.\r\n *\r\n * @fileoverview entry point for tesseract.js\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nrequire('regenerator-runtime/runtime');\r\nconst createScheduler = require('./createScheduler');\r\nconst createWorker = require('./createWorker');\r\nconst Tesseract = require('./Tesseract');\r\nconst languages = require('./constants/languages');\r\nconst OEM = require('./constants/OEM');\r\nconst PSM = require('./constants/PSM');\r\nconst { setLogging } = require('./utils/log');\r\n\r\nmodule.exports = {\r\n  languages,\r\n  OEM,\r\n  PSM,\r\n  createScheduler,\r\n  createWorker,\r\n  setLogging,\r\n  ...Tesseract,\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (key) => {\r\n  const env = {};\r\n\r\n  if (typeof WorkerGlobalScope !== 'undefined') {\r\n    env.type = 'webworker';\r\n  } else if (typeof document === 'object') {\r\n    env.type = 'browser';\r\n  } else if (typeof process === 'object' && typeof require === 'function') {\r\n    env.type = 'node';\r\n  }\r\n\r\n  if (typeof key === 'undefined') {\r\n    return env;\r\n  }\r\n\r\n  return env[key];\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  /*\r\n   * Use BlobURL for worker script by default\r\n   * TODO: remove this option\r\n   *\r\n   */\r\n  workerBlobURL: true,\r\n  logger: () => {},\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * send\r\n *\r\n * @name send\r\n * @function send packet to worker and create a job\r\n * @access public\r\n */\r\nmodule.exports = async (worker, packet) => {\r\n  worker.postMessage(packet);\r\n};\r\n","'use strict';\r\n\r\nlet logging = false;\r\n\r\nexports.logging = logging;\r\n\r\nexports.setLogging = (_logging) => {\r\n  logging = _logging;\r\n};\r\n\r\nexports.log = (...args) => (logging ? console.log.apply(this, args) : null);\r\n","'use strict';\r\n\r\n/**\r\n * terminateWorker\r\n *\r\n * @name terminateWorker\r\n * @function terminate worker\r\n * @access public\r\n */\r\nmodule.exports = (worker) => {\r\n  worker.terminate();\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import {createScheduler, addWorker, createWorker, PSM} from 'tesseract.js';\r\n\r\nexport async function processTestImages(files) {\r\n    console.log('Number of image files found:', files.length);\r\n    \r\n    // Create a scheduler and workers\r\n    const workerN = 7;\r\n    const scheduler = createScheduler();\r\n\r\n    const workerGen = async () => {\r\n        const worker = await createWorker(\"eng\", 1, { \r\n            logger: m => console.log(m), cachePath: \".\",\r\n            workerPath: chrome.runtime.getURL('node_modules/tesseract.js/dist/worker.min.js'),\r\n            corePath: chrome.runtime.getURL('node_modules/tesseract.js-core/tesseract-core-lstm.wasm.js'),\r\n            workerBlobURL: false,\r\n        });\r\n        await worker.setParameters({\r\n            tessedit_pageseg_mode: PSM.SPARSE_TEXT_OSD\r\n        });\r\n        scheduler.addWorker(worker);\r\n    };\r\n\r\n    await Promise.all(Array(workerN).fill(0).map(async () => await workerGen())); \r\n    \r\n    console.log('Processing images and performing OCR:');\r\n    const jobPromises = files.map(async (file) => {\r\n        console.log(`Scheduling image processing for: ${file.name}`);\r\n        return scheduler.addJob('recognize', file, {}, {\r\n            text: true,\r\n            blocks: true,\r\n            hocr: false,\r\n            tsv: false,\r\n        })\r\n        .then(out => {\r\n            console.log(out) //for debugging\r\n            const wordsArray = [];\r\n            if (out.data?.blocks) {\r\n                console.log(\"blocks have been ensured\")\r\n                out.data.blocks.forEach((block, blockIdx) => {\r\n                    block.paragraphs.forEach((para, paraIdx) => {\r\n                        const paragraphKey = `block${blockIdx}_paragraph${paraIdx}`;\r\n\r\n                        para.lines.forEach((line, lineIdx) => {\r\n                            const lineKey = `${paragraphKey}_line${lineIdx}`;\r\n\r\n                            line.words.forEach(word => {\r\n                                wordsArray.push({\r\n                                    word_text: word.text,\r\n                                    word_confidence: word.confidence,\r\n                                    word_choices: word.choices,\r\n                                    word_bbox: word.bbox,\r\n                                    unique_paragraph_key: paragraphKey,\r\n                                    unique_line_key: lineKey\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            return {\r\n                imageName: file.webkitRelativePath || file.name,\r\n                rotateRadians: out.data.rotateRadians,\r\n                words: wordsArray\r\n            };\r\n        })\r\n        .catch(error => ({\r\n            imageName: file.webkitRelativePath || file.name,\r\n            error: error.message,\r\n        }));\r\n    });\r\n\r\n    const results = await Promise.all(jobPromises);\r\n    // Terminate workers and save results\r\n    await scheduler.terminate();\r\n\r\n    console.log('OCR processing completed.');\r\n    return results;\r\n\r\n}","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/**\n * pdfjsVersion = 5.3.31\n * pdfjsBuild = 47ad820d9\n */\n\n;// ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  SIGNATURE: 101\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    const {\n      platform,\n      userAgent\n    } = navigator;\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox: userAgent.includes(\"Firefox\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Promise.try !== \"function\") {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\n;// ./src/display/display_utils.js\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(window.screen.availWidth * window.screen.availHeight * this.pixelRatio ** 2 * (1 + capAreaFactor / 100));\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\n\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n  }\n  #addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      _uiManager.delete();\n    }, {\n      signal: _uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n    this.#altText = altText;\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this.#signatureManager = signatureManager;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      const ac = new AbortController();\n      const signal = this.combinedSignal(ac);\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        ac.abort();\n        activeLayer?.toggleDrawing(true);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      this._editorUndoBar?.hide();\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId || editor.id === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  isSelected = false;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      style\n    } = this.div;\n    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    if (this.#altText) {\n      await this._editToolbar.addAltText(this.#altText);\n    }\n    return this._editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10n);\n    this.#altText = new AltText(this);\n    if (this.#accessibilityData) {\n      this.#altText.data = this.#accessibilityData;\n      this.#accessibilityData = null;\n    }\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n    return true;\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n    return true;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  get canChangeContent() {\n    return false;\n  }\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id\n    });\n  }\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n}\n\n;// ./src/display/api_utils.js\n\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\n;// ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n;// ./src/display/filter_factory.js\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\nif (isNodeJS) {\n  warn(\"Please use the `legacy` build in Node.js environments.\");\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const {\n          fillStyle,\n          strokeStyle\n        } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height) {\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](path);\n      return;\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](path);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(path) {\n    this.stroke(path);\n  }\n  fill(path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(path, intersect);\n    }\n  }\n  eoFill(path) {\n    this.pendingEOFill = true;\n    this.fill(path);\n  }\n  fillStroke(path) {\n    this.fill(path, false);\n    this.stroke(path, false);\n    this.consumePath(path);\n  }\n  eoFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  closeFillStroke(path) {\n    this.fillStroke(path);\n  }\n  closeEOFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  endPath(path) {\n    this.consumePath(path);\n  }\n  rawFillPath(path) {\n    this.ctx.fill(path);\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      return;\n    }\n    const newPath = new Path2D();\n    const invTransf = ctx.getTransform().invertSelf();\n    for (const {\n      transform,\n      x,\n      y,\n      fontSize,\n      path\n    } of paths) {\n      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n    }\n    ctx.clip(newPath);\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(matrix) {\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill || patternStroke) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n    this.current.patternStroke = true;\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(color) {\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent() {\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(color) {\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  setFillTransparent() {\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath();\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/pdf_objects.js\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    });\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.3.31\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : isNodeJS ? PDFNodeStream : PDFNetworkStream;\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n  #progressiveDoneListeners = [];\n  #progressiveReadListeners = [];\n  #progressListeners = [];\n  #rangeListeners = [];\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this.#capability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n  #messageHandler = null;\n  #port = null;\n  #webWorker = null;\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts = new WeakMap();\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n    this.fromPort = params => {\n      deprecated(\"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\");\n      if (!params?.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      return this.create(params);\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n  }\n  get promise() {\n    return this.#capability.promise;\n  }\n  #resolve() {\n    this.#capability.resolve();\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this.#port;\n  }\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {});\n    this.#resolve();\n  }\n  #initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this.#setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this.#webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this.#setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this.#setupFakeWorker();\n  }\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this.#capability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this.#port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this.#capability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.create - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.3.31\";\nconst build = \"47ad820d9\";\n\n;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      data\n    } = this;\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id);\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n    return true;\n  }\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n    return true;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  get canChangeContent() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n        Util.rectBoundingBox(...bbox, minMax);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\nclass HighlightOutliner {\n  #box;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  #type;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa\n        }\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.#opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const A = buf[(i << 2) + 3];\n      if (A === 0) {\n        max = out[i] = 0xff;\n        continue;\n      }\n      const pix = out[i] = buf[i << 2];\n      if (pix > max) {\n        max = pix;\n      }\n      if (pix < min) {\n        min = pix;\n      }\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0; i < N; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.signatureManager && this.#description !== null) {\n      await toolbar.addEditSignatureButton(this._uiManager.signatureManager, this.#signatureUUID, this.#description);\n      toolbar.show();\n    }\n    return toolbar;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.#description = description;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.#description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor({\n      mode: AnnotationEditorType.STAMP\n    }, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._editToolbar.hide();\n      this._uiManager.editAltText(this, true);\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    editor.annotationElementId = data.id || null;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, build, createValidAbsoluteUrl, fetchData, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map","import {processTestImages} from './imageProcessor.js'\r\n\r\nimport * as pdfjsLib from './node_modules/pdfjs-dist/build/pdf.mjs';\r\n\r\npdfjsLib.GlobalWorkerOptions.workerSrc = './node_modules/pdfjs-dist/build/pdf.worker.mjs';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    document.getElementById('process-btn-test').addEventListener('click', async () => {\r\n        const files = document.getElementById('bloodwork-files').files;\r\n        //Filter files\r\n        // Deal w/ image files (e.g., PNG, JPEG, etc.)\r\n        const imageFiles = Array.from(files).filter(file => \r\n            file.type.startsWith('image/')\r\n        );\r\n\r\n        // // Handle PDF files (Convert to images)\r\n        const pdfFiles = Array.from(files).filter(file => \r\n            file.type === 'application/pdf'\r\n        );\r\n\r\n        //Convert Pdf files to Images\r\n        const convertedPdfFiles = []\r\n        for (const pdffile of pdfFiles) {\r\n            const arrayBuffer = await pdffile.arrayBuffer();\r\n            const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer }); \r\n            \r\n            try {\r\n                const pdf = await loadingTask.promise;\r\n                console.log(`PDF loaded: ${pdffile.name}`);\r\n                const numPages = pdf.numPages;\r\n\r\n                for (let pageNum = 1; pageNum <= numPages; pageNum++) {\r\n                    const page = await pdf.getPage(pageNum);\r\n                    const viewport = page.getViewport({ scale: 2 });\r\n\r\n                    const canvas = document.createElement('canvas');\r\n                    const context = canvas.getContext('2d');\r\n\r\n                    canvas.width = viewport.width;\r\n                    canvas.height = viewport.height;\r\n\r\n                    await page.render({ canvasContext: context, viewport }).promise;\r\n\r\n                    const imageDataUrl = canvas.toDataURL('image/png');\r\n                    convertedPdfFiles.push(imageDataUrl);\r\n                }\r\n            } catch (err) {\r\n                console.error(`Error loading ${pdffile.name}:`, err);\r\n            }\r\n        }\r\n\r\n        //Flatten files into an array\r\n        const allImages = [\r\n            ...imageFiles,\r\n            ...convertedPdfFiles\r\n        ]\r\n\r\n        console.log('Files ready for processing', allImages);\r\n        const final_data = await processTestImages(allImages)\r\n        \r\n\r\n        // Convert your JavaScript object or array to a JSON string\r\n        const json = JSON.stringify(final_data, null, 2); // Pretty print with 2-space indentation\r\n\r\n        // Create a Blob from the JSON string\r\n        const blob = new Blob([json], { type: 'application/json' });\r\n\r\n        // Create a temporary download URL\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        // Create an anchor element to trigger download\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'output.json';\r\n        a.click();\r\n\r\n        // Clean up the URL object to free memory\r\n        URL.revokeObjectURL(url);\r\n    });\r\n});\r\n"],"names":["readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","target","error","code","Error","readAsArrayBuffer","loadImage","async","image","data","test","atob","split","map","c","charCodeAt","resp","fetch","arrayBuffer","HTMLElement","tagName","src","poster","toBlob","OffscreenCanvas","convertToBlob","File","Blob","Uint8Array","module","exports","workerPath","workerBlobURL","worker","URL","type","Worker","createObjectURL","defaultOptions","spawnWorker","terminateWorker","onMessage","send","getId","jobCounter","id","_id","action","payload","resolveURL","s","window","location","href","options","opts","forEach","key","resolvePaths","createJob","log","OEM","workerCounter","langs","oem","LSTM_ONLY","_options","config","logger","errorHandler","promises","currentLangs","currentOem","currentConfig","lstmOnlyCore","DEFAULT","includes","legacyCore","workerResReject","workerResResolve","workerRes","event","message","startJob","jobId","workerId","loadLanguageInternal","_langs","langPath","dataPath","cachePath","cacheMethod","gzip","lstmOnly","legacyLang","initializeInternal","_oem","_config","status","promiseId","userJobId","resolveObj","load","console","warn","writeText","path","text","method","args","readText","encoding","removeFile","FS","reinitialize","TESSERACT_ONLY","TESSERACT_LSTM_COMBINED","filter","x","push","length","then","setParameters","params","recognize","output","detect","terminate","corePath","logging","catch","AFR","AMH","ARA","ASM","AZE","AZE_CYRL","BEL","BEN","BOD","BOS","BUL","CAT","CEB","CES","CHI_SIM","CHI_TRA","CHR","CYM","DAN","DEU","DZO","ELL","ENG","ENM","EPO","EST","EUS","FAS","FIN","FRA","FRK","FRM","GLE","GLG","GRC","GUJ","HAT","HEB","HIN","HRV","HUN","IKU","IND","ISL","ITA","ITA_OLD","JAV","JPN","KAN","KAT","KAT_OLD","KAZ","KHM","KIR","KOR","KUR","LAO","LAT","LAV","LIT","MAL","MAR","MKD","MLT","MSA","MYA","NEP","NLD","NOR","ORI","PAN","POL","POR","PUS","RON","RUS","SAN","SIN","SLK","SLV","SPA","SPA_OLD","SQI","SRP","SRP_LATN","SWA","SWE","SYR","TAM","TEL","TGK","TGL","THA","TIR","TUR","UIG","UKR","URD","UZB","UZB_CYRL","VIE","YID","prefix","cnt","Math","random","toString","slice","createWorker","finally","OSD_ONLY","AUTO_OSD","AUTO_ONLY","AUTO","SINGLE_COLUMN","SINGLE_BLOCK_VERT_TEXT","SINGLE_BLOCK","SINGLE_LINE","SINGLE_WORD","CIRCLE_WORD","SINGLE_CHAR","SPARSE_TEXT","SPARSE_TEXT_OSD","RAW_LINE","handler","onmessage","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","schedulerCounter","workers","runningWorkers","jobQueue","getNumWorkers","dequeue","wIds","queue","job","w","shift","apply","addWorker","addJob","wid","getQueueLen","version","createScheduler","Tesseract","languages","PSM","setLogging","env","WorkerGlobalScope","document","process","packet","postMessage","_logging","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","e","t","r","n","o","u","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","_regenerator","m","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","processTestImages","_x","_processTestImages","_callee4","files","scheduler","workerGen","jobPromises","results","_context4","_ref","_callee","_context","chrome","getURL","tessedit_pageseg_mode","all","Array","fill","_callee2","_context2","_ref3","_callee3","file","_context3","concat","blocks","hocr","tsv","out","_out$data","wordsArray","block","blockIdx","paragraphs","para","paraIdx","paragraphKey","lines","line","lineIdx","lineKey","words","word","word_text","word_confidence","confidence","word_choices","choices","word_bbox","bbox","unique_paragraph_key","unique_line_key","imageName","webkitRelativePath","rotateRadians","_x2","isNodeJS","versions","nw","electron","FONT_IDENTITY_MATRIX","LINE_FACTOR","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","SIGNATURE","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","msg","unreachable","assert","cond","createValidAbsoluteUrl","url","baseUrl","addDefaultProtocol","startsWith","dots","match","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","parse","protocol","_isValidProtocol","updateUrlHash","hash","allowRel","res","shadow","prop","nonSerializable","BaseException","PasswordException","super","UnknownErrorException","details","InvalidPDFException","ResponseException","missing","FormatError","AbortException","bytesToString","bytes","MAX_ARGUMENT_COUNT","String","fromCharCode","strBuf","chunkEnd","min","chunk","subarray","join","stringToBytes","str","util_FeatureTest","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","isOffscreenCanvasSupported","isImageDecoderSupported","ImageDecoder","platform","userAgent","navigator","isAndroid","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","CSS","supports","hexNumbers","from","padStart","Util","makeHexColor","g","b","scaleMinMax","minMax","temp","m1","m2","applyTransform","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","axialAlignedBoundingBox","rect","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","max","inverseTransform","singularValueDecompose2dScale","matrix","first","second","sqrt","normalizeRect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","rectBoundingBox","x0","y0","x1","y1","x2","x3","y2","y3","mt","tt","ttt","abs","delta","sqrtDelta","bezierBoundingBox","NormalizeRegex","NormalizationMap","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","MathClamp","toBase64Util","arr","toBase64","btoa","try","sumPrecise","numbers","reduce","SVG_NS","PixelsPerInch","static","PDF","fetchData","isValidFetchUrl","baseURI","response","ok","statusText","json","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","PageViewport","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","width","height","rawDims","dims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","trim","substring","toLowerCase","isPdfFile","filename","StatTimer","started","times","time","Date","now","timeEnd","start","end","outBuf","longest","padEnd","noContextMenu","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","input","RegExp","matches","exec","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getRGB","color","colorRGB","getCurrentTransform","ctx","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","style","useRound","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","capAreaFactor","maxAreaScale","Infinity","maxWidthScale","maxHeightScale","capPixels","maxScale","devicePixelRatio","winPixels","ceil","screen","availWidth","availHeight","SupportedImageMimeTypes","EditorToolbar","editor","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","createElement","classList","add","signal","_uiManager","_signal","addEventListener","buttons","className","append","position","toolbarPosition","direction","insetInlineEnd","top","_focusEventsAllowed","element","capture","hide","hideDropdown","show","remove","shown","editorType","button","tabIndex","delete","divider","addAltText","altText","prepend","addColorPicker","colorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","updateEditSignatureButton","description","title","destroy","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","ImageManager","_isSVGFittingCanvas","getContext","willReadFrequently","Image","decode","drawImage","getImageData","rawData","Map","get","bitmap","refCounter","isSvg","mustRemoveAspectRatioPromise","imageElement","imagePromise","svgUrl","readAsDataURL","createImageBitmap","set","getFromFile","lastModified","size","getFromUrl","getFromBlob","blobPromise","getFromId","getFromCanvas","canvas","offscreen","transferToImageBitmap","getSvgUrl","deleteId","transferFromImageBitmap","close","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","splice","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","KeyboardManager","callbacks","allKeys","Set","callback","isMacKey","at","altKey","ctrlKey","metaKey","shiftKey","has","bubbles","checker","ColorManager","_colors","colors","visibility","colorScheme","body","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","AnnotationEditorUIManager","AbortController","_editorUndoBar","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","hasSomethingToControl","textInputChecker","_self","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","mlManager","editorUndoBar","supportsPinchToZoom","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_supportsPinchToZoom","abort","layer","clear","clearTimeout","combinedSignal","ac","AbortSignal","any","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","pair","highlightColorNames","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","firstTime","getSignature","switchToMode","mode","on","once","dispatch","source","setPreference","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","textLayer","currentLayer","hasTextLayer","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","closest","getSelectionBoxes","empty","isNoneMode","createAndAddNewEditor","showAllEditors","addToAnnotationStorage","setValue","activeLayer","toggleDrawing","pointerup","blur","hasSelection","lastEditor","lastActiveElement","keydown","keyup","copy","cut","paste","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","item","editors","serialized","serialize","clipboardData","setData","JSON","stringify","getData","ex","isArray","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","entries","some","assign","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","promise","withResolvers","loadSignatures","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateColor","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","updateUIForDefaultProperties","toggleSelected","select","isSelected","firstSelectedEditor","cleanUndoStack","drawingEditor","endDrawingSession","commit","noCommit","totalX","totalY","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","setCanvas","addMissingCanvas","AltText","added","review","initialize","l10n","_l10n","label","onClick","_reportTelemetry","guessedText","focusVisible","hasData","setGuessedText","generatedAltText","toggleAltTextBadge","badge","isForCopying","decorative","textWithDisclaimer","cancel","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","removeAttribute","textContent","parentNode","getElementForAltText","TouchManager","isPinchingDisabled","isPinchingStopped","onPinchStart","onPinching","onPinchEnd","passive","MIN_TOUCH_DISTANCE_TO_PINCH","touches","pointerDownAC","cancelPointerDown","pointerType","opt","onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","screen0X","screen0Y","screen1X","screen1Y","touchInfo","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","distance","hypot","pDistance","origin","AnnotationEditor","_isCopy","_editToolbar","_initialOptions","_initialData","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","_type","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","parseFloat","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","focusin","focusout","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","_onTranslating","translate","scrollIntoView","findNewParent","floor","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","angle","pageTranslationToScreen","parentScale","setDims","fixDims","widthPercent","endsWith","heightPercent","getInitialTranslation","classes","savedDraggable","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","_onResized","newWidth","newHeight","_round","round","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","deltaX","deltaY","ratioX","ratioY","fromKeyboard","lastScreenX","lastScreenY","oldDiag","_onResizing","altTextFinish","addEditToolbar","removeEditToolbar","addContainer","editToolbarDiv","before","getClientDimensions","addAltTextButton","altTextData","guessedAltText","setGuessedAltText","serializeAltText","hasAltText","hasAltTextData","defaultL10nId","maxWidth","maxHeight","isResizable","_origin","prevDistance","factor","transfCenterPoint","newTransfCenterPoint","pointerdown","hasDraggingStarted","cancelDrag","_onStopDragging","clientX","clientY","pointerId","_onStartDragging","isPrimary","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","isInEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","bottom","right","innerHeight","innerWidth","rotate","_angle","serializeDeleted","popupRef","accessibilityData","isCopy","timeout","makeResizable","children","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","lastChild","child","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","canChangeContent","dblclick","_editorType","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","ArrayBuffer","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","resetModifiedIds","modifiedIds","ids","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","baseFontName","font","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","otherRequest","_loadTestFont","int32","offset","spliceString","insert","called","XXXX_VALUE","checksum","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","objId","cmds","Path2D","fontExtraProperties","getFactoryUrlProp","isRefProxy","num","gen","isValidExplicitDest","validRef","validName","dest","page","zoom","argsLen","allowNull","LoopbackPort","listener","rmAbort","aborted","onAbort","removeEventListener","onFn","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","stream","capability","reason","actionName","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","onPull","onCancel","success","streamController","dataReason","allSettled","BaseCanvasFactory","enableHWA","_createCanvas","canvasAndContext","DOMCanvasFactory","BaseCMapReaderFactory","isCompressed","_fetch","cMapData","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","DOMFilterFactory","docId","contain","svg","createElementNS","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","step","newStart","newStep","k","j","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","DOMStandardFontDataFactory","BaseWasmFactory","DOMWasmFactory","node_utils_fetchData","fs","getBuiltinModule","readFile","NodeFilterFactory","NodeCanvasFactory","createRequire","require","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","PathType","applyBoundingBox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p2","p3","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","Float32Array","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","strokeStyle","fillColor","strokeColor","convertBlackAndWhiteToRGBA","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","CachedCanvases","canvasFactory","cache","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","patternStroke","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","clipBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","img","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","limit","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","op","path2d","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","needRestore","paths","pendingTextPaths","invTransf","preMultiplySelf","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","invPatternTransform","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","GlobalWorkerOptions","workerPort","workerSrc","Metadata","parsedData","getRaw","INTERNAL","OptionalContentGroup","renderingIntent","usage","rbGroups","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","operator","expression","policy","setVisibility","preserveRB","rbGroup","otherId","setOCGState","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","onProgress","_removeRangeReader","reader","indexOf","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","read","requestCapability","_end","_queuedChunk","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","validateRangeRequestCapabilities","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","decoder","TextDecoder","fatal","quotindex","replaceAll","extvalue","encodingend","replace","charset","hex","getFilenameFromContentDispositionHeader","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","abortController","credentials","redirect","getArrayBuffer","PDFFetchStream","_responseOrigin","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","getReader","_readCapability","responseOrigin","NetworkManager","currXhrId","pendingRequests","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","lengthComputable","_requestId","_close","urlRegex","PDFNodeStream","sourceUrl","pathToFileURL","parseUrlOrPath","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_readableStream","lstat","stat","_setReadableStream","createReadStream","_error","readableStream","INITIAL_DATA","PDFObjects","TextLayer","FontInspector","WeakMap","textContentSource","fontFamilyMap","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","cleanup","alpha","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","XfaText","xfa","walk","node","shouldBuildText","attributes","getDocument","task","PDFDocumentLoadingTask","getUrlProp","Buffer","getDataProp","password","rangeTransport","PDFDataRangeTransport","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","port","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","transport","WorkerTransport","_transport","_capability","onPassword","_pendingDestroy","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","_intentStates","getViewport","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","_isSameOrigin","otherUrl","base","other","_createCDNWrapper","wrapper","fromPort","terminateEarly","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","import","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","modifiedIdsHash","terminated","sink","readyReason","_numPages","htmlForXfa","updatePassword","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","imageData","refStr","metadata","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_canvas","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","G_CMYK","G_RGB","G_rgb","G_HTML","RGB_G","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","RGB_CMYK","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","html","storage","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","root","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","stack","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","titleObj","contentsObj","richText","_isEditable","isEditable","hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","index","findIndex","selectChild","indices","editable","changeEx","keyDown","PopupElement","elementIds","ariaHasPopup","trigger","flatMap","baseColor","outlineColor","header","dateObj","valueOf","contents","_formatContents","popupLines","popupContent","lineAttributes","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","vertices","points","polyline","it","inkLists","thickness","AnnotationLayer","accessibilityManager","annotationEditorUIManager","structTreeLayer","_annotationEditorUIManager","hasEditableAnnotations","contentElement","ariaAttributes","getAriaAttributes","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","addLinkAnnotations","_defaultBorderStyle","replaceWith","after","editableAnnotation","_hasNoCanvas","getEditableAnnotations","getEditableAnnotation","rawWidth","EOL_PATTERN","FreeTextEditor","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","innerText","normalize","prevChild","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","_translate","svgRound","_normalizePoint","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","scaleFactor","innerMargin","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","lastTopX","lastTopY","lastBottomX","lastBottomY","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","last","N","lastPoint","lastPointX","lastPointY","ltrCallback","newOutliner","getNewOutline","outliner","HighlightOutliner","EPSILON","shiftedMinX","shiftedMinY","lastEdge","edge","sort","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","HighlightOutline","middle","y4","polygon","prevX","prevY","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","ColorPicker","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","blue","green","pink","red","yellow","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeDraw","drawOutline","rootClass","highlightOutline","free","updateProperties","setColorAndOpacity","opa","savedOpacity","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","draw","highlightDiv","pointerover","hovered","pointerleave","setPosition","startHighlighting","_freeHighlight","_freeHighlightId","_freeHighlightClipId","DrawingOptions","updateProperty","updateSVGProperty","toSVGProperties","updateAll","DrawingEditor","_drawId","mustBeCommitted","_addOutlines","drawOutlines","drawId","drawingOptions","_drawingOptions","defaultProperties","_mergeSVGProperties","defaultSVGProperties","p1Keys","getDefaultDrawingOptions","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","_currentDrawId","_updateProperty","savedValue","setter","getPathResizingSVGProperties","getPathResizedSVGProperties","_y","getPathTranslatedSVGProperties","moving","updateParent","pW","pH","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","_endDraw","isCancellable","removeLastElement","_drawMove","timeStamp","startNew","_cleanup","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","InkDrawOutliner","Float64Array","InkDrawOutline","firstX","firstY","lastIndexOf","secondX","secondY","c1x","c1y","c2x","c2y","build","serializedLines","serializedPoints","rescaleFn","newLines","len","margin","marginX","marginY","oldMarginX","oldMarginY","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","PRECISION","s1x","s1y","s2x","s2y","newParentWidth","newParentHeight","InkDrawingOptions","viewerParameters","_viewParameters","InkEditor","ContourDrawOutline","SignatureExtractor","sigmaSFactor","sigmaR","kernelSize","i0","j0","Int32Array","kk","threshold","lnbd","nbd","contours","ij","pix","i2","j2","isHole","contour","contour0","shiftI","shiftJ","i1","j1","i3","j3","i4","j4","ij3","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","sigmaS","kernel","sigmaS2","halfSize","exp","rangeValues","sigmaR2","histogram","sum","norm","neighbour","Uint8ClampedArray","M","L","spos","originalBitmap","prevWidth","prevHeight","log2","isteps","grayImage","extractContoursFromText","fontStyle","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","uint8Buf","contourList","processDrawnLines","curves","mustSmooth","areContours","linesAndPoints","xScale","yScale","newCurves","reducedPoints","newPoints","compressSignature","bufferType","minDiff","maxDiff","outlinesLength","dx","Int8Array","Int16Array","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","write","BufferCtor","diffs","Response","readable","decompressSignature","signatureData","fromBase64","DecompressionStream","numberOfDrawings","diffsOffset","POINTS_PROPERTIES_NUMBER","SignatureOptions","DrawnSignatureOptions","SignatureEditor","_defaultDrawnSignatureOptions","hasDescription","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","isSignature","alt","StampEditor","bitmapUrl","bitmapFile","pasteEditor","getAsFile","hasAltTextStats","fromId","alt_text_modal","alt_text_type","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","accept","click","bitmapId","MAX_RATIO","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","scaledWidth","scaledHeight","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","toUrl","toDataURL","missingCanvas","structParent","_structTree","changes","isSame","isSameAltText","stamps","area","prevData","isSamePageIndex","AnnotationEditorLayer","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","annotationElementIds","editables","changedAnnotations","resetAnnotations","attach","detach","removePointerInTextLayer","currentMode","startDrawingSession","pause","oldRotation","DrawLayer","_svgFactory","pathId","clipPathUse","isPathUpdatable","hasClip","use","mustRemoveSelfIntersections","maskId","use1","use2","cloneNode","elementOrId","pathElement","_createForOfIteratorHelper","_unsupportedIterableToArray","_n","F","_arrayLikeToArray","_pdfjsTestingUtils","pdfjsLib","FeatureTest","getFilenameFromUrl","getPdfFilenameFromUrl","defaultFilename","reFilename","splitURI","suggestedFilename","getXfaPageViewport","xfaPage","ImageKind","normalizeUnicode","_","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","getElementById","imageFiles","pdfFiles","convertedPdfFiles","_iterator","_step","pdffile","pdf","pageNum","imageDataUrl","allImages","final_data","_t","_t2","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","download","revokeObjectURL"],"sourceRoot":""}