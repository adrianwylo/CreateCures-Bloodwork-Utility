{"version":3,"file":"popup.bundle.js","mappings":"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","sources":["webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/loadImage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/spawnWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createJob.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/resolvePaths.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/languages.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getId.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/Tesseract.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/PSM.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/onMessage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/OEM.js","webpack://createcures-bloodwork-utility/./node_modules/regenerator-runtime/runtime.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createScheduler.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getEnvironment.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/send.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/log.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/terminateWorker.js","webpack://createcures-bloodwork-utility/webpack/bootstrap","webpack://createcures-bloodwork-utility/./node_modules/fuse.js/dist/fuse.mjs","webpack://createcures-bloodwork-utility/./ocrUiFiles/formatCsvRow.js","webpack://createcures-bloodwork-utility/./ocrEngineFiles/imageMarkup.js","webpack://createcures-bloodwork-utility/./ocrEngineFiles/imageProcessor.js","webpack://createcures-bloodwork-utility/./node_modules/pdfjs-dist/build/pdf.mjs","webpack://createcures-bloodwork-utility/./ocrEngineFiles/imageCleaner.js","webpack://createcures-bloodwork-utility/./ocrEngineWrapper.js","webpack://createcures-bloodwork-utility/./popup.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n * readFromBlobOrFile\r\n *\r\n * @name readFromBlobOrFile\r\n * @function\r\n * @access private\r\n */\r\nconst readFromBlobOrFile = (blob) => (\r\n  new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      resolve(fileReader.result);\r\n    };\r\n    fileReader.onerror = ({ target: { error: { code } } }) => {\r\n      reject(Error(`File could not be read! Code=${code}`));\r\n    };\r\n    fileReader.readAsArrayBuffer(blob);\r\n  })\r\n);\r\n\r\n/**\r\n * loadImage\r\n *\r\n * @name loadImage\r\n * @function load image from different source\r\n * @access private\r\n */\r\nconst loadImage = async (image) => {\r\n  let data = image;\r\n  if (typeof image === 'undefined') {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof image === 'string') {\r\n    // Base64 Image\r\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\r\n      data = atob(image.split(',')[1])\r\n        .split('')\r\n        .map((c) => c.charCodeAt(0));\r\n    } else {\r\n      const resp = await fetch(image);\r\n      data = await resp.arrayBuffer();\r\n    }\r\n  } else if (typeof HTMLElement !== 'undefined' && image instanceof HTMLElement) {\r\n    if (image.tagName === 'IMG') {\r\n      data = await loadImage(image.src);\r\n    }\r\n    if (image.tagName === 'VIDEO') {\r\n      data = await loadImage(image.poster);\r\n    }\r\n    if (image.tagName === 'CANVAS') {\r\n      await new Promise((resolve) => {\r\n        image.toBlob(async (blob) => {\r\n          data = await readFromBlobOrFile(blob);\r\n          resolve();\r\n        });\r\n      });\r\n    }\r\n  } else if (typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas) {\r\n    const blob = await image.convertToBlob();\r\n    data = await readFromBlobOrFile(blob);\r\n  } else if (image instanceof File || image instanceof Blob) {\r\n    data = await readFromBlobOrFile(image);\r\n  }\r\n\r\n  return new Uint8Array(data);\r\n};\r\n\r\nmodule.exports = loadImage;\r\n","'use strict';\r\n\r\n/**\r\n * spawnWorker\r\n *\r\n * @name spawnWorker\r\n * @function create a new Worker in browser\r\n * @access public\r\n */\r\nmodule.exports = ({ workerPath, workerBlobURL }) => {\r\n  let worker;\r\n  if (Blob && URL && workerBlobURL) {\r\n    const blob = new Blob([`importScripts(\"${workerPath}\");`], {\r\n      type: 'application/javascript',\r\n    });\r\n    worker = new Worker(URL.createObjectURL(blob));\r\n  } else {\r\n    worker = new Worker(workerPath);\r\n  }\r\n\r\n  return worker;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Tesseract Worker adapter for browser\r\n *\r\n * @fileoverview Tesseract Worker adapter for browser\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nconst defaultOptions = require('./defaultOptions');\r\nconst spawnWorker = require('./spawnWorker');\r\nconst terminateWorker = require('./terminateWorker');\r\nconst onMessage = require('./onMessage');\r\nconst send = require('./send');\r\nconst loadImage = require('./loadImage');\r\n\r\nmodule.exports = {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  send,\r\n  loadImage,\r\n};\r\n","'use strict';\r\n\r\nconst getId = require('./utils/getId');\r\n\r\nlet jobCounter = 0;\r\n\r\nmodule.exports = ({\r\n  id: _id,\r\n  action,\r\n  payload = {},\r\n}) => {\r\n  let id = _id;\r\n  if (typeof id === 'undefined') {\r\n    id = getId('Job', jobCounter);\r\n    jobCounter += 1;\r\n  }\r\n\r\n  return {\r\n    id,\r\n    action,\r\n    payload,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst isBrowser = require('./getEnvironment')('type') === 'browser';\r\n\r\nconst resolveURL = isBrowser ? s => (new URL(s, window.location.href)).href : s => s; // eslint-disable-line\r\n\r\nmodule.exports = (options) => {\r\n  const opts = { ...options };\r\n  ['corePath', 'workerPath', 'langPath'].forEach((key) => {\r\n    if (options[key]) {\r\n      opts[key] = resolveURL(opts[key]);\r\n    }\r\n  });\r\n  return opts;\r\n};\r\n","'use strict';\r\n\r\nconst resolvePaths = require('./utils/resolvePaths');\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\nconst OEM = require('./constants/OEM');\r\nconst {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  loadImage,\r\n  send,\r\n} = require('./worker/node');\r\n\r\nlet workerCounter = 0;\r\n\r\nmodule.exports = async (langs = 'eng', oem = OEM.LSTM_ONLY, _options = {}, config = {}) => {\r\n  const id = getId('Worker', workerCounter);\r\n  const {\r\n    logger,\r\n    errorHandler,\r\n    ...options\r\n  } = resolvePaths({\r\n    ...defaultOptions,\r\n    ..._options,\r\n  });\r\n  const promises = {};\r\n\r\n  // Current langs, oem, and config file.\r\n  // Used if the user ever re-initializes the worker using `worker.reinitialize`.\r\n  const currentLangs = typeof langs === 'string' ? langs.split('+') : langs;\r\n  let currentOem = oem;\r\n  let currentConfig = config;\r\n  const lstmOnlyCore = [OEM.DEFAULT, OEM.LSTM_ONLY].includes(oem) && !options.legacyCore;\r\n\r\n  let workerResReject;\r\n  let workerResResolve;\r\n  const workerRes = new Promise((resolve, reject) => {\r\n    workerResResolve = resolve;\r\n    workerResReject = reject;\r\n  });\r\n  const workerError = (event) => { workerResReject(event.message); };\r\n\r\n  let worker = spawnWorker(options);\r\n  worker.onerror = workerError;\r\n\r\n  workerCounter += 1;\r\n\r\n  const startJob = ({ id: jobId, action, payload }) => (\r\n    new Promise((resolve, reject) => {\r\n      log(`[${id}]: Start ${jobId}, action=${action}`);\r\n      // Using both `action` and `jobId` in case user provides non-unique `jobId`.\r\n      const promiseId = `${action}-${jobId}`;\r\n      promises[promiseId] = { resolve, reject };\r\n      send(worker, {\r\n        workerId: id,\r\n        jobId,\r\n        action,\r\n        payload,\r\n      });\r\n    })\r\n  );\r\n\r\n  const load = () => (\r\n    console.warn('`load` is depreciated and should be removed from code (workers now come pre-loaded)')\r\n  );\r\n\r\n  const loadInternal = (jobId) => (\r\n    startJob(createJob({\r\n      id: jobId, action: 'load', payload: { options: { lstmOnly: lstmOnlyCore, corePath: options.corePath, logging: options.logging } },\r\n    }))\r\n  );\r\n\r\n  const writeText = (path, text, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'writeFile', args: [path, text] },\r\n    }))\r\n  );\r\n\r\n  const readText = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'readFile', args: [path, { encoding: 'utf8' }] },\r\n    }))\r\n  );\r\n\r\n  const removeFile = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'unlink', args: [path] },\r\n    }))\r\n  );\r\n\r\n  const FS = (method, args, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method, args },\r\n    }))\r\n  );\r\n\r\n  const loadLanguageInternal = (_langs, jobId) => startJob(createJob({\r\n    id: jobId,\r\n    action: 'loadLanguage',\r\n    payload: {\r\n      langs: _langs,\r\n      options: {\r\n        langPath: options.langPath,\r\n        dataPath: options.dataPath,\r\n        cachePath: options.cachePath,\r\n        cacheMethod: options.cacheMethod,\r\n        gzip: options.gzip,\r\n        lstmOnly: [OEM.DEFAULT, OEM.LSTM_ONLY].includes(currentOem)\r\n          && !options.legacyLang,\r\n      },\r\n    },\r\n  }));\r\n\r\n  const initializeInternal = (_langs, _oem, _config, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'initialize',\r\n      payload: { langs: _langs, oem: _oem, config: _config },\r\n    }))\r\n  );\r\n\r\n  const reinitialize = (langs = 'eng', oem, config, jobId) => { // eslint-disable-line\r\n\r\n    if (lstmOnlyCore && [OEM.TESSERACT_ONLY, OEM.TESSERACT_LSTM_COMBINED].includes(oem)) throw Error('Legacy model requested but code missing.');\r\n\r\n    const _oem = oem || currentOem;\r\n    currentOem = _oem;\r\n\r\n    const _config = config || currentConfig;\r\n    currentConfig = _config;\r\n\r\n    // Only load langs that are not already loaded.\r\n    // This logic fails if the user downloaded the LSTM-only English data for a language\r\n    // and then uses `worker.reinitialize` to switch to the Legacy engine.\r\n    // However, the correct data will still be downloaded after initialization fails\r\n    // and this can be avoided entirely if the user loads the correct data ahead of time.\r\n    const langsArr = typeof langs === 'string' ? langs.split('+') : langs;\r\n    const _langs = langsArr.filter((x) => !currentLangs.includes(x));\r\n    currentLangs.push(..._langs);\r\n\r\n    if (_langs.length > 0) {\r\n      return loadLanguageInternal(_langs, jobId)\r\n        .then(() => initializeInternal(langs, _oem, _config, jobId));\r\n    }\r\n\r\n    return initializeInternal(langs, _oem, _config, jobId);\r\n  };\r\n\r\n  const setParameters = (params = {}, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'setParameters',\r\n      payload: { params },\r\n    }))\r\n  );\r\n\r\n  const recognize = async (image, opts = {}, output = {\r\n    text: true,\r\n  }, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'recognize',\r\n      payload: { image: await loadImage(image), options: opts, output },\r\n    }))\r\n  );\r\n\r\n  const detect = async (image, jobId) => {\r\n    if (lstmOnlyCore) throw Error('`worker.detect` requires Legacy model, which was not loaded.');\r\n\r\n    return startJob(createJob({\r\n      id: jobId,\r\n      action: 'detect',\r\n      payload: { image: await loadImage(image) },\r\n    }));\r\n  };\r\n\r\n  const terminate = async () => {\r\n    if (worker !== null) {\r\n      /*\r\n      await startJob(createJob({\r\n        id: jobId,\r\n        action: 'terminate',\r\n      }));\r\n      */\r\n      terminateWorker(worker);\r\n      worker = null;\r\n    }\r\n    return Promise.resolve();\r\n  };\r\n\r\n  onMessage(worker, ({\r\n    workerId, jobId, status, action, data,\r\n  }) => {\r\n    const promiseId = `${action}-${jobId}`;\r\n    if (status === 'resolve') {\r\n      log(`[${workerId}]: Complete ${jobId}`);\r\n      promises[promiseId].resolve({ jobId, data });\r\n      delete promises[promiseId];\r\n    } else if (status === 'reject') {\r\n      promises[promiseId].reject(data);\r\n      delete promises[promiseId];\r\n      if (action === 'load') workerResReject(data);\r\n      if (errorHandler) {\r\n        errorHandler(data);\r\n      } else {\r\n        throw Error(data);\r\n      }\r\n    } else if (status === 'progress') {\r\n      logger({ ...data, userJobId: jobId });\r\n    }\r\n  });\r\n\r\n  const resolveObj = {\r\n    id,\r\n    worker,\r\n    load,\r\n    writeText,\r\n    readText,\r\n    removeFile,\r\n    FS,\r\n    reinitialize,\r\n    setParameters,\r\n    recognize,\r\n    detect,\r\n    terminate,\r\n  };\r\n\r\n  loadInternal()\r\n    .then(() => loadLanguageInternal(langs))\r\n    .then(() => initializeInternal(langs, oem, config))\r\n    .then(() => workerResResolve(resolveObj))\r\n    .catch(() => {});\r\n\r\n  return workerRes;\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * languages with existing tesseract traineddata\r\n * https://tesseract-ocr.github.io/tessdoc/Data-Files#data-files-for-version-400-november-29-2016\r\n */\r\n\r\n/**\r\n * @typedef {object} Languages\r\n * @property {string} AFR Afrikaans\r\n * @property {string} AMH Amharic\r\n * @property {string} ARA Arabic\r\n * @property {string} ASM Assamese\r\n * @property {string} AZE Azerbaijani\r\n * @property {string} AZE_CYRL Azerbaijani - Cyrillic\r\n * @property {string} BEL Belarusian\r\n * @property {string} BEN Bengali\r\n * @property {string} BOD Tibetan\r\n * @property {string} BOS Bosnian\r\n * @property {string} BUL Bulgarian\r\n * @property {string} CAT Catalan; Valencian\r\n * @property {string} CEB Cebuano\r\n * @property {string} CES Czech\r\n * @property {string} CHI_SIM Chinese - Simplified\r\n * @property {string} CHI_TRA Chinese - Traditional\r\n * @property {string} CHR Cherokee\r\n * @property {string} CYM Welsh\r\n * @property {string} DAN Danish\r\n * @property {string} DEU German\r\n * @property {string} DZO Dzongkha\r\n * @property {string} ELL Greek, Modern (1453-)\r\n * @property {string} ENG English\r\n * @property {string} ENM English, Middle (1100-1500)\r\n * @property {string} EPO Esperanto\r\n * @property {string} EST Estonian\r\n * @property {string} EUS Basque\r\n * @property {string} FAS Persian\r\n * @property {string} FIN Finnish\r\n * @property {string} FRA French\r\n * @property {string} FRK German Fraktur\r\n * @property {string} FRM French, Middle (ca. 1400-1600)\r\n * @property {string} GLE Irish\r\n * @property {string} GLG Galician\r\n * @property {string} GRC Greek, Ancient (-1453)\r\n * @property {string} GUJ Gujarati\r\n * @property {string} HAT Haitian; Haitian Creole\r\n * @property {string} HEB Hebrew\r\n * @property {string} HIN Hindi\r\n * @property {string} HRV Croatian\r\n * @property {string} HUN Hungarian\r\n * @property {string} IKU Inuktitut\r\n * @property {string} IND Indonesian\r\n * @property {string} ISL Icelandic\r\n * @property {string} ITA Italian\r\n * @property {string} ITA_OLD Italian - Old\r\n * @property {string} JAV Javanese\r\n * @property {string} JPN Japanese\r\n * @property {string} KAN Kannada\r\n * @property {string} KAT Georgian\r\n * @property {string} KAT_OLD Georgian - Old\r\n * @property {string} KAZ Kazakh\r\n * @property {string} KHM Central Khmer\r\n * @property {string} KIR Kirghiz; Kyrgyz\r\n * @property {string} KOR Korean\r\n * @property {string} KUR Kurdish\r\n * @property {string} LAO Lao\r\n * @property {string} LAT Latin\r\n * @property {string} LAV Latvian\r\n * @property {string} LIT Lithuanian\r\n * @property {string} MAL Malayalam\r\n * @property {string} MAR Marathi\r\n * @property {string} MKD Macedonian\r\n * @property {string} MLT Maltese\r\n * @property {string} MSA Malay\r\n * @property {string} MYA Burmese\r\n * @property {string} NEP Nepali\r\n * @property {string} NLD Dutch; Flemish\r\n * @property {string} NOR Norwegian\r\n * @property {string} ORI Oriya\r\n * @property {string} PAN Panjabi; Punjabi\r\n * @property {string} POL Polish\r\n * @property {string} POR Portuguese\r\n * @property {string} PUS Pushto; Pashto\r\n * @property {string} RON Romanian; Moldavian; Moldovan\r\n * @property {string} RUS Russian\r\n * @property {string} SAN Sanskrit\r\n * @property {string} SIN Sinhala; Sinhalese\r\n * @property {string} SLK Slovak\r\n * @property {string} SLV Slovenian\r\n * @property {string} SPA Spanish; Castilian\r\n * @property {string} SPA_OLD Spanish; Castilian - Old\r\n * @property {string} SQI Albanian\r\n * @property {string} SRP Serbian\r\n * @property {string} SRP_LATN Serbian - Latin\r\n * @property {string} SWA Swahili\r\n * @property {string} SWE Swedish\r\n * @property {string} SYR Syriac\r\n * @property {string} TAM Tamil\r\n * @property {string} TEL Telugu\r\n * @property {string} TGK Tajik\r\n * @property {string} TGL Tagalog\r\n * @property {string} THA Thai\r\n * @property {string} TIR Tigrinya\r\n * @property {string} TUR Turkish\r\n * @property {string} UIG Uighur; Uyghur\r\n * @property {string} UKR Ukrainian\r\n * @property {string} URD Urdu\r\n * @property {string} UZB Uzbek\r\n * @property {string} UZB_CYRL Uzbek - Cyrillic\r\n * @property {string} VIE Vietnamese\r\n * @property {string} YID Yiddish\r\n */\r\n\r\n/**\r\n  * @type {Languages}\r\n  */\r\nmodule.exports = {\r\n  AFR: 'afr',\r\n  AMH: 'amh',\r\n  ARA: 'ara',\r\n  ASM: 'asm',\r\n  AZE: 'aze',\r\n  AZE_CYRL: 'aze_cyrl',\r\n  BEL: 'bel',\r\n  BEN: 'ben',\r\n  BOD: 'bod',\r\n  BOS: 'bos',\r\n  BUL: 'bul',\r\n  CAT: 'cat',\r\n  CEB: 'ceb',\r\n  CES: 'ces',\r\n  CHI_SIM: 'chi_sim',\r\n  CHI_TRA: 'chi_tra',\r\n  CHR: 'chr',\r\n  CYM: 'cym',\r\n  DAN: 'dan',\r\n  DEU: 'deu',\r\n  DZO: 'dzo',\r\n  ELL: 'ell',\r\n  ENG: 'eng',\r\n  ENM: 'enm',\r\n  EPO: 'epo',\r\n  EST: 'est',\r\n  EUS: 'eus',\r\n  FAS: 'fas',\r\n  FIN: 'fin',\r\n  FRA: 'fra',\r\n  FRK: 'frk',\r\n  FRM: 'frm',\r\n  GLE: 'gle',\r\n  GLG: 'glg',\r\n  GRC: 'grc',\r\n  GUJ: 'guj',\r\n  HAT: 'hat',\r\n  HEB: 'heb',\r\n  HIN: 'hin',\r\n  HRV: 'hrv',\r\n  HUN: 'hun',\r\n  IKU: 'iku',\r\n  IND: 'ind',\r\n  ISL: 'isl',\r\n  ITA: 'ita',\r\n  ITA_OLD: 'ita_old',\r\n  JAV: 'jav',\r\n  JPN: 'jpn',\r\n  KAN: 'kan',\r\n  KAT: 'kat',\r\n  KAT_OLD: 'kat_old',\r\n  KAZ: 'kaz',\r\n  KHM: 'khm',\r\n  KIR: 'kir',\r\n  KOR: 'kor',\r\n  KUR: 'kur',\r\n  LAO: 'lao',\r\n  LAT: 'lat',\r\n  LAV: 'lav',\r\n  LIT: 'lit',\r\n  MAL: 'mal',\r\n  MAR: 'mar',\r\n  MKD: 'mkd',\r\n  MLT: 'mlt',\r\n  MSA: 'msa',\r\n  MYA: 'mya',\r\n  NEP: 'nep',\r\n  NLD: 'nld',\r\n  NOR: 'nor',\r\n  ORI: 'ori',\r\n  PAN: 'pan',\r\n  POL: 'pol',\r\n  POR: 'por',\r\n  PUS: 'pus',\r\n  RON: 'ron',\r\n  RUS: 'rus',\r\n  SAN: 'san',\r\n  SIN: 'sin',\r\n  SLK: 'slk',\r\n  SLV: 'slv',\r\n  SPA: 'spa',\r\n  SPA_OLD: 'spa_old',\r\n  SQI: 'sqi',\r\n  SRP: 'srp',\r\n  SRP_LATN: 'srp_latn',\r\n  SWA: 'swa',\r\n  SWE: 'swe',\r\n  SYR: 'syr',\r\n  TAM: 'tam',\r\n  TEL: 'tel',\r\n  TGK: 'tgk',\r\n  TGL: 'tgl',\r\n  THA: 'tha',\r\n  TIR: 'tir',\r\n  TUR: 'tur',\r\n  UIG: 'uig',\r\n  UKR: 'ukr',\r\n  URD: 'urd',\r\n  UZB: 'uzb',\r\n  UZB_CYRL: 'uzb_cyrl',\r\n  VIE: 'vie',\r\n  YID: 'yid',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (prefix, cnt) => (\r\n  `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`\r\n);\r\n","'use strict';\r\n\r\nconst createWorker = require('./createWorker');\r\n\r\nconst recognize = async (image, langs, options) => {\r\n  const worker = await createWorker(langs, 1, options);\r\n  return worker.recognize(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nconst detect = async (image, options) => {\r\n  const worker = await createWorker('osd', 0, options);\r\n  return worker.detect(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n  recognize,\r\n  detect,\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * PSM = Page Segmentation Mode\r\n */\r\nmodule.exports = {\r\n  OSD_ONLY: '0',\r\n  AUTO_OSD: '1',\r\n  AUTO_ONLY: '2',\r\n  AUTO: '3',\r\n  SINGLE_COLUMN: '4',\r\n  SINGLE_BLOCK_VERT_TEXT: '5',\r\n  SINGLE_BLOCK: '6',\r\n  SINGLE_LINE: '7',\r\n  SINGLE_WORD: '8',\r\n  CIRCLE_WORD: '9',\r\n  SINGLE_CHAR: '10',\r\n  SPARSE_TEXT: '11',\r\n  SPARSE_TEXT_OSD: '12',\r\n  RAW_LINE: '13',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (worker, handler) => {\r\n  worker.onmessage = ({ data }) => { // eslint-disable-line\r\n    handler(data);\r\n  };\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * OEM = OCR Engine Mode, and there are 4 possible modes.\r\n *\r\n * By default tesseract.js uses LSTM_ONLY mode.\r\n *\r\n */\r\nmodule.exports = {\r\n  TESSERACT_ONLY: 0,\r\n  LSTM_ONLY: 1,\r\n  TESSERACT_LSTM_COMBINED: 2,\r\n  DEFAULT: 3,\r\n};\r\n","/**\r\n * Copyright (c) 2014-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nvar runtime = (function (exports) {\r\n  \"use strict\";\r\n\r\n  var Op = Object.prototype;\r\n  var hasOwn = Op.hasOwnProperty;\r\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\r\n  var undefined; // More compressible than void 0.\r\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n  function define(obj, key, value) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n    return obj[key];\r\n  }\r\n  try {\r\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\r\n    define({}, \"\");\r\n  } catch (err) {\r\n    define = function(obj, key, value) {\r\n      return obj[key] = value;\r\n    };\r\n  }\r\n\r\n  function wrap(innerFn, outerFn, self, tryLocsList) {\r\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n    var generator = Object.create(protoGenerator.prototype);\r\n    var context = new Context(tryLocsList || []);\r\n\r\n    // The ._invoke method unifies the implementations of the .next,\r\n    // .throw, and .return methods.\r\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\r\n\r\n    return generator;\r\n  }\r\n  exports.wrap = wrap;\r\n\r\n  // Try/catch helper to minimize deoptimizations. Returns a completion\r\n  // record like context.tryEntries[i].completion. This interface could\r\n  // have been (and was previously) designed to take a closure to be\r\n  // invoked without arguments, but in all the cases we care about we\r\n  // already have an existing method we want to call, so there's no need\r\n  // to create a new function object. We can even get away with assuming\r\n  // the method takes exactly one argument, since that happens to be true\r\n  // in every case, so we don't have to touch the arguments object. The\r\n  // only additional allocation required is the completion record, which\r\n  // has a stable shape and so hopefully should be cheap to allocate.\r\n  function tryCatch(fn, obj, arg) {\r\n    try {\r\n      return { type: \"normal\", arg: fn.call(obj, arg) };\r\n    } catch (err) {\r\n      return { type: \"throw\", arg: err };\r\n    }\r\n  }\r\n\r\n  var GenStateSuspendedStart = \"suspendedStart\";\r\n  var GenStateSuspendedYield = \"suspendedYield\";\r\n  var GenStateExecuting = \"executing\";\r\n  var GenStateCompleted = \"completed\";\r\n\r\n  // Returning this object from the innerFn has the same effect as\r\n  // breaking out of the dispatch switch statement.\r\n  var ContinueSentinel = {};\r\n\r\n  // Dummy constructor functions that we use as the .constructor and\r\n  // .constructor.prototype properties for functions that return Generator\r\n  // objects. For full spec compliance, you may wish to configure your\r\n  // minifier not to mangle the names of these two functions.\r\n  function Generator() {}\r\n  function GeneratorFunction() {}\r\n  function GeneratorFunctionPrototype() {}\r\n\r\n  // This is a polyfill for %IteratorPrototype% for environments that\r\n  // don't natively support it.\r\n  var IteratorPrototype = {};\r\n  define(IteratorPrototype, iteratorSymbol, function () {\r\n    return this;\r\n  });\r\n\r\n  var getProto = Object.getPrototypeOf;\r\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n  if (NativeIteratorPrototype &&\r\n      NativeIteratorPrototype !== Op &&\r\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n    // This environment has a native %IteratorPrototype%; use it instead\r\n    // of the polyfill.\r\n    IteratorPrototype = NativeIteratorPrototype;\r\n  }\r\n\r\n  var Gp = GeneratorFunctionPrototype.prototype =\r\n    Generator.prototype = Object.create(IteratorPrototype);\r\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\r\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\r\n  defineProperty(\r\n    GeneratorFunctionPrototype,\r\n    \"constructor\",\r\n    { value: GeneratorFunction, configurable: true }\r\n  );\r\n  GeneratorFunction.displayName = define(\r\n    GeneratorFunctionPrototype,\r\n    toStringTagSymbol,\r\n    \"GeneratorFunction\"\r\n  );\r\n\r\n  // Helper for defining the .next, .throw, and .return methods of the\r\n  // Iterator interface in terms of a single ._invoke method.\r\n  function defineIteratorMethods(prototype) {\r\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n      define(prototype, method, function(arg) {\r\n        return this._invoke(method, arg);\r\n      });\r\n    });\r\n  }\r\n\r\n  exports.isGeneratorFunction = function(genFun) {\r\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n    return ctor\r\n      ? ctor === GeneratorFunction ||\r\n        // For the native GeneratorFunction constructor, the best we can\r\n        // do is to check its .name property.\r\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n      : false;\r\n  };\r\n\r\n  exports.mark = function(genFun) {\r\n    if (Object.setPrototypeOf) {\r\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n    } else {\r\n      genFun.__proto__ = GeneratorFunctionPrototype;\r\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\r\n    }\r\n    genFun.prototype = Object.create(Gp);\r\n    return genFun;\r\n  };\r\n\r\n  // Within the body of any async function, `await x` is transformed to\r\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n  // meant to be awaited.\r\n  exports.awrap = function(arg) {\r\n    return { __await: arg };\r\n  };\r\n\r\n  function AsyncIterator(generator, PromiseImpl) {\r\n    function invoke(method, arg, resolve, reject) {\r\n      var record = tryCatch(generator[method], generator, arg);\r\n      if (record.type === \"throw\") {\r\n        reject(record.arg);\r\n      } else {\r\n        var result = record.arg;\r\n        var value = result.value;\r\n        if (value &&\r\n            typeof value === \"object\" &&\r\n            hasOwn.call(value, \"__await\")) {\r\n          return PromiseImpl.resolve(value.__await).then(function(value) {\r\n            invoke(\"next\", value, resolve, reject);\r\n          }, function(err) {\r\n            invoke(\"throw\", err, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\r\n          // When a yielded Promise is resolved, its final value becomes\r\n          // the .value of the Promise<{value,done}> result for the\r\n          // current iteration.\r\n          result.value = unwrapped;\r\n          resolve(result);\r\n        }, function(error) {\r\n          // If a rejected Promise was yielded, throw the rejection back\r\n          // into the async generator function so it can be handled there.\r\n          return invoke(\"throw\", error, resolve, reject);\r\n        });\r\n      }\r\n    }\r\n\r\n    var previousPromise;\r\n\r\n    function enqueue(method, arg) {\r\n      function callInvokeWithMethodAndArg() {\r\n        return new PromiseImpl(function(resolve, reject) {\r\n          invoke(method, arg, resolve, reject);\r\n        });\r\n      }\r\n\r\n      return previousPromise =\r\n        // If enqueue has been called before, then we want to wait until\r\n        // all previous Promises have been resolved before calling invoke,\r\n        // so that results are always delivered in the correct order. If\r\n        // enqueue has not been called before, then it is important to\r\n        // call invoke immediately, without waiting on a callback to fire,\r\n        // so that the async generator function has the opportunity to do\r\n        // any necessary setup in a predictable way. This predictability\r\n        // is why the Promise constructor synchronously invokes its\r\n        // executor callback, and why async functions synchronously\r\n        // execute code before the first await. Since we implement simple\r\n        // async functions in terms of async generators, it is especially\r\n        // important to get this right, even though it requires care.\r\n        previousPromise ? previousPromise.then(\r\n          callInvokeWithMethodAndArg,\r\n          // Avoid propagating failures to Promises returned by later\r\n          // invocations of the iterator.\r\n          callInvokeWithMethodAndArg\r\n        ) : callInvokeWithMethodAndArg();\r\n    }\r\n\r\n    // Define the unified helper method that is used to implement .next,\r\n    // .throw, and .return (see defineIteratorMethods).\r\n    defineProperty(this, \"_invoke\", { value: enqueue });\r\n  }\r\n\r\n  defineIteratorMethods(AsyncIterator.prototype);\r\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\r\n    return this;\r\n  });\r\n  exports.AsyncIterator = AsyncIterator;\r\n\r\n  // Note that simple async functions are implemented on top of\r\n  // AsyncIterator objects; they just return a Promise for the value of\r\n  // the final result produced by the iterator.\r\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\r\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\r\n\r\n    var iter = new AsyncIterator(\r\n      wrap(innerFn, outerFn, self, tryLocsList),\r\n      PromiseImpl\r\n    );\r\n\r\n    return exports.isGeneratorFunction(outerFn)\r\n      ? iter // If outerFn is a generator, return the full iterator.\r\n      : iter.next().then(function(result) {\r\n          return result.done ? result.value : iter.next();\r\n        });\r\n  };\r\n\r\n  function makeInvokeMethod(innerFn, self, context) {\r\n    var state = GenStateSuspendedStart;\r\n\r\n    return function invoke(method, arg) {\r\n      if (state === GenStateExecuting) {\r\n        throw new Error(\"Generator is already running\");\r\n      }\r\n\r\n      if (state === GenStateCompleted) {\r\n        if (method === \"throw\") {\r\n          throw arg;\r\n        }\r\n\r\n        // Be forgiving, per 25.3.3.3.3 of the spec:\r\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n        return doneResult();\r\n      }\r\n\r\n      context.method = method;\r\n      context.arg = arg;\r\n\r\n      while (true) {\r\n        var delegate = context.delegate;\r\n        if (delegate) {\r\n          var delegateResult = maybeInvokeDelegate(delegate, context);\r\n          if (delegateResult) {\r\n            if (delegateResult === ContinueSentinel) continue;\r\n            return delegateResult;\r\n          }\r\n        }\r\n\r\n        if (context.method === \"next\") {\r\n          // Setting context._sent for legacy support of Babel's\r\n          // function.sent implementation.\r\n          context.sent = context._sent = context.arg;\r\n\r\n        } else if (context.method === \"throw\") {\r\n          if (state === GenStateSuspendedStart) {\r\n            state = GenStateCompleted;\r\n            throw context.arg;\r\n          }\r\n\r\n          context.dispatchException(context.arg);\r\n\r\n        } else if (context.method === \"return\") {\r\n          context.abrupt(\"return\", context.arg);\r\n        }\r\n\r\n        state = GenStateExecuting;\r\n\r\n        var record = tryCatch(innerFn, self, context);\r\n        if (record.type === \"normal\") {\r\n          // If an exception is thrown from innerFn, we leave state ===\r\n          // GenStateExecuting and loop back for another invocation.\r\n          state = context.done\r\n            ? GenStateCompleted\r\n            : GenStateSuspendedYield;\r\n\r\n          if (record.arg === ContinueSentinel) {\r\n            continue;\r\n          }\r\n\r\n          return {\r\n            value: record.arg,\r\n            done: context.done\r\n          };\r\n\r\n        } else if (record.type === \"throw\") {\r\n          state = GenStateCompleted;\r\n          // Dispatch the exception by looping back around to the\r\n          // context.dispatchException(context.arg) call above.\r\n          context.method = \"throw\";\r\n          context.arg = record.arg;\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Call delegate.iterator[context.method](context.arg) and handle the\r\n  // result, either by returning a { value, done } result from the\r\n  // delegate iterator, or by modifying context.method and context.arg,\r\n  // setting context.delegate to null, and returning the ContinueSentinel.\r\n  function maybeInvokeDelegate(delegate, context) {\r\n    var methodName = context.method;\r\n    var method = delegate.iterator[methodName];\r\n    if (method === undefined) {\r\n      // A .throw or .return when the delegate iterator has no .throw\r\n      // method, or a missing .next mehtod, always terminate the\r\n      // yield* loop.\r\n      context.delegate = null;\r\n\r\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\r\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\r\n        // If the delegate iterator has a return method, give it a\r\n        // chance to clean up.\r\n        context.method = \"return\";\r\n        context.arg = undefined;\r\n        maybeInvokeDelegate(delegate, context);\r\n\r\n        if (context.method === \"throw\") {\r\n          // If maybeInvokeDelegate(context) changed context.method from\r\n          // \"return\" to \"throw\", let that override the TypeError below.\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n      if (methodName !== \"return\") {\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\r\n          \"The iterator does not provide a '\" + methodName + \"' method\");\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n    if (record.type === \"throw\") {\r\n      context.method = \"throw\";\r\n      context.arg = record.arg;\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var info = record.arg;\r\n\r\n    if (! info) {\r\n      context.method = \"throw\";\r\n      context.arg = new TypeError(\"iterator result is not an object\");\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    if (info.done) {\r\n      // Assign the result of the finished delegate to the temporary\r\n      // variable specified by delegate.resultName (see delegateYield).\r\n      context[delegate.resultName] = info.value;\r\n\r\n      // Resume execution at the desired location (see delegateYield).\r\n      context.next = delegate.nextLoc;\r\n\r\n      // If context.method was \"throw\" but the delegate handled the\r\n      // exception, let the outer generator proceed normally. If\r\n      // context.method was \"next\", forget context.arg since it has been\r\n      // \"consumed\" by the delegate iterator. If context.method was\r\n      // \"return\", allow the original .return call to continue in the\r\n      // outer generator.\r\n      if (context.method !== \"return\") {\r\n        context.method = \"next\";\r\n        context.arg = undefined;\r\n      }\r\n\r\n    } else {\r\n      // Re-yield the result returned by the delegate method.\r\n      return info;\r\n    }\r\n\r\n    // The delegate iterator is finished, so forget it and continue with\r\n    // the outer generator.\r\n    context.delegate = null;\r\n    return ContinueSentinel;\r\n  }\r\n\r\n  // Define Generator.prototype.{next,throw,return} in terms of the\r\n  // unified ._invoke helper method.\r\n  defineIteratorMethods(Gp);\r\n\r\n  define(Gp, toStringTagSymbol, \"Generator\");\r\n\r\n  // A Generator should always return itself as the iterator object when the\r\n  // @@iterator function is called on it. Some browsers' implementations of the\r\n  // iterator prototype chain incorrectly implement this, causing the Generator\r\n  // object to not be returned from this call. This ensures that doesn't happen.\r\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n  define(Gp, iteratorSymbol, function() {\r\n    return this;\r\n  });\r\n\r\n  define(Gp, \"toString\", function() {\r\n    return \"[object Generator]\";\r\n  });\r\n\r\n  function pushTryEntry(locs) {\r\n    var entry = { tryLoc: locs[0] };\r\n\r\n    if (1 in locs) {\r\n      entry.catchLoc = locs[1];\r\n    }\r\n\r\n    if (2 in locs) {\r\n      entry.finallyLoc = locs[2];\r\n      entry.afterLoc = locs[3];\r\n    }\r\n\r\n    this.tryEntries.push(entry);\r\n  }\r\n\r\n  function resetTryEntry(entry) {\r\n    var record = entry.completion || {};\r\n    record.type = \"normal\";\r\n    delete record.arg;\r\n    entry.completion = record;\r\n  }\r\n\r\n  function Context(tryLocsList) {\r\n    // The root entry object (effectively a try statement without a catch\r\n    // or a finally block) gives us a place to store values thrown from\r\n    // locations where there is no enclosing try statement.\r\n    this.tryEntries = [{ tryLoc: \"root\" }];\r\n    tryLocsList.forEach(pushTryEntry, this);\r\n    this.reset(true);\r\n  }\r\n\r\n  exports.keys = function(val) {\r\n    var object = Object(val);\r\n    var keys = [];\r\n    for (var key in object) {\r\n      keys.push(key);\r\n    }\r\n    keys.reverse();\r\n\r\n    // Rather than returning an object with a next method, we keep\r\n    // things simple and return the next function itself.\r\n    return function next() {\r\n      while (keys.length) {\r\n        var key = keys.pop();\r\n        if (key in object) {\r\n          next.value = key;\r\n          next.done = false;\r\n          return next;\r\n        }\r\n      }\r\n\r\n      // To avoid creating an additional object, we just hang the .value\r\n      // and .done properties off the next function object itself. This\r\n      // also ensures that the minifier will not anonymize the function.\r\n      next.done = true;\r\n      return next;\r\n    };\r\n  };\r\n\r\n  function values(iterable) {\r\n    if (iterable) {\r\n      var iteratorMethod = iterable[iteratorSymbol];\r\n      if (iteratorMethod) {\r\n        return iteratorMethod.call(iterable);\r\n      }\r\n\r\n      if (typeof iterable.next === \"function\") {\r\n        return iterable;\r\n      }\r\n\r\n      if (!isNaN(iterable.length)) {\r\n        var i = -1, next = function next() {\r\n          while (++i < iterable.length) {\r\n            if (hasOwn.call(iterable, i)) {\r\n              next.value = iterable[i];\r\n              next.done = false;\r\n              return next;\r\n            }\r\n          }\r\n\r\n          next.value = undefined;\r\n          next.done = true;\r\n\r\n          return next;\r\n        };\r\n\r\n        return next.next = next;\r\n      }\r\n    }\r\n\r\n    // Return an iterator with no values.\r\n    return { next: doneResult };\r\n  }\r\n  exports.values = values;\r\n\r\n  function doneResult() {\r\n    return { value: undefined, done: true };\r\n  }\r\n\r\n  Context.prototype = {\r\n    constructor: Context,\r\n\r\n    reset: function(skipTempReset) {\r\n      this.prev = 0;\r\n      this.next = 0;\r\n      // Resetting context._sent for legacy support of Babel's\r\n      // function.sent implementation.\r\n      this.sent = this._sent = undefined;\r\n      this.done = false;\r\n      this.delegate = null;\r\n\r\n      this.method = \"next\";\r\n      this.arg = undefined;\r\n\r\n      this.tryEntries.forEach(resetTryEntry);\r\n\r\n      if (!skipTempReset) {\r\n        for (var name in this) {\r\n          // Not sure about the optimal order of these conditions:\r\n          if (name.charAt(0) === \"t\" &&\r\n              hasOwn.call(this, name) &&\r\n              !isNaN(+name.slice(1))) {\r\n            this[name] = undefined;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function() {\r\n      this.done = true;\r\n\r\n      var rootEntry = this.tryEntries[0];\r\n      var rootRecord = rootEntry.completion;\r\n      if (rootRecord.type === \"throw\") {\r\n        throw rootRecord.arg;\r\n      }\r\n\r\n      return this.rval;\r\n    },\r\n\r\n    dispatchException: function(exception) {\r\n      if (this.done) {\r\n        throw exception;\r\n      }\r\n\r\n      var context = this;\r\n      function handle(loc, caught) {\r\n        record.type = \"throw\";\r\n        record.arg = exception;\r\n        context.next = loc;\r\n\r\n        if (caught) {\r\n          // If the dispatched exception was caught by a catch block,\r\n          // then let that catch block handle the exception normally.\r\n          context.method = \"next\";\r\n          context.arg = undefined;\r\n        }\r\n\r\n        return !! caught;\r\n      }\r\n\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        var record = entry.completion;\r\n\r\n        if (entry.tryLoc === \"root\") {\r\n          // Exception thrown outside of any try block that could handle\r\n          // it, so set the completion value of the entire function to\r\n          // throw the exception.\r\n          return handle(\"end\");\r\n        }\r\n\r\n        if (entry.tryLoc <= this.prev) {\r\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n          if (hasCatch && hasFinally) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            } else if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else if (hasCatch) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            }\r\n\r\n          } else if (hasFinally) {\r\n            if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else {\r\n            throw new Error(\"try statement without catch or finally\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    abrupt: function(type, arg) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc <= this.prev &&\r\n            hasOwn.call(entry, \"finallyLoc\") &&\r\n            this.prev < entry.finallyLoc) {\r\n          var finallyEntry = entry;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (finallyEntry &&\r\n          (type === \"break\" ||\r\n           type === \"continue\") &&\r\n          finallyEntry.tryLoc <= arg &&\r\n          arg <= finallyEntry.finallyLoc) {\r\n        // Ignore the finally entry if control is not jumping to a\r\n        // location outside the try/catch block.\r\n        finallyEntry = null;\r\n      }\r\n\r\n      var record = finallyEntry ? finallyEntry.completion : {};\r\n      record.type = type;\r\n      record.arg = arg;\r\n\r\n      if (finallyEntry) {\r\n        this.method = \"next\";\r\n        this.next = finallyEntry.finallyLoc;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      return this.complete(record);\r\n    },\r\n\r\n    complete: function(record, afterLoc) {\r\n      if (record.type === \"throw\") {\r\n        throw record.arg;\r\n      }\r\n\r\n      if (record.type === \"break\" ||\r\n          record.type === \"continue\") {\r\n        this.next = record.arg;\r\n      } else if (record.type === \"return\") {\r\n        this.rval = this.arg = record.arg;\r\n        this.method = \"return\";\r\n        this.next = \"end\";\r\n      } else if (record.type === \"normal\" && afterLoc) {\r\n        this.next = afterLoc;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    },\r\n\r\n    finish: function(finallyLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.finallyLoc === finallyLoc) {\r\n          this.complete(entry.completion, entry.afterLoc);\r\n          resetTryEntry(entry);\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n    },\r\n\r\n    \"catch\": function(tryLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc === tryLoc) {\r\n          var record = entry.completion;\r\n          if (record.type === \"throw\") {\r\n            var thrown = record.arg;\r\n            resetTryEntry(entry);\r\n          }\r\n          return thrown;\r\n        }\r\n      }\r\n\r\n      // The context.catch method must only be called with a location\r\n      // argument that corresponds to a known catch block.\r\n      throw new Error(\"illegal catch attempt\");\r\n    },\r\n\r\n    delegateYield: function(iterable, resultName, nextLoc) {\r\n      this.delegate = {\r\n        iterator: values(iterable),\r\n        resultName: resultName,\r\n        nextLoc: nextLoc\r\n      };\r\n\r\n      if (this.method === \"next\") {\r\n        // Deliberately forget the last sent value so that we don't\r\n        // accidentally pass it on to the delegate.\r\n        this.arg = undefined;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n  };\r\n\r\n  // Regardless of whether this script is executing as a CommonJS module\r\n  // or not, return the runtime object so that we can declare the variable\r\n  // regeneratorRuntime in the outer scope, which allows this module to be\r\n  // injected easily by `bin/regenerator --include-runtime script.js`.\r\n  return exports;\r\n\r\n}(\r\n  // If this script is executing as a CommonJS module, use module.exports\r\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n  // object. Either way, the resulting object will be used to initialize\r\n  // the regeneratorRuntime variable at the top of this file.\r\n  typeof module === \"object\" ? module.exports : {}\r\n));\r\n\r\ntry {\r\n  regeneratorRuntime = runtime;\r\n} catch (accidentalStrictMode) {\r\n  // This module should not be running in strict mode, so the above\r\n  // assignment should always work unless something is misconfigured. Just\r\n  // in case runtime.js accidentally runs in strict mode, in modern engines\r\n  // we can explicitly access globalThis. In older engines we can escape\r\n  // strict mode using a global Function call. This could conceivably fail\r\n  // if a Content Security Policy forbids using Function, but in that case\r\n  // the proper solution is to fix the accidental strict mode problem. If\r\n  // you've misconfigured your bundler to force strict mode and applied a\r\n  // CSP to forbid Function, and you're not willing to fix either of those\r\n  // problems, please detail your unique predicament in a GitHub issue.\r\n  if (typeof globalThis === \"object\") {\r\n    globalThis.regeneratorRuntime = runtime;\r\n  } else {\r\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\r\n  }\r\n}\r\n","'use strict';\r\n\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\n\r\nlet schedulerCounter = 0;\r\n\r\nmodule.exports = () => {\r\n  const id = getId('Scheduler', schedulerCounter);\r\n  const workers = {};\r\n  const runningWorkers = {};\r\n  let jobQueue = [];\r\n\r\n  schedulerCounter += 1;\r\n\r\n  const getQueueLen = () => jobQueue.length;\r\n  const getNumWorkers = () => Object.keys(workers).length;\r\n\r\n  const dequeue = () => {\r\n    if (jobQueue.length !== 0) {\r\n      const wIds = Object.keys(workers);\r\n      for (let i = 0; i < wIds.length; i += 1) {\r\n        if (typeof runningWorkers[wIds[i]] === 'undefined') {\r\n          jobQueue[0](workers[wIds[i]]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const queue = (action, payload) => (\r\n    new Promise((resolve, reject) => {\r\n      const job = createJob({ action, payload });\r\n      jobQueue.push(async (w) => {\r\n        jobQueue.shift();\r\n        runningWorkers[w.id] = job;\r\n        try {\r\n          resolve(await w[action].apply(this, [...payload, job.id]));\r\n        } catch (err) {\r\n          reject(err);\r\n        } finally {\r\n          delete runningWorkers[w.id];\r\n          dequeue();\r\n        }\r\n      });\r\n      log(`[${id}]: Add ${job.id} to JobQueue`);\r\n      log(`[${id}]: JobQueue length=${jobQueue.length}`);\r\n      dequeue();\r\n    })\r\n  );\r\n\r\n  const addWorker = (w) => {\r\n    workers[w.id] = w;\r\n    log(`[${id}]: Add ${w.id}`);\r\n    log(`[${id}]: Number of workers=${getNumWorkers()}`);\r\n    dequeue();\r\n    return w.id;\r\n  };\r\n\r\n  const addJob = async (action, ...payload) => {\r\n    if (getNumWorkers() === 0) {\r\n      throw Error(`[${id}]: You need to have at least one worker before adding jobs`);\r\n    }\r\n    return queue(action, payload);\r\n  };\r\n\r\n  const terminate = async () => {\r\n    Object.keys(workers).forEach(async (wid) => {\r\n      await workers[wid].terminate();\r\n    });\r\n    jobQueue = [];\r\n  };\r\n\r\n  return {\r\n    addWorker,\r\n    addJob,\r\n    terminate,\r\n    getQueueLen,\r\n    getNumWorkers,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst version = require('../../../package.json').version;\r\nconst defaultOptions = require('../../constants/defaultOptions');\r\n\r\n/*\r\n * Default options for browser worker\r\n */\r\nmodule.exports = {\r\n  ...defaultOptions,\r\n  workerPath: `https://cdn.jsdelivr.net/npm/tesseract.js@v${version}/dist/worker.min.js`,\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Entry point for tesseract.js, should be the entry when bundling.\r\n *\r\n * @fileoverview entry point for tesseract.js\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nrequire('regenerator-runtime/runtime');\r\nconst createScheduler = require('./createScheduler');\r\nconst createWorker = require('./createWorker');\r\nconst Tesseract = require('./Tesseract');\r\nconst languages = require('./constants/languages');\r\nconst OEM = require('./constants/OEM');\r\nconst PSM = require('./constants/PSM');\r\nconst { setLogging } = require('./utils/log');\r\n\r\nmodule.exports = {\r\n  languages,\r\n  OEM,\r\n  PSM,\r\n  createScheduler,\r\n  createWorker,\r\n  setLogging,\r\n  ...Tesseract,\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (key) => {\r\n  const env = {};\r\n\r\n  if (typeof WorkerGlobalScope !== 'undefined') {\r\n    env.type = 'webworker';\r\n  } else if (typeof document === 'object') {\r\n    env.type = 'browser';\r\n  } else if (typeof process === 'object' && typeof require === 'function') {\r\n    env.type = 'node';\r\n  }\r\n\r\n  if (typeof key === 'undefined') {\r\n    return env;\r\n  }\r\n\r\n  return env[key];\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  /*\r\n   * Use BlobURL for worker script by default\r\n   * TODO: remove this option\r\n   *\r\n   */\r\n  workerBlobURL: true,\r\n  logger: () => {},\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * send\r\n *\r\n * @name send\r\n * @function send packet to worker and create a job\r\n * @access public\r\n */\r\nmodule.exports = async (worker, packet) => {\r\n  worker.postMessage(packet);\r\n};\r\n","'use strict';\r\n\r\nlet logging = false;\r\n\r\nexports.logging = logging;\r\n\r\nexports.setLogging = (_logging) => {\r\n  logging = _logging;\r\n};\r\n\r\nexports.log = (...args) => (logging ? console.log.apply(this, args) : null);\r\n","'use strict';\r\n\r\n/**\r\n * terminateWorker\r\n *\r\n * @name terminateWorker\r\n * @function terminate worker\r\n * @access public\r\n */\r\nmodule.exports = (worker) => {\r\n  worker.terminate();\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Fuse.js v7.1.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2025 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When `true`, the algorithm will ignore diacritics (accents) in comparisons\n  ignoreDiacritics: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nconst stripDiacritics = String.prototype.normalize\n    ? ((str) => str.normalize('NFD').replace(/[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/g, ''))\n    : ((str) => str);\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, ignoreDiacritics, includeMatches } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      ignoreDiacritics,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive, ignoreDiacritics } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.1.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","const Default_Row_Format = {\r\n    Date: null,\r\n    Intervention: null,\r\n    AST: null,\r\n    AST_RangeLow: 8,\r\n    AST_RangeHigh: 33,\r\n    ALT: null,\r\n    ALT_RangeLow: 4,\r\n    ALT_RangeHigh: 36,\r\n    GLOBULIN: null,\r\n    GLOBULIN_RangeLow: 1.9,\r\n    GLOBULIN_RangeHigh: 4.1,\r\n    BUN: null,\r\n    BUN_RangeLow: 6,\r\n    BUN_RangeHigh: 20,\r\n    FASTING_GLUCOSE: null,\r\n    FASTING_GLUCOSE_RangeLow: 70,\r\n    FASTING_GLUCOSE_RangeHigh: 99,\r\n    A1C: null,\r\n    A1C_RangeLow: 0,\r\n    A1C_RangeHigh: 5.5,\r\n    RBC: null,\r\n    RBC_RangeLow: 4.5,\r\n    RBC_RangeHigh: 5.9,\r\n    HGB: null,\r\n    HGB_RangeLow: 13.5,\r\n    HGB_RangeHigh: 17.5,\r\n    HCT: null,\r\n    HCT_RangeLow: 41,\r\n    HCT_RangeHigh: 53,\r\n    WBC: null,\r\n    WBC_RangeLow: 4,\r\n    WBC_RangeHigh: 11,\r\n    PLATELETS: null,\r\n    PLATELETS_RangeLow: 150,\r\n    PLATELETS_RangeHigh: 400,\r\n    SODIUM: null,\r\n    SODIUM_RangeLow: 135,\r\n    SODIUM_RangeHigh: 145,\r\n    POTASSIUM: null,\r\n    POTASSIUM_RangeLow: 3.4,\r\n    POTASSIUM_RangeHigh: 5,\r\n    CHLORIDE: null,\r\n    CHLORIDE_RangeLow: 98,\r\n    CHLORIDE_RangeHigh: 108,\r\n    CALCIUM: null,\r\n    CALCIUM_RangeLow: 8.5,\r\n    CALCIUM_RangeHigh: 10.5,\r\n    CO2: null,\r\n    CO2_RangeLow: 23,\r\n    CO2_RangeHigh: 32,\r\n    IGF1: null,\r\n    IGF1_RangeLow: 120,\r\n    IGF1_RangeHigh: 160,\r\n    FASTING_INSULIN: null,\r\n    FASTING_INSULIN_RangeLow: 2,\r\n    FASTING_INSULIN_RangeHigh: 6,\r\n    BETA_HYDROXYBUTYRATE: null,\r\n    BETA_HYDROXYBUTYRATE_RangeLow: 0,\r\n    BETA_HYDROXYBUTYRATE_RangeHigh: 7,\r\n    B12: null,\r\n    B12_RangeLow: 500,\r\n    B12_RangeHigh: 1300,\r\n    MAGNESIUM: null,\r\n    MAGNESIUM_RangeLow: 1.7,\r\n    MAGNESIUM_RangeHigh: 2.4,\r\n    CRP: null,\r\n    CRP_RangeLow: 1,\r\n    CRP_RangeHigh: 3,\r\n    IRON: null,\r\n    IRON_MaleRangeLow: 50,\r\n    IRON_MaleRangeHigh: 150,\r\n    IRON_FemaleRangeLow: 35,\r\n    IRON_FemaleRangeHigh: 145,\r\n    CHOLESTEROL: null,\r\n    CHOLESTEROL_RangeLow: 0,\r\n    CHOLESTEROL_RangeHigh: 200,\r\n    HOMOCYSTEINE: null,\r\n    HOMOCYSTEINE_RangeLow: 5,\r\n    HOMOCYSTEINE_RangeHigh: 15,\r\n    Vitamin_D: null,\r\n    Vitamin_D_RangeLow: 40,\r\n    Vitamin_D_RangeHigh: 90\r\n};\r\n\r\n\r\nexport const field_names = [\r\n    { csvfield: 'AST', replacements: ['ast', 'aspartate aminotransferase', 'aspartate transaminase', 'sgot', 'serum glutamic oxaloacetic transaminase', 'asp aminotransferase'] },\r\n    { csvfield: 'ALT', replacements: ['alt', 'alanine aminotransferase', 'alanine transaminase', 'sgpt', 'serum glutamic pyruvic transaminase', 'ala aminotransferase', 'alat'] },\r\n    { csvfield: 'GLOBULIN', replacements: ['globulin', 'serum globulin', 'total globulin', 'glob', 'globulins'] },\r\n    { csvfield: 'BUN', replacements: ['bun', 'blood urea nitrogen', 'urea nitrogen', 'urea', 'blood urea'] },\r\n    { csvfield: 'FASTING_GLUCOSE', replacements: ['fasting glucose', 'glucose fasting', 'fbs', 'fasting blood sugar', 'glucose', 'blood glucose', 'serum glucose', 'plasma glucose', 'gluc', 'glu', 'fast glucose', 'glucose fast'] },\r\n    { csvfield: 'A1C', replacements: ['a1c', 'hba1c', 'hemoglobin a1c', 'glycated hemoglobin', 'glycohemoglobin', 'hgb a1c', 'hb a1c', 'a1c hemoglobin', 'hemoglobin a1c'] },\r\n    { csvfield: 'RBC', replacements: ['rbc', 'red blood cells', 'red blood cell count', 'erythrocytes', 'red cell count', 'rbc count', 'red cells'] },\r\n    { csvfield: 'HGB', replacements: ['hgb', 'hemoglobin', 'hb', 'haemoglobin', 'hemo'] },\r\n    { csvfield: 'HCT', replacements: ['hct', 'hematocrit', 'haematocrit', 'packed cell volume', 'pcv'] },\r\n    { csvfield: 'WBC', replacements: ['wbc', 'white blood cells', 'white blood cell count', 'leukocytes', 'white cell count', 'wbc count', 'white cells', 'leucocytes'] },\r\n    { csvfield: 'PLATELETS', replacements: ['platelets', 'platelet count', 'plt', 'thrombocytes', 'plts'] },\r\n    { csvfield: 'SODIUM', replacements: ['sodium', 'na', 'serum sodium', 'na+', 'sod'] },\r\n    { csvfield: 'POTASSIUM', replacements: ['potassium', 'k', 'serum potassium', 'k+', 'pot'] },\r\n    { csvfield: 'CHLORIDE', replacements: ['chloride', 'cl', 'serum chloride', 'cl-', 'chlor'] },\r\n    { csvfield: 'CALCIUM', replacements: ['calcium', 'ca', 'serum calcium', 'ca++', 'total calcium', 'ca2+'] },\r\n    { csvfield: 'CO2', replacements: ['co2', 'carbon dioxide', 'bicarbonate', 'hco3', 'total co2', 'co2 total', 'bicarb', 'tco2'] },\r\n    { csvfield: 'IGF1', replacements: ['igf1', 'igf-1', 'insulin-like growth factor 1', 'insulin like growth factor', 'somatomedin c', 'igf 1'] },\r\n    { csvfield: 'FASTING_INSULIN', replacements: ['fasting insulin', 'insulin fasting', 'insulin', 'serum insulin', 'plasma insulin', 'fast insulin', 'insulin fast'] },\r\n    { csvfield: 'BETA_HYDROXYBUTYRATE', replacements: ['beta hydroxybutyrate', 'beta-hydroxybutyrate', 'b-hydroxybutyrate', 'bhb', 'ketones', 'serum ketones', 'beta hydroxy butyrate'] },\r\n    { csvfield: 'B12', replacements: ['b12', 'vitamin b12', 'vitamin b-12', 'cobalamin', 'cyanocobalamin', 'b 12', 'vit b12', 'folate b12'] },\r\n    { csvfield: 'Vitamin_D', replacements: ['vitamin d', 'vitamin d3', 'vitamin d 25-oh', '25-hydroxyvitamin d', '25 oh vitamin d', 'calcidiol', 'vit d', 'vitamin d total', '25-oh-d3', '25(oh)d', 'vitamin d 25 hydroxy'] },\r\n    { csvfield: 'MAGNESIUM', replacements: ['magnesium', 'mg', 'serum magnesium', 'mg++', 'mag'] },\r\n    { csvfield: 'IRON', replacements: ['iron', 'fe', 'serum iron', 'iron serum', 'total iron'] },\r\n    { csvfield: 'CRP', replacements: ['crp', 'c-reactive protein', 'c reactive protein', 'c-rp', 'high sensitivity crp', 'hs-crp', 'hs crp'] },\r\n    { csvfield: 'CHOLESTEROL', replacements: ['cholesterol', 'total cholesterol', 'chol', 'tc', 'serum cholesterol', 'total chol'] },\r\n    { csvfield: 'HOMOCYSTEINE', replacements: ['homocysteine', 'hcy', 'homo-cysteine', 'homocyst', 'total homocysteine'] }\r\n];\r\n\r\n//placeholder for persistent curRowFormat\r\nlet curRowFormat = { ...Default_Row_Format };\r\n\r\n//modify row format based on field and range value\r\nexport async function modifyRowFormat(field, rangeValue, newValue) {\r\n    // Check if the field exists in curRowFormat\r\n    if (curRowFormat.hasOwnProperty(field)) {\r\n        // If modifying the main field value\r\n        if (!rangeValue) {\r\n            curRowFormat[field] = newValue;\r\n        } else {\r\n            // If modifying a range value (e.g., RangeLow or RangeHigh)\r\n            const rangeKey = `${field}_${rangeValue}`;\r\n            if (curRowFormat.hasOwnProperty(rangeKey)) {\r\n                curRowFormat[rangeKey] = newValue;\r\n            } else {\r\n                console.error(`Range key \"${rangeKey}\" does not exist in curRowFormat.`);\r\n            }\r\n        }\r\n    } else {\r\n        console.error(`Field \"${field}\" does not exist in curRowFormat.`);\r\n    }\r\n}\r\n\r\n/**\r\n * Processes a results object into a CSV string based on a pre-defined row format.\r\n * Fills null fields in the template with values from the results object.\r\n * Optionally triggers a download of the CSV file.\r\n *\r\n * @param {Object} resultsObject - Object containing key-value pairs to populate the CSV.\r\n * @param {boolean} downloadCsv - If true, downloads the CSV file automatically.\r\n * @returns {Promise<string>} - Promise resolving to a CSV-formatted string.\r\n */\r\nexport async function processToCsv(resultsObject, downloadCsv) {\r\n    const final_csv = { ...curRowFormat };\r\n    for (const [key, value] of Object.entries(final_csv)) {\r\n        if (value === null && key in resultsObject) {\r\n            final_csv[key] = resultsObject[key];\r\n        }\r\n    }\r\n\r\n    // generate CSV\r\n    const csv = [\r\n        Object.keys(final_csv).join(','),      // header row\r\n        Object.values(final_csv).join(',')     // value row\r\n    ].join('\\n');\r\n\r\n    if (downloadCsv) {\r\n        const csv_blob = new Blob([csv], { type: 'text/csv' });\r\n        const csv_url = URL.createObjectURL(csv_blob);\r\n        const csv_a = document.createElement('a');\r\n        csv_a.href = csv_url;\r\n        csv_a.download = 'final_csv.csv';\r\n        document.body.appendChild(csv_a);\r\n        csv_a.click();\r\n        document.body.removeChild(csv_a);\r\n        URL.revokeObjectURL(csv_url);\r\n    }\r\n\r\n    return csv;\r\n}\r\n","/**\r\n * Returns a marked up array of images that display the contents of ocrResults\r\n * Classifies values by color benchmarks: green = unimportant, blue = key, red = number\r\n *\r\n * @param {File[]} originalImages - Array of image files that were processed\r\n * @param {Object[]} ocrResults - list of mutated word objects to be interpreted\r\n * @returns {File[]} - Array of marked up image files\r\n */\r\nexport async function markupOcrResults(originalImages, ocrResults) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n    const markedImages = [];\r\n    for (const original_file of originalImages) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n        \r\n        const cur_page_words = ocrResults.filter(word_object => image_name === word_object.imageName);\r\n        for (const cur_page_word of cur_page_words) {\r\n            ctx.beginPath();\r\n            ctx.rect(cur_page_word.word_x, cur_page_word.word_y, cur_page_word.width, cur_page_word.height);\r\n\r\n            if (cur_page_word.potentialCsvFields.size > 0) {\r\n                ctx.strokeStyle = 'blue';\r\n            } else if (cur_page_word.numberScore > 0) {\r\n                ctx.strokeStyle = 'red';\r\n            } else {\r\n                ctx.strokeStyle = 'green';\r\n            }\r\n\r\n            ctx.lineWidth = 3;\r\n            ctx.stroke();\r\n\r\n            // Draw the word text at the center\r\n            ctx.save();\r\n            ctx.font = '16px Arial';\r\n            ctx.fillStyle = 'white';\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText(cur_page_word.wordText, cur_page_word.word_x, cur_page_word.word_y);\r\n            ctx.restore();\r\n        } \r\n        \r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}\r\n\r\n/**\r\n * Opens a new browser window and displays a list of image files\r\n * Provides a simple UI with each image centered and a close button\r\n *\r\n * @param {File[]} image_list - Array of image files to display\r\n * @returns {void} - Opens a new window; does not return a value\r\n */\r\nexport async function displayImages(image_list) {\r\n    console.log('ran the display')\r\n    // Open a new window and display all marked images there\r\n    const imageWindow = window.open('', '_blank', 'width=1200,height=900,scrollbars=yes,resizable=yes');\r\n    if (imageWindow) {\r\n        imageWindow.document.write('<!DOCTYPE html><html><head><title>Marked Images</title>');\r\n        imageWindow.document.write('<style>body{background:#222;color:#fff;font-family:sans-serif;margin:0;padding:2em;} .img-wrap{margin:2em 0;text-align:center;} img{max-width:95vw;max-height:80vh;box-shadow:0 0 10px #000;} button{position:fixed;top:1em;right:1em;z-index:1000;padding:0.5em 1em;font-size:1.2em;}</style>');\r\n        imageWindow.document.write('</head><body>');\r\n        imageWindow.document.write('<button onclick=\"window.close()\">Close</button>');\r\n        for (const markedFile of image_list) {\r\n            const url = imageWindow.URL.createObjectURL(markedFile);\r\n            imageWindow.document.write('<div class=\"img-wrap\"><img src=\"' + url + '\" alt=\"' + (markedFile.name || 'marked_image.png') + '\"></div>');\r\n        }\r\n        imageWindow.document.write('</body></html>');\r\n        imageWindow.document.close();\r\n    } else {\r\n        alert('Popup blocked! Please allow popups for this site to view marked images.');\r\n    }\r\n}\r\n\r\n/**\r\n * Generates marked-up images based on OCR results and CSV field assignments.\r\n * Draws visual connections between key and value word objects on the same page.\r\n * \r\n * Color conventions for visual debugging (can be adjusted in future):\r\n *   - Green: key  value links\r\n *   - Blue: key words (from OCR) [handled in markupOcrResults]\r\n *   - Red: numeric values (from OCR) [handled in markupOcrResults]\r\n * \r\n * @param {File[]} originalImages - Array of original image files that were processed.\r\n * @param {Object[]} csvFieldAssignments - Array of CSV field assignments containing:\r\n *      - keyUniqueKey: string, uniqueKey of the key word object\r\n *      - valueUniqueKey: string, uniqueKey of the value word object\r\n * @param {Object[]} ocrResults - Array of OCR word objects with metadata, including:\r\n *      - uniqueKey: string, unique identifier\r\n *      - word_x: number, X coordinate\r\n *      - word_y: number, Y coordinate\r\n *      - imageName: string, name of the image the word is on\r\n *      - matchWeights, currentMatch, etc. (optional metadata for debugging/processing)\r\n * @returns {Promise<File[]>} - A promise that resolves to an array of marked-up image files \r\n *                               (PNG format) with visual links drawn between matched key/value pairs.\r\n */\r\nexport async function markupProcessedOcrResults(originalImages, csvFieldAssignments, ocrResults) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n    \r\n\r\n    const markedImages = [];\r\n    for (const original_file of originalImages) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n        \r\n        //same logic as markup OCR\r\n        console.log(ocrResults)\r\n        const cur_page_words = ocrResults.filter(word_object => image_name === word_object.imageName);\r\n        for (const cur_page_word of cur_page_words) {\r\n            ctx.beginPath();\r\n            ctx.rect(cur_page_word.word_x, cur_page_word.word_y, cur_page_word.width, cur_page_word.height);\r\n\r\n            if (cur_page_word.potentialCsvFields.size > 0) {\r\n                ctx.strokeStyle = 'blue';\r\n            } else if (cur_page_word.numberScore > 0) {\r\n                ctx.strokeStyle = 'red';\r\n            } else {\r\n                ctx.strokeStyle = 'green';\r\n            }\r\n\r\n            ctx.lineWidth = 3;\r\n            ctx.stroke();\r\n\r\n            // Draw the word text at the center\r\n            ctx.save();\r\n            ctx.font = '16px Arial';\r\n            ctx.fillStyle = 'white';\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText(cur_page_word.wordText, cur_page_word.word_x, cur_page_word.word_y);\r\n            ctx.restore();\r\n        } \r\n\r\n\r\n        const csvFieldAssignmentsOnPage = csvFieldAssignments.filter(csvFieldAssignmentInfo => {\r\n            const keyWordObj = ocrResults.find(obj => obj.uniqueKey === csvFieldAssignmentInfo.keyUniqueKey);\r\n            if (!keyWordObj) return false; // skip if not found\r\n            return keyWordObj.imageName === image_name;\r\n        });\r\n\r\n        for (const csvFieldAssignment of csvFieldAssignmentsOnPage) {\r\n            const keyWordObj = ocrResults.find(obj => obj.uniqueKey === csvFieldAssignment.keyUniqueKey);\r\n            const valueWordObj = ocrResults.find(obj => obj.uniqueKey === csvFieldAssignment.valueUniqueKey);\r\n            ctx.beginPath();\r\n            ctx.moveTo(keyWordObj.word_x, keyWordObj.word_y);\r\n            ctx.lineTo(valueWordObj.word_x, valueWordObj.word_y);\r\n            ctx.strokeStyle = 'yellow';\r\n            ctx.lineWidth = 3;\r\n            ctx.stroke();\r\n        }\r\n\r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}\r\n\r\n\r\n","import {createScheduler, createWorker, PSM} from 'tesseract.js';\r\nimport Fuse from 'fuse.js';\r\nimport {field_names} from '../ocrUiFiles/formatCsvRow';\r\nimport {markupOcrResults, displayImages} from './imageMarkup';\r\n\r\n/**\r\n * Performs Ocr, cleans results, and evaluates each result's potential of being a sought after value through mutating the potentialCsvFields and numberScore properties\r\n *\r\n * @param {File[]} allImages - Array of image files to be processed.\r\n * @param {float} fuseThreshold - numerical threshold option for fuzzy searching with fuse.js\r\n * @param {float} resultThreshold - score threshold for accepting fuse result score\r\n * @returns {Object} - {\r\n *      'finalOcrResults': Filtered and cleaned array of scored word objects,\r\n *      'fuseResults': Map between csv fields and found matches (Array)\r\n * }\r\n */\r\nexport async function processDocumentCollection(\r\n    allImages, \r\n    fuseThreshold,\r\n    resultThreshold,\r\n    downloadOcrResults,\r\n    displayOcrResults\r\n    ) {\r\n    //run OCR\r\n    // returns ocr_results: Array of word objects extracted from OCR results.\r\n    // Each object represents a single recognized word with metadata:\r\n    // {\r\n    //   wordText: String        // The recognized word text\r\n    //   wordConfidence: Number  // Confidence score from Tesseract (0100)\r\n    //   wordChoices: Array      // Alternative recognition choices (empty if none)\r\n    //   word_y: Number           // Top Y coordinate of word bounding box\r\n    //   word_x: Number           // Left X coordinate of word bounding box\r\n    //   height: Number           // Height of bounding box\r\n    //   width: Number            // Width of bounding box\r\n    //   potentialCsvFields: Set   // Placeholder for matching to hardcoded keys\r\n    //   uniqueKey: String        // Unique hierarchical key (block/para/line/word)\r\n    //   imageName: String        // Name of source image/PDF page\r\n    //   rotateRadians: Number    // Page rotation in radians\r\n    //   numberScore: Number      // Placeholder scoring for numeric parsing\r\n    //   currentMatch: String     // uniqueKey of the matched item\r\n    //   matchWeights: Obj        // keys = uniqueKey of match, value = weight of the match\r\n    // }\r\n    let currentOcrResults = await ocrProcessing(allImages);\r\n\r\n    //cleaned OCR results\r\n    //returns same format as ocrProcessing\r\n    currentOcrResults =  ocrCleaning(currentOcrResults)\r\n    \r\n    //mutates currentOcrResults to score probability of wordText being a sought after csv value\r\n    //returns an object that maps csv_value to array of 'matched' ocr objects (fuse output form) \r\n    const fuseResults = scoreKeyOcr(currentOcrResults, field_names, fuseThreshold, resultThreshold)\r\n    \r\n    //mutates currentOcrResults to score probability of wordText being a sought after numerical value\r\n    scoreValOcr(currentOcrResults)\r\n    \r\n    //downloads mutated OcrResults\r\n    if (downloadOcrResults) {\r\n        console.log(\"requesting ocr json output download\")\r\n        const json = JSON.stringify(currentOcrResults, null, 2);\r\n        const json_blob = new Blob([json], { type: 'application/json' });\r\n        const json_url = URL.createObjectURL(json_blob);\r\n        const json_a = document.createElement('a');\r\n        json_a.href = json_url;\r\n        json_a.download = 'mutated_json_output.json';\r\n        document.body.appendChild(json_a);\r\n        json_a.click();\r\n        document.body.removeChild(json_a);\r\n        URL.revokeObjectURL(json_url);\r\n    }\r\n\r\n    //markup Ocr Results for display\r\n    if (displayOcrResults) {\r\n        const markedImages = await markupOcrResults(allImages, currentOcrResults)\r\n        displayImages(markedImages)\r\n    }\r\n\r\n    return {\r\n        'finalOcrResults': currentOcrResults,\r\n        'fuseResults': fuseResults\r\n    }\r\n}\r\n\r\n/**\r\n * Processes an array of image files using Tesseract.js OCR with multiple workers.\r\n * Performs text recognition on each image and extracts word-level data including confidence, choices, bounding boxes, and rotation.\r\n * Returns a flattened array of word objects for all processed images.\r\n *\r\n * @param {File[]} files - Array of image files to be processed.\r\n * @returns {Promise<Object[]>} Resolves to an array of word objects containing OCR results for each image.\r\n * @throws {Error} Throws if no images are provided.\r\n */\r\nasync function ocrProcessing(files) {    \r\n    if (!files || !files.length) {\r\n        throw new Error('No images provided to ocrProcessing.');\r\n    }\r\n\r\n    // Create a scheduler and workers\r\n    const workerN = 7;\r\n    const scheduler = createScheduler();\r\n\r\n    const workerGen = async () => {\r\n        const worker = await createWorker(\"eng\", 1, { \r\n            logger: m => console.log(m), cachePath: \".\",\r\n            workerPath: chrome.runtime.getURL('node_modules/tesseract.js/dist/worker.min.js'),\r\n            corePath: chrome.runtime.getURL('node_modules/tesseract.js-core/tesseract-core-lstm.wasm.js'),\r\n            workerBlobURL: false,\r\n        });\r\n        await worker.setParameters({\r\n            tessedit_pageseg_mode: PSM.SPARSE_TEXT_OSD\r\n        });\r\n        scheduler.addWorker(worker);\r\n    };\r\n\r\n    await Promise.all(Array(workerN).fill(0).map(async () => await workerGen())); \r\n    \r\n\r\n    \r\n    const jobPromises = files.map(async (file) => {\r\n        return scheduler.addJob('recognize', file, {}, {\r\n            text: true,\r\n            blocks: true,\r\n            hocr: false,\r\n            tsv: false,\r\n        })\r\n        .then(out => {\r\n            // console.log(out) //for debugging\r\n            const wordsArray = [];\r\n            const imageName = file.name\r\n            const rotateRadians = out.data.rotateRadians\r\n            if (out.data?.blocks) {\r\n                out.data.blocks.forEach((block, blockIdx) => {\r\n                    block.paragraphs.forEach((para, paraIdx) => {\r\n                        const paragraphKey = `b_${blockIdx};p_${paraIdx}`;\r\n                        para.lines.forEach((line, lineIdx) => {\r\n                            const lineKey = `${paragraphKey};l_${lineIdx}`;\r\n                            line.words.forEach((word, wordIdx) => {\r\n                                var wordChoices = word.choices\r\n                                if (wordChoices.length < 2) {\r\n                                    wordChoices = []\r\n                                }\r\n                                const uniqueKey = `${lineKey};w_${wordIdx};`\r\n                                wordsArray.push({\r\n                                    wordText: word.text,\r\n                                    wordConfidence: word.confidence,\r\n                                    wordChoices: wordChoices,\r\n                                    word_y: word.bbox.y0,\r\n                                    word_x: word.bbox.x0,\r\n                                    height: word.bbox.y1 - word.bbox.y0,\r\n                                    width: word.bbox.x1 - word.bbox.x0,\r\n                                    potentialCsvFields: new Set(),\r\n                                    uniqueKey: uniqueKey,\r\n                                    imageName: imageName,\r\n                                    rotateRadians: rotateRadians,\r\n                                    numberScore: 0,\r\n                                    currentMatch: null,\r\n                                    matchWeights: {}\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            return wordsArray\r\n        })\r\n        .catch(error => ({\r\n            imageName: file.webkitRelativePath || file.name,\r\n            error: error.message,\r\n        }));\r\n    });\r\n\r\n    const results = await Promise.all(jobPromises);\r\n    const flatResults = results.flat()\r\n    // Terminate workers and save results\r\n    await scheduler.terminate();\r\n\r\n    console.log('OCR processing completed. \\n here are results:');\r\n    console.log(flatResults)\r\n    return flatResults;\r\n\r\n}\r\n\r\n/**\r\n * Processes array word objects from ocrProcessing\r\n * Performs cleaning of results (text normalization, noise filtering, word-regrouping)\r\n * Returns a filtered array of word objects with some changed metadata TODO\r\n *\r\n * @param {Object[]} rawOcrResults - Array of word objects produced by OCR.\r\n * @returns {Object[]} Filtered and cleaned array of word objects.\r\n * @throws {Error} If the input array is empty or invalid.\r\n */\r\nfunction ocrCleaning(rawOcrResults) {\r\n    //Removal of low score values\r\n    let workingOcrResults = rawOcrResults.filter(word => word.wordConfidence >= 80);\r\n   \r\n    //Normalize text: convert all wordText to lowercase\r\n    workingOcrResults = workingOcrResults.map(wordObj => ({\r\n        ...wordObj,\r\n        wordText: wordObj.wordText.toLowerCase()\r\n    }));\r\n\r\n    //Token merging and Splitting TODO\r\n    //for now gets rid of words that are single characters that aren't numbers\r\n    workingOcrResults = rawOcrResults.filter(word => {\r\n        return word.wordText.length > 1 || /^\\d$/.test(word.wordText);\r\n    });\r\n\r\n    return workingOcrResults\r\n}\r\n\r\n/**\r\n * Performs fuzzy matching on all words in Ocr word list, finding the best matches per field_name (from ./formatCsvRow)\r\n * Mutates the matched Ocr word objects' potentialCsvFields property by adding potential matches to each word where search threshold is maintained {\r\n *      'matched_word': csv field name\r\n        'word_score': fuse score result\r\n * }\r\n * Returns an object that maps all csv fields to the array of 'matched' ocr objects (fuse output form)\r\n *\r\n * @param {Object[]} currentOcrResults - Array of word objects produced by OCR (to be mutated)\r\n * @param {Object[]} fieldNames - Array of fieldName objects {\r\n *      csvfield: value as found in csv format,\r\n *      replacements: array of potential replacement values (unused),\r\n * }\r\n * @param {float} fuseThreshold - numerical threshold option for fuzzy searching with fuse.js\r\n * @param {float} resultThreshold - score threshold for accepting fuse result score\r\n * @returns {Object} - Map between csv field name and array of 'matched' ocr objects (fuse output form)\r\n */\r\nfunction scoreKeyOcr(currentOcrResults, field_names, fuseThreshold, resultThreshold) {\r\n    let fieldOcrMap = {}\r\n    for (var fieldNameObj of field_names){ \r\n        const csvFieldName = fieldNameObj.csvfield\r\n        const fuseOptions = {\r\n            isCaseSensitive: false,\r\n            includeScore: true,\r\n            ignoreDiacritics: true, \r\n            shouldSort: true,\r\n            includeMatches: false,\r\n            findAllMatches: true,\r\n            minMatchCharLength: 2,\r\n            location: 0,\r\n            threshold: fuseThreshold, //tentative\r\n            distance: 100,\r\n            useExtendedSearch: false,\r\n            ignoreLocation: true,\r\n            ignoreFieldNorm: true,\r\n            // fieldNormWeight: 1,\r\n            keys: [\"wordText\"]\r\n        };\r\n        const fuse = new Fuse(currentOcrResults, fuseOptions);\r\n        const pure_results = fuse\r\n            .search(csvFieldName)\r\n            .filter(result => result.score < resultThreshold);\r\n\r\n        //record of filtered results\r\n        var matchedOcrObjects = []\r\n        for (const pure_result of pure_results) {\r\n            matchedOcrObjects.push(pure_result)\r\n            //mutate ocrObject\r\n            pure_result.item.potentialCsvFields.add({\r\n                'matched_word': csvFieldName,\r\n                'word_score': pure_result.score\r\n            })\r\n        }\r\n\r\n        fieldOcrMap[csvFieldName] = matchedOcrObjects\r\n    }\r\n    return fieldOcrMap\r\n}\r\n        \r\n/**\r\n * Performs a scoring on all words in Ocr word list that evaluates whether or not said word object is a number\r\n * Mutates each entry's numberScore property to reflect that\r\n * @param {Object[]} currentOcrResults - Array of word objects produced by OCR (to be mutated)\r\n * @returns {void} \r\n */\r\nfunction scoreValOcr(currentOcrResults) {\r\n    const replacementWeight = 0.2\r\n    const regexWeight = 0.3\r\n    //replacements are only applicable when wordConfidence is between 80 and 90\r\n    const replacements = {\r\n        'o': '0', 'O': '0',\r\n        'I': '1', 'l': '1', 'L': '1',\r\n        'S': '5', 's': '5',\r\n        'B': '8',\r\n        'q': '9', 'g': '9',\r\n        'Z': '2', 'z': '2',\r\n        'G': '6',\r\n        'A': '4',\r\n        'T': '7'\r\n    };\r\n    for (var ocrObj of currentOcrResults){\r\n        let curWordText = ocrObj.wordText;\r\n        const wordConfidence = ocrObj.wordConfidence\r\n            \r\n        //replacement evaluation\r\n        let charReplaceCount = 0\r\n        if (wordConfidence < 90) {\r\n            let replacedText = ''\r\n            for (let i = 0; i < curWordText.length; i++) {\r\n                const char = curWordText[i];\r\n                if (replacements.hasOwnProperty(char)) {\r\n                    replacedText += replacements[char];\r\n                    charReplaceCount++;\r\n                } else {\r\n                    replacedText += char;\r\n                }\r\n            }\r\n            curWordText = replacedText\r\n        }\r\n\r\n        //regex match evaluation\r\n        const match = curWordText.match(/(?<!\\d)(\\d+(\\.\\d+)?)(?!\\d)/);\r\n        if (!match) {\r\n            //number score stays the same as initial 0\r\n            continue\r\n        }\r\n        const extractedNumber = match[0]\r\n        if (extractedNumber.trim() === '' || isNaN(Number(extractedNumber))) {\r\n            //number score stays the same as initial 0\r\n            continue\r\n        }\r\n        let regexPenalty = 1 - extractedNumber.length / curWordText.length;\r\n        \r\n        //mutation\r\n        ocrObj.numberScore = Math.max(\r\n            0,\r\n            1\r\n            - charReplaceCount * replacementWeight\r\n            - regexPenalty * regexWeight\r\n        )\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Processes OCR results and Fuse matches to generate initial key-value pairings\r\n * using heuristics and a GaleShapley stable matching approach.\r\n * This output can be used as an initial state for UI-based human intervention.\r\n * \r\n * Key things:\r\n * - Only considers high-confidence OCR results (numberScore >= 0.8)\r\n * - Keys and values are assumed to be on the same page\r\n * - Multiple repeats of keys on a page are handled\r\n * - Weights between keys and values are calculated based on positional distance\r\n * - Uses GaleShapley algorithm to determine stable matches between keys and values\r\n * \r\n * @param {Object} extractedResults - {\r\n *      finalOcrResults: Array of OCR word objects with scoring and coordinates,\r\n *      fuseResults: Object mapping CSV fields to arrays of fuseMatch results\r\n * }\r\n * @returns {Object} - {\r\n *      csvFieldAssignments: Array<Object>, // Array of mappings for CSV fields\r\n *          Each object has:\r\n *              csvFieldName: string,  // the CSV field name\r\n *              keyUniqueKey: string | null,  // uniqueKey of the selected key word object (null if no match)\r\n *              valueUniqueKey: string | null // uniqueKey of the selected value word object (null if no match)\r\n *      ocrResultsDebug: Array<Object> // full OCR word objects including internal state like matchWeights and currentMatch\r\n * }\r\n */\r\nexport async function processExtractedResults(extractedResults){\r\n    console.log(\"beginning processing of extracted results\")\r\n    //things to consider keys and values will always be on same page\r\n    //there can be multiple repeats of keys on a page\r\n    //there should be a numerical understanding of implausible matches\r\n    let extractedOcrResults = extractedResults.finalOcrResults\r\n    const fuseResults = extractedResults.fuseResults\r\n\r\n    //organize valueObjects on per page basis\r\n    let imageValueObjMap = {};\r\n    for (const wordObj of extractedOcrResults) {\r\n        if (wordObj.numberScore < 0.8) {\r\n            continue\r\n        }\r\n        const imageName = wordObj.imageName;\r\n        if (imageValueObjMap.hasOwnProperty(imageName)) {\r\n            imageValueObjMap[imageName].push(wordObj);\r\n        } else {\r\n            imageValueObjMap[imageName] = [wordObj];\r\n        }\r\n    }\r\n    \r\n    //Iterate through all found csvField matches to evaluate potential value matches (w/ score)\r\n    //mutates valueWordObjects for Gale Shapely matching\r\n    let csvFieldMap = []\r\n    for (const [csvField, fuseMatches] of Object.entries(fuseResults)) {\r\n        let matchedObjects = []\r\n        for (const fuseMatch of fuseMatches) {\r\n            const keyWordObj = fuseMatch.item\r\n            let valueWordObjPage = imageValueObjMap[keyWordObj.imageName]\r\n            evaluateKeyValMatch(keyWordObj, valueWordObjPage);\r\n            matchedObjects.push(keyWordObj.uniqueKey);\r\n        }\r\n        csvFieldMap.push({\r\n            csvField: csvField, //field in question\r\n            fuseMatchedKeys: matchedObjects, //list of strings of uniquekeys fuse matched w/ csvfield\r\n            nextProposalIndex: 0, //proposal index\r\n            preferenceList: [], //list of preferences (prefObjects)\r\n            currentPair: null //current chosen matching\r\n        })\r\n    }\r\n\r\n    for (const csvFieldInfoObj of csvFieldMap) { \r\n        const wordObjs = extractedOcrResults.filter(wordObj =>\r\n            csvFieldInfoObj.fuseMatchedKeys.includes(wordObj.uniqueKey)\r\n        );\r\n\r\n        let totalPreferenceList = []\r\n        for (const wordObj of wordObjs) {\r\n            for (const [matchUniqueKey, weight] of Object.entries(wordObj.matchWeights)) {\r\n                const prefObj = {\r\n                    'matchKey': matchUniqueKey,\r\n                    'weight': weight,\r\n                    'selfKey': wordObj.uniqueKey\r\n                }\r\n                totalPreferenceList.push(prefObj)\r\n            }\r\n        }\r\n        \r\n        csvFieldInfoObj.preferenceList = totalPreferenceList\r\n            .sort((a, b) => a.weight - b.weight)\r\n        \r\n    }\r\n\r\n\r\n    //Gale Shapely that only rearranges internal metadata\r\n    let unmatchedKeys = csvFieldMap.filter(\r\n        csvFieldInfoObj => csvFieldInfoObj.preferenceList && csvFieldInfoObj.nextProposalIndex < csvFieldInfoObj.preferenceList.length && csvFieldInfoObj.currentPair === null\r\n    )\r\n    while (unmatchedKeys.length > 0) {\r\n        for (const csvFieldInfoObj of unmatchedKeys) {\r\n            if (csvFieldInfoObj.nextProposalIndex >= csvFieldInfoObj.preferenceList.length) continue;\r\n\r\n            const preferenceObj = csvFieldInfoObj.preferenceList[csvFieldInfoObj.nextProposalIndex];\r\n            csvFieldInfoObj.nextProposalIndex += 1;\r\n\r\n            const value = extractedOcrResults.find(v => v.uniqueKey === preferenceObj.matchKey);\r\n            const key = extractedOcrResults.find(v => v.uniqueKey === preferenceObj.selfKey);\r\n\r\n            if (!value.currentMatch) {\r\n                // value has no current match so pairing\r\n                key.currentMatch = value.uniqueKey;\r\n                value.currentMatch = key.uniqueKey;\r\n                csvFieldInfoObj.currentPair = preferenceObj\r\n            } else {\r\n                const newWeight = value.matchWeights[key.uniqueKey];\r\n                const currentWeight = value.matchWeights[value.currentMatch];\r\n\r\n                if (newWeight < currentWeight) {\r\n                    //better pairing found\r\n                    const oldKey = extractedOcrResults.find(k => k.uniqueKey === value.currentMatch);\r\n                    oldKey.currentMatch = null;\r\n\r\n                    key.currentMatch = value.uniqueKey;\r\n                    value.currentMatch = key.uniqueKey;\r\n                    csvFieldInfoObj.currentPair = preferenceObj\r\n                }\r\n            }\r\n        }\r\n        unmatchedKeys = csvFieldMap.filter(\r\n            csvFieldInfoObj => csvFieldInfoObj.preferenceList && csvFieldInfoObj.nextProposalIndex < csvFieldInfoObj.preferenceList.length && csvFieldInfoObj.currentPair === null\r\n        );\r\n    }\r\n    console.log(\"finished processing of extracted results\")\r\n    console.log(csvFieldMap)\r\n    //Process csvFieldMap into output of object w/ params as csv field linked to key wordObj and value wordObj\r\n    return {\r\n        csvFieldAssignments: csvFieldMap.map(csvFieldInfoObj => ({\r\n            csvFieldName: csvFieldInfoObj.csvField,\r\n            keyUniqueKey: csvFieldInfoObj.currentPair?.selfKey || null,\r\n            valueUniqueKey: csvFieldInfoObj.currentPair?.matchKey || null\r\n        })), // the summary of current match state\r\n        ocrResults: extractedOcrResults // full OCR objects\r\n    };\r\n}\r\n\r\n/**\r\n * Given an keyWordObj that we treat as a csv field, use positional heuristics and evaluate weight of a match between said keyWordObj and all valueWordObj's on the same page\r\n * (weight is just distance right now TODO)\r\n * \r\n * @param {Object} keyWordObj - word object that needs value matching\r\n * @param {Object} wordObjList - list of word objects on the same page that you are searching for\r\n * @return {void} - TODO might modify for testing\r\n */\r\nfunction evaluateKeyValMatch(keyWordObj, valueWordObjList) {\r\n    //distance helper\r\n    function distance(a, b) {\r\n        return Math.sqrt(\r\n            Math.pow(a.word_x - b.word_x, 2) +\r\n            Math.pow(a.word_y - b.word_y, 2)\r\n        );\r\n    }\r\n    for (var valueWordObj of valueWordObjList) {\r\n        const weight = distance(keyWordObj, valueWordObj)\r\n        //mutate valueword and keyword objects\r\n        valueWordObj.matchWeights[keyWordObj.uniqueKey] = weight\r\n        keyWordObj.matchWeights[valueWordObj.uniqueKey] = weight\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/**\n * pdfjsVersion = 5.3.31\n * pdfjsBuild = 47ad820d9\n */\n\n;// ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  SIGNATURE: 101\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    const {\n      platform,\n      userAgent\n    } = navigator;\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox: userAgent.includes(\"Firefox\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"\", \"t\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Promise.try !== \"function\") {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\n;// ./src/display/display_utils.js\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(window.screen.availWidth * window.screen.availHeight * this.pixelRatio ** 2 * (1 + capAreaFactor / 100));\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\n\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n  }\n  #addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      _uiManager.delete();\n    }, {\n      signal: _uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n    this.#altText = altText;\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this.#signatureManager = signatureManager;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      const ac = new AbortController();\n      const signal = this.combinedSignal(ac);\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        ac.abort();\n        activeLayer?.toggleDrawing(true);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      this._editorUndoBar?.hide();\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId || editor.id === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  isSelected = false;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      style\n    } = this.div;\n    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    if (this.#altText) {\n      await this._editToolbar.addAltText(this.#altText);\n    }\n    return this._editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10n);\n    this.#altText = new AltText(this);\n    if (this.#accessibilityData) {\n      this.#altText.data = this.#accessibilityData;\n      this.#accessibilityData = null;\n    }\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n    return true;\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n    return true;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  get canChangeContent() {\n    return false;\n  }\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id\n    });\n  }\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n}\n\n;// ./src/display/api_utils.js\n\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\n;// ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n;// ./src/display/filter_factory.js\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\nif (isNodeJS) {\n  warn(\"Please use the `legacy` build in Node.js environments.\");\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const {\n          fillStyle,\n          strokeStyle\n        } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height) {\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](path);\n      return;\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](path);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(path) {\n    this.stroke(path);\n  }\n  fill(path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(path, intersect);\n    }\n  }\n  eoFill(path) {\n    this.pendingEOFill = true;\n    this.fill(path);\n  }\n  fillStroke(path) {\n    this.fill(path, false);\n    this.stroke(path, false);\n    this.consumePath(path);\n  }\n  eoFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  closeFillStroke(path) {\n    this.fillStroke(path);\n  }\n  closeEOFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  endPath(path) {\n    this.consumePath(path);\n  }\n  rawFillPath(path) {\n    this.ctx.fill(path);\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      return;\n    }\n    const newPath = new Path2D();\n    const invTransf = ctx.getTransform().invertSelf();\n    for (const {\n      transform,\n      x,\n      y,\n      fontSize,\n      path\n    } of paths) {\n      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n    }\n    ctx.clip(newPath);\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(matrix) {\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill || patternStroke) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n    this.current.patternStroke = true;\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(color) {\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent() {\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(color) {\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  setFillTransparent() {\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath();\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/pdf_objects.js\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    });\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.3.31\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : isNodeJS ? PDFNodeStream : PDFNetworkStream;\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n  #progressiveDoneListeners = [];\n  #progressiveReadListeners = [];\n  #progressListeners = [];\n  #rangeListeners = [];\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this.#capability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n  #messageHandler = null;\n  #port = null;\n  #webWorker = null;\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts = new WeakMap();\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n    this.fromPort = params => {\n      deprecated(\"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\");\n      if (!params?.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      return this.create(params);\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n  }\n  get promise() {\n    return this.#capability.promise;\n  }\n  #resolve() {\n    this.#capability.resolve();\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this.#port;\n  }\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {});\n    this.#resolve();\n  }\n  #initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this.#setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this.#webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this.#setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this.#setupFakeWorker();\n  }\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this.#capability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this.#port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this.#capability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.create - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.3.31\";\nconst build = \"47ad820d9\";\n\n;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      data\n    } = this;\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id);\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n    return true;\n  }\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n    return true;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  get canChangeContent() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n        Util.rectBoundingBox(...bbox, minMax);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\nclass HighlightOutliner {\n  #box;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  #type;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa\n        }\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.#opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const A = buf[(i << 2) + 3];\n      if (A === 0) {\n        max = out[i] = 0xff;\n        continue;\n      }\n      const pix = out[i] = buf[i << 2];\n      if (pix > max) {\n        max = pix;\n      }\n      if (pix < min) {\n        min = pix;\n      }\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0; i < N; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.signatureManager && this.#description !== null) {\n      await toolbar.addEditSignatureButton(this._uiManager.signatureManager, this.#signatureUUID, this.#description);\n      toolbar.show();\n    }\n    return toolbar;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.#description = description;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.#description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor({\n      mode: AnnotationEditorType.STAMP\n    }, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._editToolbar.hide();\n      this._uiManager.editAltText(this, true);\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    editor.annotationElementId = data.id || null;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, build, createValidAbsoluteUrl, fetchData, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map","import * as pdfjsLib from 'pdfjs-dist/build/pdf.mjs';\r\npdfjsLib.GlobalWorkerOptions.workerSrc = './node_modules/pdfjs-dist/build/pdf.worker.mjs';\r\n\r\n\r\nexport async function cleanImage(file) {\r\n    // Placeholder for image cleaning logic\r\n    // This function should handle the image processing and return a cleaned image\r\n    return file; // For now, just return the original file\r\n}\r\n/**\r\n * Filters and processes uploaded files to return only valid image files\r\n * Converts PDF pages to images and optionally cleans each image\r\n *\r\n * @param {File[]} files - Array of uploaded File objects (images and/or PDFs)\r\n * @returns {Promise<File[]>} - Promise resolving to an array of processed image File objects\r\n * @throws {Error} - Throws if no valid images remain after filtering and processing\r\n */\r\nexport async function filterImageFiles(files) {\r\n    \r\n    // Separate image and PDF files\r\n    const imageFiles = Array.from(files)\r\n        .filter(file => file.type.startsWith('image/'));\r\n    const pdfFiles = Array.from(files).filter(file => file.type === 'application/pdf');\r\n\r\n    // Convert PDF files to File objects\r\n    function canvasToFile(canvas, name) {\r\n        return new Promise(resolve => {\r\n            canvas.toBlob(blob => {\r\n                resolve(new File([blob], name, { type: 'image/png' }));\r\n            }, 'image/png');\r\n        });\r\n    }\r\n\r\n    const convertedPdfFiles = [];\r\n    for (const pdffile of pdfFiles) {\r\n        try {\r\n            const arrayBuffer = await pdffile.arrayBuffer();\r\n            const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });\r\n            const pdf = await loadingTask.promise;\r\n            console.log(`PDF loaded: ${pdffile.name}`);\r\n            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\r\n                const page = await pdf.getPage(pageNum);\r\n                const viewport = page.getViewport({ scale: 2 });\r\n                const canvas = document.createElement('canvas');\r\n                const context = canvas.getContext('2d');\r\n                canvas.width = viewport.width;\r\n                canvas.height = viewport.height;\r\n                await page.render({ canvasContext: context, viewport }).promise;\r\n                const uniqueName = `${pdffile.name}_page${pageNum}.png`;\r\n                const file = await canvasToFile(canvas, uniqueName);\r\n                convertedPdfFiles.push(file);\r\n            }\r\n        } catch (err) {\r\n            console.error(`Error loading ${pdffile.name}:`, err);\r\n        }\r\n    }\r\n\r\n    // Combine all image sources as File objects\r\n    const allImages = [...imageFiles, ...convertedPdfFiles];\r\n    if (!Array.isArray(allImages) || allImages.length === 0) {\r\n        throw new Error('No valid images found after filtering.');\r\n    }\r\n\r\n    // Clean all images and filter out failures\r\n    const processedImages = await Promise.all(\r\n        allImages.map(async image => {\r\n            // Clean image (async)\r\n            return await cleanImage(image);\r\n        })\r\n    );\r\n\r\n    // Remove any undefined images\r\n    return processedImages.filter(img => img !== undefined);\r\n}","import {processDocumentCollection, processExtractedResults} from './ocrEngineFiles/imageProcessor.js'\r\nimport {filterImageFiles} from './ocrEngineFiles/imageCleaner.js'\r\nimport {markupProcessedOcrResults, displayImages} from './ocrEngineFiles/imageMarkup.js'\r\n\r\nexport async function startEngine() {\r\n    //fuse parameters\r\n    const fuseSearchThreshold = parseFloat(document.getElementById('slider-fuse-search-threshold').value);\r\n    const fuseMatchThreshold = parseFloat(document.getElementById('slider-fuse-match-threshold').value);\r\n    const downloadOcrResults = document.getElementById('downloadOCRJson').checked\r\n    const displayOcrResults = document.getElementById('displayOCRJson').checked\r\n    const displayProcessedResults = document.getElementById('displayProcessedOCR').checked\r\n    const downloadCsv = document.getElementById('downloadCsv').checked\r\n    try {\r\n        //filtering image files\r\n        const files = document.getElementById('bloodwork-files').files;\r\n        const allImages = await filterImageFiles(files);\r\n        \r\n        //perform Ocr and document info extraction\r\n        const extractedResults = await processDocumentCollection(\r\n            allImages,\r\n            fuseSearchThreshold,\r\n            fuseMatchThreshold,\r\n            downloadOcrResults,\r\n            displayOcrResults\r\n        );\r\n\r\n        //process extracted results\r\n        const processedResults = await processExtractedResults(extractedResults, displayProcessedResults)\r\n        if (displayProcessedResults) {\r\n            const markedImages = await markupProcessedOcrResults(allImages, processedResults.csvFieldAssignments, extractedResults.finalOcrResults)\r\n            displayImages(markedImages)\r\n        }\r\n        //move to ui\r\n        chrome.tabs.create({ url: chrome.runtime.getURL(\"./ocrUiFiles/ui.html\") });\r\n                    \r\n    } catch (err) {\r\n        console.error('Error during processing:', err);\r\n    }\r\n\r\n}","import { startEngine } from './ocrEngineWrapper.js';\r\n\r\ndocument.querySelectorAll('input[type=\"range\"]').forEach(slider => {\r\n    const spanId = slider.id + '-value';\r\n    const display = document.getElementById(spanId);\r\n    if (display) {\r\n    display.textContent = slider.value;\r\n    slider.addEventListener('input', () => {\r\n        display.textContent = slider.value;\r\n    });\r\n    }\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    document.getElementById('process-btn-test').addEventListener('click', async () => {\r\n        await startEngine()\r\n    });\r\n});\r\n\r\n\r\n"],"names":["readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","target","error","code","Error","readAsArrayBuffer","loadImage","async","image","data","test","atob","split","map","c","charCodeAt","resp","fetch","arrayBuffer","HTMLElement","tagName","src","poster","toBlob","OffscreenCanvas","convertToBlob","File","Blob","Uint8Array","module","exports","workerPath","workerBlobURL","worker","URL","type","Worker","createObjectURL","defaultOptions","spawnWorker","terminateWorker","onMessage","send","getId","jobCounter","id","_id","action","payload","resolveURL","s","window","location","href","options","opts","forEach","key","resolvePaths","createJob","log","OEM","workerCounter","langs","oem","LSTM_ONLY","_options","config","logger","errorHandler","promises","currentLangs","currentOem","currentConfig","lstmOnlyCore","DEFAULT","includes","legacyCore","workerResReject","workerResResolve","workerRes","event","message","startJob","jobId","workerId","loadLanguageInternal","_langs","langPath","dataPath","cachePath","cacheMethod","gzip","lstmOnly","legacyLang","initializeInternal","_oem","_config","status","promiseId","userJobId","resolveObj","load","console","warn","writeText","path","text","method","args","readText","encoding","removeFile","FS","reinitialize","TESSERACT_ONLY","TESSERACT_LSTM_COMBINED","filter","x","push","length","then","setParameters","params","recognize","output","detect","terminate","corePath","logging","catch","AFR","AMH","ARA","ASM","AZE","AZE_CYRL","BEL","BEN","BOD","BOS","BUL","CAT","CEB","CES","CHI_SIM","CHI_TRA","CHR","CYM","DAN","DEU","DZO","ELL","ENG","ENM","EPO","EST","EUS","FAS","FIN","FRA","FRK","FRM","GLE","GLG","GRC","GUJ","HAT","HEB","HIN","HRV","HUN","IKU","IND","ISL","ITA","ITA_OLD","JAV","JPN","KAN","KAT","KAT_OLD","KAZ","KHM","KIR","KOR","KUR","LAO","LAT","LAV","LIT","MAL","MAR","MKD","MLT","MSA","MYA","NEP","NLD","NOR","ORI","PAN","POL","POR","PUS","RON","RUS","SAN","SIN","SLK","SLV","SPA","SPA_OLD","SQI","SRP","SRP_LATN","SWA","SWE","SYR","TAM","TEL","TGK","TGL","THA","TIR","TUR","UIG","UKR","URD","UZB","UZB_CYRL","VIE","YID","prefix","cnt","Math","random","toString","slice","createWorker","finally","OSD_ONLY","AUTO_OSD","AUTO_ONLY","AUTO","SINGLE_COLUMN","SINGLE_BLOCK_VERT_TEXT","SINGLE_BLOCK","SINGLE_LINE","SINGLE_WORD","CIRCLE_WORD","SINGLE_CHAR","SPARSE_TEXT","SPARSE_TEXT_OSD","RAW_LINE","handler","onmessage","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","schedulerCounter","workers","runningWorkers","jobQueue","getNumWorkers","dequeue","wIds","queue","job","w","shift","apply","addWorker","addJob","wid","getQueueLen","version","createScheduler","Tesseract","languages","PSM","setLogging","env","WorkerGlobalScope","document","process","packet","postMessage","_logging","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","isArray","Array","getTag","isString","isNumber","isObject","isDefined","isBlank","trim","KeyStore","_keys","_keyMap","totalWeight","createKey","weight","get","keyId","toJSON","JSON","stringify","getFn","createKeyPath","createKeyId","INVALID_KEY_WEIGHT_VALUE","join","Config","isCaseSensitive","ignoreDiacritics","includeScore","shouldSort","sortFn","a","b","score","idx","includeMatches","findAllMatches","minMatchCharLength","threshold","distance","useExtendedSearch","list","arr","deepGet","index","isObjectLike","isBoolean","baseToString","len","ignoreLocation","ignoreFieldNorm","fieldNormWeight","SPACE","FuseIndex","norm","mantissa","cache","Map","m","pow","numTokens","match","has","n","parseFloat","round","set","clear","isCreated","setIndexRecords","setSources","docs","records","setKeys","_keysMap","doc","docIndex","_addString","_addObject","add","size","removeAt","splice","getValueForItemAtKeyId","item","v","$","keyIndex","subRecords","stack","nestedArrIndex","subRecord","k","createIndex","myIndex","computeScore$1","pattern","errors","currentLocation","expectedLocation","accuracy","proximity","abs","MAX_BITS","createPatternAlphabet","mask","char","stripDiacritics","String","normalize","str","replace","BitapSearch","toLowerCase","chunks","addChunk","startIndex","alphabet","remainder","end","substr","searchIn","isMatch","indices","allIndices","totalScore","hasMatches","patternAlphabet","patternLen","textLen","max","min","currentThreshold","bestLocation","computeMatches","matchMask","indexOf","lastBitArr","finalScore","binMax","binMin","binMid","floor","start","bitArr","j","charMatch","matchmask","convertMaskToIndices","search","BaseMatch","isMultiMatch","getMatch","multiRegex","isSingleMatch","singleRegex","exp","matches","FuzzyMatch","super","_bitapSearch","IncludeMatch","searchers","startsWith","endsWith","searchersLen","SPACE_RE","MultiMatchSet","Set","registeredSearchers","createSearcher","searcherClass","condition","LogicalOperator","KeyType","isExpression","query","convertToExplicit","parse","auto","isQueryPath","isPath","isLeaf","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","searcher","node","children","operator","transformMatches","refIndex","transformScore","Fuse","_keyStore","setCollection","_docs","_myIndex","remove","predicate","results","getIndex","limit","_searchStringList","_searchObjectList","_searchLogical","Number","EPSILON","computeScore","sort","transformers","transformer","format","expression","evaluate","_findMatches","res","child","resultMap","expResults","_typeof","o","ownKeys","e","r","t","getOwnPropertySymbols","getOwnPropertyDescriptor","_defineProperty","toPrimitive","_toPrimitive","_toPropertyKey","parseIndex","parseQuery","register","queryItem","found","token","_","numMatches","qLen","pLen","field_names","csvfield","replacements","u","_regeneratorDefine2","f","p","y","G","d","bind","l","_regenerator","_createForOfIteratorHelper","_arrayLikeToArray","from","_unsupportedIterableToArray","_n","F","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","markupOcrResults","_x","_x2","_markupOcrResults","_callee","originalImages","ocrResults","markedImages","_iterator","_step","_loop","_t","_context2","file","img","Image","original_file","image_name","canvas","ctx","cur_page_words","_iterator2","_step2","cur_page_word","markedBlob","markedFile","_context","createElement","width","height","getContext","drawImage","word_object","imageName","beginPath","rect","word_x","word_y","potentialCsvFields","strokeStyle","numberScore","lineWidth","stroke","save","font","fillStyle","textAlign","textBaseline","fillText","wordText","restore","revokeObjectURL","_regeneratorValues","displayImages","_x3","_displayImages","_callee2","image_list","imageWindow","_iterator3","_step3","url","_context3","open","write","close","alert","markupProcessedOcrResults","_x4","_x5","_x6","_markupProcessedOcrResults","_callee3","csvFieldAssignments","_iterator4","_step4","_loop2","_t3","_context6","_iterator5","_step5","csvFieldAssignmentsOnPage","_iterator6","_step6","_loop3","_t2","_context5","csvFieldAssignmentInfo","keyWordObj","find","uniqueKey","keyUniqueKey","csvFieldAssignment","valueWordObj","_context4","valueUniqueKey","moveTo","lineTo","_objectSpread","getOwnPropertyDescriptors","defineProperties","processDocumentCollection","_processDocumentCollection","allImages","fuseThreshold","resultThreshold","downloadOcrResults","displayOcrResults","currentOcrResults","fuseResults","json","json_blob","json_url","json_a","ocrProcessing","rawOcrResults","word","wordConfidence","wordObj","scoreKeyOcr","scoreValOcr","download","body","appendChild","click","removeChild","_ocrProcessing","_callee5","files","scheduler","workerGen","jobPromises","flatResults","_ref","chrome","getURL","tessedit_pageseg_mode","all","fill","_ref3","_callee4","blocks","hocr","tsv","out","_out$data","wordsArray","rotateRadians","block","blockIdx","paragraphs","para","paraIdx","paragraphKey","concat","lines","line","lineIdx","lineKey","words","wordIdx","wordChoices","choices","confidence","bbox","y0","x0","y1","x1","currentMatch","matchWeights","webkitRelativePath","_x8","flat","fieldOcrMap","csvFieldName","pure_results","matchedOcrObjects","pure_result","ocrObj","curWordText","charReplaceCount","replacedText","extractedNumber","regexPenalty","processExtractedResults","_x7","_processExtractedResults","_callee6","extractedResults","extractedOcrResults","imageValueObjMap","csvFieldMap","_i","_Object$entries","_Object$entries$_i","csvField","fuseMatches","matchedObjects","fuseMatch","valueWordObjPage","_i2","_csvFieldMap","unmatchedKeys","_iterator8","_step8","_context8","finalOcrResults","entries","_slicedToArray","evaluateKeyValMatch","fuseMatchedKeys","nextProposalIndex","preferenceList","currentPair","csvFieldInfoObj","wordObjs","totalPreferenceList","_iterator7","_step7","_i3","_Object$entries2","_Object$entries2$_i","matchUniqueKey","prefObj","preferenceObj","newWeight","currentWeight","_context7","matchKey","selfKey","_csvFieldInfoObj$curr","_csvFieldInfoObj$curr2","valueWordObjList","sqrt","Date","Intervention","AST","AST_RangeLow","AST_RangeHigh","ALT","ALT_RangeLow","ALT_RangeHigh","GLOBULIN","GLOBULIN_RangeLow","GLOBULIN_RangeHigh","BUN","BUN_RangeLow","BUN_RangeHigh","FASTING_GLUCOSE","FASTING_GLUCOSE_RangeLow","FASTING_GLUCOSE_RangeHigh","A1C","A1C_RangeLow","A1C_RangeHigh","RBC","RBC_RangeLow","RBC_RangeHigh","HGB","HGB_RangeLow","HGB_RangeHigh","HCT","HCT_RangeLow","HCT_RangeHigh","WBC","WBC_RangeLow","WBC_RangeHigh","PLATELETS","PLATELETS_RangeLow","PLATELETS_RangeHigh","SODIUM","SODIUM_RangeLow","SODIUM_RangeHigh","POTASSIUM","POTASSIUM_RangeLow","POTASSIUM_RangeHigh","CHLORIDE","CHLORIDE_RangeLow","CHLORIDE_RangeHigh","CALCIUM","CALCIUM_RangeLow","CALCIUM_RangeHigh","CO2","CO2_RangeLow","CO2_RangeHigh","IGF1","IGF1_RangeLow","IGF1_RangeHigh","FASTING_INSULIN","FASTING_INSULIN_RangeLow","FASTING_INSULIN_RangeHigh","BETA_HYDROXYBUTYRATE","BETA_HYDROXYBUTYRATE_RangeLow","BETA_HYDROXYBUTYRATE_RangeHigh","B12","B12_RangeLow","B12_RangeHigh","MAGNESIUM","MAGNESIUM_RangeLow","MAGNESIUM_RangeHigh","CRP","CRP_RangeLow","CRP_RangeHigh","IRON","IRON_MaleRangeLow","IRON_MaleRangeHigh","IRON_FemaleRangeLow","IRON_FemaleRangeHigh","CHOLESTEROL","CHOLESTEROL_RangeLow","CHOLESTEROL_RangeHigh","HOMOCYSTEINE","HOMOCYSTEINE_RangeLow","HOMOCYSTEINE_RangeHigh","Vitamin_D","Vitamin_D_RangeLow","Vitamin_D_RangeHigh","isNodeJS","versions","nw","electron","FONT_IDENTITY_MATRIX","LINE_FACTOR","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","SIGNATURE","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","transform","curveTo","curveTo2","curveTo3","closePath","rectangle","closeStroke","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","verbosity","setVerbosityLevel","level","isInteger","getVerbosityLevel","msg","unreachable","assert","cond","createValidAbsoluteUrl","baseUrl","addDefaultProtocol","dots","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","protocol","_isValidProtocol","updateUrlHash","hash","allowRel","shadow","prop","nonSerializable","BaseException","PasswordException","UnknownErrorException","details","InvalidPDFException","ResponseException","missing","FormatError","AbortException","bytesToString","bytes","MAX_ARGUMENT_COUNT","fromCharCode","strBuf","chunkEnd","chunk","subarray","stringToBytes","util_FeatureTest","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","isOffscreenCanvasSupported","isImageDecoderSupported","ImageDecoder","platform","userAgent","navigator","isAndroid","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","CSS","supports","hexNumbers","padStart","Util","makeHexColor","g","scaleMinMax","minMax","temp","m1","m2","applyTransform","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","axialAlignedBoundingBox","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","inverseTransform","singularValueDecompose2dScale","matrix","first","second","normalizeRect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","rectBoundingBox","x2","x3","y2","y3","mt","tt","ttt","delta","sqrtDelta","bezierBoundingBox","NormalizeRegex","NormalizationMap","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","MathClamp","toBase64Util","toBase64","btoa","try","sumPrecise","numbers","reduce","SVG_NS","PixelsPerInch","static","PDF","fetchData","isValidFetchUrl","baseURI","response","ok","statusText","request","XMLHttpRequest","responseType","onreadystatechange","readyState","DONE","responseText","PageViewport","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","rawDims","dims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","substring","isPdfFile","filename","StatTimer","started","times","time","now","timeEnd","outBuf","longest","padEnd","noContextMenu","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","input","RegExp","exec","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getRGB","color","colorRGB","getCurrentTransform","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","style","useRound","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","capAreaFactor","maxAreaScale","Infinity","maxWidthScale","maxHeightScale","capPixels","maxScale","devicePixelRatio","winPixels","ceil","screen","availWidth","availHeight","SupportedImageMimeTypes","EditorToolbar","editor","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","classList","signal","_uiManager","_signal","addEventListener","buttons","className","append","position","toolbarPosition","direction","insetInlineEnd","top","_focusEventsAllowed","element","capture","hide","hideDropdown","show","shown","editorType","button","tabIndex","delete","divider","addAltText","altText","prepend","addColorPicker","colorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","updateEditSignatureButton","description","title","destroy","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","ImageManager","_isSVGFittingCanvas","willReadFrequently","decode","getImageData","rawData","bitmap","refCounter","isSvg","mustRemoveAspectRatioPromise","imageElement","imagePromise","svgUrl","readAsDataURL","createImageBitmap","getFromFile","lastModified","getFromUrl","getFromBlob","blobPromise","getFromId","getFromCanvas","offscreen","transferToImageBitmap","getSvgUrl","deleteId","transferFromImageBitmap","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","KeyboardManager","callbacks","allKeys","callback","isMacKey","at","altKey","ctrlKey","metaKey","shiftKey","bubbles","checker","ColorManager","_colors","colors","visibility","colorScheme","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","AnnotationEditorUIManager","AbortController","_editorUndoBar","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","hasSomethingToControl","textInputChecker","_self","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","mlManager","editorUndoBar","supportsPinchToZoom","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_supportsPinchToZoom","abort","layer","clearTimeout","combinedSignal","ac","AbortSignal","any","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","pair","highlightColorNames","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","firstTime","getSignature","switchToMode","mode","on","once","dispatch","source","setPreference","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","textLayer","currentLayer","hasTextLayer","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","closest","getSelectionBoxes","empty","isNoneMode","createAndAddNewEditor","showAllEditors","addToAnnotationStorage","setValue","activeLayer","toggleDrawing","pointerup","blur","hasSelection","lastEditor","lastActiveElement","keydown","keyup","copy","cut","paste","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","editors","serialized","serialize","clipboardData","setData","getData","ex","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","some","assign","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","promise","withResolvers","loadSignatures","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateColor","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","updateUIForDefaultProperties","toggleSelected","select","isSelected","firstSelectedEditor","cleanUndoStack","drawingEditor","endDrawingSession","commit","noCommit","totalX","totalY","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","setCanvas","addMissingCanvas","AltText","added","review","initialize","l10n","_l10n","label","onClick","_reportTelemetry","guessedText","focusVisible","hasData","setGuessedText","generatedAltText","toggleAltTextBadge","badge","isForCopying","decorative","textWithDisclaimer","cancel","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","removeAttribute","textContent","parentNode","getElementForAltText","TouchManager","isPinchingDisabled","isPinchingStopped","onPinchStart","onPinching","onPinchEnd","passive","MIN_TOUCH_DISTANCE_TO_PINCH","touches","pointerDownAC","cancelPointerDown","pointerType","opt","onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","screen0X","screen0Y","screen1X","screen1Y","touchInfo","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","hypot","pDistance","origin","AnnotationEditor","_isCopy","_editToolbar","_initialOptions","_initialData","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","_type","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","focusin","focusout","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","_onTranslating","translate","scrollIntoView","findNewParent","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","angle","pageTranslationToScreen","parentScale","setDims","fixDims","widthPercent","heightPercent","getInitialTranslation","classes","savedDraggable","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","_onResized","newWidth","newHeight","_round","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","deltaX","deltaY","ratioX","ratioY","fromKeyboard","lastScreenX","lastScreenY","oldDiag","_onResizing","altTextFinish","addEditToolbar","removeEditToolbar","addContainer","editToolbarDiv","before","getClientDimensions","addAltTextButton","altTextData","guessedAltText","setGuessedAltText","serializeAltText","hasAltText","hasAltTextData","defaultL10nId","maxWidth","maxHeight","isResizable","_origin","prevDistance","factor","transfCenterPoint","newTransfCenterPoint","pointerdown","hasDraggingStarted","cancelDrag","_onStopDragging","clientX","clientY","pointerId","_onStartDragging","isPrimary","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","isInEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","bottom","right","innerHeight","innerWidth","rotate","_angle","serializeDeleted","popupRef","accessibilityData","isCopy","timeout","makeResizable","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","lastChild","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","canChangeContent","dblclick","_editorType","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","ArrayBuffer","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","resetModifiedIds","modifiedIds","ids","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","baseFontName","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","otherRequest","_loadTestFont","int32","offset","spliceString","insert","called","XXXX_VALUE","checksum","fontFamily","isFontReady","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","objId","cmds","Path2D","fontExtraProperties","getFactoryUrlProp","isRefProxy","num","gen","isValidExplicitDest","validRef","validName","dest","page","zoom","argsLen","allowNull","LoopbackPort","listener","rmAbort","aborted","onAbort","removeEventListener","onFn","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","stream","capability","reason","actionName","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","onPull","onCancel","success","streamController","dataReason","allSettled","BaseCanvasFactory","enableHWA","_createCanvas","canvasAndContext","DOMCanvasFactory","BaseCMapReaderFactory","isCompressed","_fetch","cMapData","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","DOMFilterFactory","docId","contain","svg","createElementNS","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","step","newStart","newStep","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","DOMStandardFontDataFactory","BaseWasmFactory","DOMWasmFactory","node_utils_fetchData","fs","getBuiltinModule","readFile","NodeFilterFactory","NodeCanvasFactory","createRequire","require","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","PathType","applyBoundingBox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","ownerBBox","current","getClippedPathBoundingBox","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","baseTransform","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p2","p3","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","Float32Array","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","fillColor","strokeColor","convertBlackAndWhiteToRGBA","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","CachedCanvases","canvasFactory","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","patternStroke","fillAlpha","strokeAlpha","activeSMask","transferMaps","clipBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","op","path2d","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","needRestore","paths","pendingTextPaths","invTransf","preMultiplySelf","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","invPatternTransform","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","GlobalWorkerOptions","workerPort","workerSrc","Metadata","parsedData","getRaw","INTERNAL","OptionalContentGroup","renderingIntent","usage","rbGroups","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","policy","setVisibility","preserveRB","rbGroup","otherId","setOCGState","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","onProgress","_removeRangeReader","reader","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","read","requestCapability","_end","_queuedChunk","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","validateRangeRequestCapabilities","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","decoder","TextDecoder","fatal","quotindex","replaceAll","extvalue","encodingend","charset","hex","getFilenameFromContentDispositionHeader","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","abortController","credentials","redirect","getArrayBuffer","PDFFetchStream","_responseOrigin","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","getReader","_readCapability","responseOrigin","NetworkManager","currXhrId","pendingRequests","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","lengthComputable","_requestId","_close","urlRegex","PDFNodeStream","sourceUrl","pathToFileURL","parseUrlOrPath","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_readableStream","lstat","stat","_setReadableStream","createReadStream","_error","readableStream","INITIAL_DATA","PDFObjects","TextLayer","FontInspector","WeakMap","textContentSource","fontFamilyMap","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","cleanup","alpha","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","XfaText","xfa","walk","shouldBuildText","attributes","getDocument","task","PDFDocumentLoadingTask","getUrlProp","Buffer","getDataProp","password","rangeTransport","PDFDataRangeTransport","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","port","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","transport","WorkerTransport","_transport","_capability","onPassword","_pendingDestroy","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","_intentStates","getViewport","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","_isSameOrigin","otherUrl","base","other","_createCDNWrapper","wrapper","fromPort","terminateEarly","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","import","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","modifiedIdsHash","terminated","sink","readyReason","_numPages","htmlForXfa","updatePassword","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","imageData","refStr","metadata","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_canvas","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","G_CMYK","G_RGB","G_rgb","G_HTML","RGB_G","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","RGB_CMYK","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","html","storage","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","root","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","titleObj","contentsObj","richText","_isEditable","isEditable","hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","findIndex","selectChild","editable","changeEx","keyDown","PopupElement","elementIds","ariaHasPopup","trigger","flatMap","baseColor","outlineColor","header","dateObj","valueOf","contents","_formatContents","popupLines","popupContent","lineAttributes","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","vertices","points","polyline","it","inkLists","thickness","AnnotationLayer","accessibilityManager","annotationEditorUIManager","structTreeLayer","_annotationEditorUIManager","hasEditableAnnotations","contentElement","ariaAttributes","getAriaAttributes","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","addLinkAnnotations","_defaultBorderStyle","replaceWith","after","editableAnnotation","_hasNoCanvas","getEditableAnnotations","getEditableAnnotation","rawWidth","EOL_PATTERN","FreeTextEditor","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","innerText","prevChild","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","_translate","svgRound","_normalizePoint","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","scaleFactor","innerMargin","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","lastTopX","lastTopY","lastBottomX","lastBottomY","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","last","N","lastPoint","lastPointX","lastPointY","ltrCallback","newOutliner","getNewOutline","outliner","HighlightOutliner","shiftedMinX","shiftedMinY","lastEdge","edge","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","HighlightOutline","middle","y4","polygon","prevX","prevY","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","ColorPicker","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","blue","green","pink","red","yellow","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeDraw","drawOutline","rootClass","highlightOutline","free","updateProperties","setColorAndOpacity","opa","savedOpacity","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","draw","highlightDiv","pointerover","hovered","pointerleave","setPosition","startHighlighting","_freeHighlight","_freeHighlightId","_freeHighlightClipId","DrawingOptions","updateProperty","updateSVGProperty","toSVGProperties","updateAll","DrawingEditor","_drawId","mustBeCommitted","_addOutlines","drawOutlines","drawId","drawingOptions","_drawingOptions","defaultProperties","_mergeSVGProperties","defaultSVGProperties","p1Keys","getDefaultDrawingOptions","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","_currentDrawId","_updateProperty","savedValue","setter","getPathResizingSVGProperties","getPathResizedSVGProperties","_y","getPathTranslatedSVGProperties","moving","updateParent","pW","pH","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","_endDraw","isCancellable","removeLastElement","_drawMove","timeStamp","startNew","_cleanup","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","InkDrawOutliner","Float64Array","InkDrawOutline","firstX","firstY","lastIndexOf","secondX","secondY","c1x","c1y","c2x","c2y","build","serializedLines","serializedPoints","rescaleFn","newLines","margin","marginX","marginY","oldMarginX","oldMarginY","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","PRECISION","s1x","s1y","s2x","s2y","newParentWidth","newParentHeight","InkDrawingOptions","viewerParameters","_viewParameters","InkEditor","ContourDrawOutline","SignatureExtractor","sigmaSFactor","sigmaR","kernelSize","i0","j0","Int32Array","kk","lnbd","nbd","contours","ij","pix","i2","j2","isHole","contour","contour0","shiftI","shiftJ","i1","j1","i3","j3","i4","j4","ij3","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","sigmaS","kernel","sigmaS2","halfSize","rangeValues","sigmaR2","histogram","sum","neighbour","Uint8ClampedArray","M","L","spos","originalBitmap","prevWidth","prevHeight","log2","isteps","grayImage","extractContoursFromText","fontStyle","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","uint8Buf","contourList","processDrawnLines","curves","mustSmooth","areContours","linesAndPoints","xScale","yScale","newCurves","reducedPoints","newPoints","compressSignature","bufferType","minDiff","maxDiff","outlinesLength","dx","Int8Array","Int16Array","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","BufferCtor","diffs","Response","readable","decompressSignature","signatureData","fromBase64","DecompressionStream","numberOfDrawings","diffsOffset","POINTS_PROPERTIES_NUMBER","SignatureOptions","DrawnSignatureOptions","SignatureEditor","_defaultDrawnSignatureOptions","hasDescription","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","isSignature","alt","StampEditor","bitmapUrl","bitmapFile","pasteEditor","getAsFile","hasAltTextStats","fromId","alt_text_modal","alt_text_type","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","accept","bitmapId","MAX_RATIO","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","scaledWidth","scaledHeight","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","toUrl","toDataURL","missingCanvas","structParent","_structTree","changes","isSame","isSameAltText","stamps","area","prevData","isSamePageIndex","AnnotationEditorLayer","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","annotationElementIds","editables","changedAnnotations","resetAnnotations","attach","detach","removePointerInTextLayer","currentMode","startDrawingSession","pause","oldRotation","DrawLayer","_svgFactory","pathId","clipPathUse","isPathUpdatable","hasClip","use","mustRemoveSelfIntersections","maskId","use1","use2","cloneNode","elementOrId","pathElement","cleanImage","_cleanImage","filterImageFiles","_filterImageFiles","imageFiles","pdfFiles","canvasToFile","convertedPdfFiles","pdffile","pdf","pageNum","uniqueName","processedImages","pdfjsLib","startEngine","_startEngine","fuseSearchThreshold","fuseMatchThreshold","displayProcessedResults","processedResults","getElementById","tabs","_pdfjsTestingUtils","FeatureTest","getFilenameFromUrl","getPdfFilenameFromUrl","defaultFilename","reFilename","splitURI","suggestedFilename","getXfaPageViewport","xfaPage","ImageKind","normalizeUnicode","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","slider","spanId"],"sourceRoot":""}