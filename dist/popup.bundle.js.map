{"version":3,"file":"popup.bundle.js","mappings":"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","sources":["webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/loadImage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/spawnWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createJob.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/resolvePaths.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/languages.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getId.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/Tesseract.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/PSM.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/onMessage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/OEM.js","webpack://createcures-bloodwork-utility/./node_modules/regenerator-runtime/runtime.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createScheduler.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getEnvironment.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/send.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/log.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/terminateWorker.js","webpack://createcures-bloodwork-utility/webpack/bootstrap","webpack://createcures-bloodwork-utility/./node_modules/fuse.js/dist/fuse.mjs","webpack://createcures-bloodwork-utility/./formatCsvRow.js","webpack://createcures-bloodwork-utility/./imageMarkup.js","webpack://createcures-bloodwork-utility/./imageProcessor.js","webpack://createcures-bloodwork-utility/./node_modules/pdfjs-dist/build/pdf.mjs","webpack://createcures-bloodwork-utility/./imageCleaner.js","webpack://createcures-bloodwork-utility/./popup.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n * readFromBlobOrFile\r\n *\r\n * @name readFromBlobOrFile\r\n * @function\r\n * @access private\r\n */\r\nconst readFromBlobOrFile = (blob) => (\r\n  new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      resolve(fileReader.result);\r\n    };\r\n    fileReader.onerror = ({ target: { error: { code } } }) => {\r\n      reject(Error(`File could not be read! Code=${code}`));\r\n    };\r\n    fileReader.readAsArrayBuffer(blob);\r\n  })\r\n);\r\n\r\n/**\r\n * loadImage\r\n *\r\n * @name loadImage\r\n * @function load image from different source\r\n * @access private\r\n */\r\nconst loadImage = async (image) => {\r\n  let data = image;\r\n  if (typeof image === 'undefined') {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof image === 'string') {\r\n    // Base64 Image\r\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\r\n      data = atob(image.split(',')[1])\r\n        .split('')\r\n        .map((c) => c.charCodeAt(0));\r\n    } else {\r\n      const resp = await fetch(image);\r\n      data = await resp.arrayBuffer();\r\n    }\r\n  } else if (typeof HTMLElement !== 'undefined' && image instanceof HTMLElement) {\r\n    if (image.tagName === 'IMG') {\r\n      data = await loadImage(image.src);\r\n    }\r\n    if (image.tagName === 'VIDEO') {\r\n      data = await loadImage(image.poster);\r\n    }\r\n    if (image.tagName === 'CANVAS') {\r\n      await new Promise((resolve) => {\r\n        image.toBlob(async (blob) => {\r\n          data = await readFromBlobOrFile(blob);\r\n          resolve();\r\n        });\r\n      });\r\n    }\r\n  } else if (typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas) {\r\n    const blob = await image.convertToBlob();\r\n    data = await readFromBlobOrFile(blob);\r\n  } else if (image instanceof File || image instanceof Blob) {\r\n    data = await readFromBlobOrFile(image);\r\n  }\r\n\r\n  return new Uint8Array(data);\r\n};\r\n\r\nmodule.exports = loadImage;\r\n","'use strict';\r\n\r\n/**\r\n * spawnWorker\r\n *\r\n * @name spawnWorker\r\n * @function create a new Worker in browser\r\n * @access public\r\n */\r\nmodule.exports = ({ workerPath, workerBlobURL }) => {\r\n  let worker;\r\n  if (Blob && URL && workerBlobURL) {\r\n    const blob = new Blob([`importScripts(\"${workerPath}\");`], {\r\n      type: 'application/javascript',\r\n    });\r\n    worker = new Worker(URL.createObjectURL(blob));\r\n  } else {\r\n    worker = new Worker(workerPath);\r\n  }\r\n\r\n  return worker;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Tesseract Worker adapter for browser\r\n *\r\n * @fileoverview Tesseract Worker adapter for browser\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nconst defaultOptions = require('./defaultOptions');\r\nconst spawnWorker = require('./spawnWorker');\r\nconst terminateWorker = require('./terminateWorker');\r\nconst onMessage = require('./onMessage');\r\nconst send = require('./send');\r\nconst loadImage = require('./loadImage');\r\n\r\nmodule.exports = {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  send,\r\n  loadImage,\r\n};\r\n","'use strict';\r\n\r\nconst getId = require('./utils/getId');\r\n\r\nlet jobCounter = 0;\r\n\r\nmodule.exports = ({\r\n  id: _id,\r\n  action,\r\n  payload = {},\r\n}) => {\r\n  let id = _id;\r\n  if (typeof id === 'undefined') {\r\n    id = getId('Job', jobCounter);\r\n    jobCounter += 1;\r\n  }\r\n\r\n  return {\r\n    id,\r\n    action,\r\n    payload,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst isBrowser = require('./getEnvironment')('type') === 'browser';\r\n\r\nconst resolveURL = isBrowser ? s => (new URL(s, window.location.href)).href : s => s; // eslint-disable-line\r\n\r\nmodule.exports = (options) => {\r\n  const opts = { ...options };\r\n  ['corePath', 'workerPath', 'langPath'].forEach((key) => {\r\n    if (options[key]) {\r\n      opts[key] = resolveURL(opts[key]);\r\n    }\r\n  });\r\n  return opts;\r\n};\r\n","'use strict';\r\n\r\nconst resolvePaths = require('./utils/resolvePaths');\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\nconst OEM = require('./constants/OEM');\r\nconst {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  loadImage,\r\n  send,\r\n} = require('./worker/node');\r\n\r\nlet workerCounter = 0;\r\n\r\nmodule.exports = async (langs = 'eng', oem = OEM.LSTM_ONLY, _options = {}, config = {}) => {\r\n  const id = getId('Worker', workerCounter);\r\n  const {\r\n    logger,\r\n    errorHandler,\r\n    ...options\r\n  } = resolvePaths({\r\n    ...defaultOptions,\r\n    ..._options,\r\n  });\r\n  const promises = {};\r\n\r\n  // Current langs, oem, and config file.\r\n  // Used if the user ever re-initializes the worker using `worker.reinitialize`.\r\n  const currentLangs = typeof langs === 'string' ? langs.split('+') : langs;\r\n  let currentOem = oem;\r\n  let currentConfig = config;\r\n  const lstmOnlyCore = [OEM.DEFAULT, OEM.LSTM_ONLY].includes(oem) && !options.legacyCore;\r\n\r\n  let workerResReject;\r\n  let workerResResolve;\r\n  const workerRes = new Promise((resolve, reject) => {\r\n    workerResResolve = resolve;\r\n    workerResReject = reject;\r\n  });\r\n  const workerError = (event) => { workerResReject(event.message); };\r\n\r\n  let worker = spawnWorker(options);\r\n  worker.onerror = workerError;\r\n\r\n  workerCounter += 1;\r\n\r\n  const startJob = ({ id: jobId, action, payload }) => (\r\n    new Promise((resolve, reject) => {\r\n      log(`[${id}]: Start ${jobId}, action=${action}`);\r\n      // Using both `action` and `jobId` in case user provides non-unique `jobId`.\r\n      const promiseId = `${action}-${jobId}`;\r\n      promises[promiseId] = { resolve, reject };\r\n      send(worker, {\r\n        workerId: id,\r\n        jobId,\r\n        action,\r\n        payload,\r\n      });\r\n    })\r\n  );\r\n\r\n  const load = () => (\r\n    console.warn('`load` is depreciated and should be removed from code (workers now come pre-loaded)')\r\n  );\r\n\r\n  const loadInternal = (jobId) => (\r\n    startJob(createJob({\r\n      id: jobId, action: 'load', payload: { options: { lstmOnly: lstmOnlyCore, corePath: options.corePath, logging: options.logging } },\r\n    }))\r\n  );\r\n\r\n  const writeText = (path, text, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'writeFile', args: [path, text] },\r\n    }))\r\n  );\r\n\r\n  const readText = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'readFile', args: [path, { encoding: 'utf8' }] },\r\n    }))\r\n  );\r\n\r\n  const removeFile = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'unlink', args: [path] },\r\n    }))\r\n  );\r\n\r\n  const FS = (method, args, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method, args },\r\n    }))\r\n  );\r\n\r\n  const loadLanguageInternal = (_langs, jobId) => startJob(createJob({\r\n    id: jobId,\r\n    action: 'loadLanguage',\r\n    payload: {\r\n      langs: _langs,\r\n      options: {\r\n        langPath: options.langPath,\r\n        dataPath: options.dataPath,\r\n        cachePath: options.cachePath,\r\n        cacheMethod: options.cacheMethod,\r\n        gzip: options.gzip,\r\n        lstmOnly: [OEM.DEFAULT, OEM.LSTM_ONLY].includes(currentOem)\r\n          && !options.legacyLang,\r\n      },\r\n    },\r\n  }));\r\n\r\n  const initializeInternal = (_langs, _oem, _config, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'initialize',\r\n      payload: { langs: _langs, oem: _oem, config: _config },\r\n    }))\r\n  );\r\n\r\n  const reinitialize = (langs = 'eng', oem, config, jobId) => { // eslint-disable-line\r\n\r\n    if (lstmOnlyCore && [OEM.TESSERACT_ONLY, OEM.TESSERACT_LSTM_COMBINED].includes(oem)) throw Error('Legacy model requested but code missing.');\r\n\r\n    const _oem = oem || currentOem;\r\n    currentOem = _oem;\r\n\r\n    const _config = config || currentConfig;\r\n    currentConfig = _config;\r\n\r\n    // Only load langs that are not already loaded.\r\n    // This logic fails if the user downloaded the LSTM-only English data for a language\r\n    // and then uses `worker.reinitialize` to switch to the Legacy engine.\r\n    // However, the correct data will still be downloaded after initialization fails\r\n    // and this can be avoided entirely if the user loads the correct data ahead of time.\r\n    const langsArr = typeof langs === 'string' ? langs.split('+') : langs;\r\n    const _langs = langsArr.filter((x) => !currentLangs.includes(x));\r\n    currentLangs.push(..._langs);\r\n\r\n    if (_langs.length > 0) {\r\n      return loadLanguageInternal(_langs, jobId)\r\n        .then(() => initializeInternal(langs, _oem, _config, jobId));\r\n    }\r\n\r\n    return initializeInternal(langs, _oem, _config, jobId);\r\n  };\r\n\r\n  const setParameters = (params = {}, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'setParameters',\r\n      payload: { params },\r\n    }))\r\n  );\r\n\r\n  const recognize = async (image, opts = {}, output = {\r\n    text: true,\r\n  }, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'recognize',\r\n      payload: { image: await loadImage(image), options: opts, output },\r\n    }))\r\n  );\r\n\r\n  const detect = async (image, jobId) => {\r\n    if (lstmOnlyCore) throw Error('`worker.detect` requires Legacy model, which was not loaded.');\r\n\r\n    return startJob(createJob({\r\n      id: jobId,\r\n      action: 'detect',\r\n      payload: { image: await loadImage(image) },\r\n    }));\r\n  };\r\n\r\n  const terminate = async () => {\r\n    if (worker !== null) {\r\n      /*\r\n      await startJob(createJob({\r\n        id: jobId,\r\n        action: 'terminate',\r\n      }));\r\n      */\r\n      terminateWorker(worker);\r\n      worker = null;\r\n    }\r\n    return Promise.resolve();\r\n  };\r\n\r\n  onMessage(worker, ({\r\n    workerId, jobId, status, action, data,\r\n  }) => {\r\n    const promiseId = `${action}-${jobId}`;\r\n    if (status === 'resolve') {\r\n      log(`[${workerId}]: Complete ${jobId}`);\r\n      promises[promiseId].resolve({ jobId, data });\r\n      delete promises[promiseId];\r\n    } else if (status === 'reject') {\r\n      promises[promiseId].reject(data);\r\n      delete promises[promiseId];\r\n      if (action === 'load') workerResReject(data);\r\n      if (errorHandler) {\r\n        errorHandler(data);\r\n      } else {\r\n        throw Error(data);\r\n      }\r\n    } else if (status === 'progress') {\r\n      logger({ ...data, userJobId: jobId });\r\n    }\r\n  });\r\n\r\n  const resolveObj = {\r\n    id,\r\n    worker,\r\n    load,\r\n    writeText,\r\n    readText,\r\n    removeFile,\r\n    FS,\r\n    reinitialize,\r\n    setParameters,\r\n    recognize,\r\n    detect,\r\n    terminate,\r\n  };\r\n\r\n  loadInternal()\r\n    .then(() => loadLanguageInternal(langs))\r\n    .then(() => initializeInternal(langs, oem, config))\r\n    .then(() => workerResResolve(resolveObj))\r\n    .catch(() => {});\r\n\r\n  return workerRes;\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * languages with existing tesseract traineddata\r\n * https://tesseract-ocr.github.io/tessdoc/Data-Files#data-files-for-version-400-november-29-2016\r\n */\r\n\r\n/**\r\n * @typedef {object} Languages\r\n * @property {string} AFR Afrikaans\r\n * @property {string} AMH Amharic\r\n * @property {string} ARA Arabic\r\n * @property {string} ASM Assamese\r\n * @property {string} AZE Azerbaijani\r\n * @property {string} AZE_CYRL Azerbaijani - Cyrillic\r\n * @property {string} BEL Belarusian\r\n * @property {string} BEN Bengali\r\n * @property {string} BOD Tibetan\r\n * @property {string} BOS Bosnian\r\n * @property {string} BUL Bulgarian\r\n * @property {string} CAT Catalan; Valencian\r\n * @property {string} CEB Cebuano\r\n * @property {string} CES Czech\r\n * @property {string} CHI_SIM Chinese - Simplified\r\n * @property {string} CHI_TRA Chinese - Traditional\r\n * @property {string} CHR Cherokee\r\n * @property {string} CYM Welsh\r\n * @property {string} DAN Danish\r\n * @property {string} DEU German\r\n * @property {string} DZO Dzongkha\r\n * @property {string} ELL Greek, Modern (1453-)\r\n * @property {string} ENG English\r\n * @property {string} ENM English, Middle (1100-1500)\r\n * @property {string} EPO Esperanto\r\n * @property {string} EST Estonian\r\n * @property {string} EUS Basque\r\n * @property {string} FAS Persian\r\n * @property {string} FIN Finnish\r\n * @property {string} FRA French\r\n * @property {string} FRK German Fraktur\r\n * @property {string} FRM French, Middle (ca. 1400-1600)\r\n * @property {string} GLE Irish\r\n * @property {string} GLG Galician\r\n * @property {string} GRC Greek, Ancient (-1453)\r\n * @property {string} GUJ Gujarati\r\n * @property {string} HAT Haitian; Haitian Creole\r\n * @property {string} HEB Hebrew\r\n * @property {string} HIN Hindi\r\n * @property {string} HRV Croatian\r\n * @property {string} HUN Hungarian\r\n * @property {string} IKU Inuktitut\r\n * @property {string} IND Indonesian\r\n * @property {string} ISL Icelandic\r\n * @property {string} ITA Italian\r\n * @property {string} ITA_OLD Italian - Old\r\n * @property {string} JAV Javanese\r\n * @property {string} JPN Japanese\r\n * @property {string} KAN Kannada\r\n * @property {string} KAT Georgian\r\n * @property {string} KAT_OLD Georgian - Old\r\n * @property {string} KAZ Kazakh\r\n * @property {string} KHM Central Khmer\r\n * @property {string} KIR Kirghiz; Kyrgyz\r\n * @property {string} KOR Korean\r\n * @property {string} KUR Kurdish\r\n * @property {string} LAO Lao\r\n * @property {string} LAT Latin\r\n * @property {string} LAV Latvian\r\n * @property {string} LIT Lithuanian\r\n * @property {string} MAL Malayalam\r\n * @property {string} MAR Marathi\r\n * @property {string} MKD Macedonian\r\n * @property {string} MLT Maltese\r\n * @property {string} MSA Malay\r\n * @property {string} MYA Burmese\r\n * @property {string} NEP Nepali\r\n * @property {string} NLD Dutch; Flemish\r\n * @property {string} NOR Norwegian\r\n * @property {string} ORI Oriya\r\n * @property {string} PAN Panjabi; Punjabi\r\n * @property {string} POL Polish\r\n * @property {string} POR Portuguese\r\n * @property {string} PUS Pushto; Pashto\r\n * @property {string} RON Romanian; Moldavian; Moldovan\r\n * @property {string} RUS Russian\r\n * @property {string} SAN Sanskrit\r\n * @property {string} SIN Sinhala; Sinhalese\r\n * @property {string} SLK Slovak\r\n * @property {string} SLV Slovenian\r\n * @property {string} SPA Spanish; Castilian\r\n * @property {string} SPA_OLD Spanish; Castilian - Old\r\n * @property {string} SQI Albanian\r\n * @property {string} SRP Serbian\r\n * @property {string} SRP_LATN Serbian - Latin\r\n * @property {string} SWA Swahili\r\n * @property {string} SWE Swedish\r\n * @property {string} SYR Syriac\r\n * @property {string} TAM Tamil\r\n * @property {string} TEL Telugu\r\n * @property {string} TGK Tajik\r\n * @property {string} TGL Tagalog\r\n * @property {string} THA Thai\r\n * @property {string} TIR Tigrinya\r\n * @property {string} TUR Turkish\r\n * @property {string} UIG Uighur; Uyghur\r\n * @property {string} UKR Ukrainian\r\n * @property {string} URD Urdu\r\n * @property {string} UZB Uzbek\r\n * @property {string} UZB_CYRL Uzbek - Cyrillic\r\n * @property {string} VIE Vietnamese\r\n * @property {string} YID Yiddish\r\n */\r\n\r\n/**\r\n  * @type {Languages}\r\n  */\r\nmodule.exports = {\r\n  AFR: 'afr',\r\n  AMH: 'amh',\r\n  ARA: 'ara',\r\n  ASM: 'asm',\r\n  AZE: 'aze',\r\n  AZE_CYRL: 'aze_cyrl',\r\n  BEL: 'bel',\r\n  BEN: 'ben',\r\n  BOD: 'bod',\r\n  BOS: 'bos',\r\n  BUL: 'bul',\r\n  CAT: 'cat',\r\n  CEB: 'ceb',\r\n  CES: 'ces',\r\n  CHI_SIM: 'chi_sim',\r\n  CHI_TRA: 'chi_tra',\r\n  CHR: 'chr',\r\n  CYM: 'cym',\r\n  DAN: 'dan',\r\n  DEU: 'deu',\r\n  DZO: 'dzo',\r\n  ELL: 'ell',\r\n  ENG: 'eng',\r\n  ENM: 'enm',\r\n  EPO: 'epo',\r\n  EST: 'est',\r\n  EUS: 'eus',\r\n  FAS: 'fas',\r\n  FIN: 'fin',\r\n  FRA: 'fra',\r\n  FRK: 'frk',\r\n  FRM: 'frm',\r\n  GLE: 'gle',\r\n  GLG: 'glg',\r\n  GRC: 'grc',\r\n  GUJ: 'guj',\r\n  HAT: 'hat',\r\n  HEB: 'heb',\r\n  HIN: 'hin',\r\n  HRV: 'hrv',\r\n  HUN: 'hun',\r\n  IKU: 'iku',\r\n  IND: 'ind',\r\n  ISL: 'isl',\r\n  ITA: 'ita',\r\n  ITA_OLD: 'ita_old',\r\n  JAV: 'jav',\r\n  JPN: 'jpn',\r\n  KAN: 'kan',\r\n  KAT: 'kat',\r\n  KAT_OLD: 'kat_old',\r\n  KAZ: 'kaz',\r\n  KHM: 'khm',\r\n  KIR: 'kir',\r\n  KOR: 'kor',\r\n  KUR: 'kur',\r\n  LAO: 'lao',\r\n  LAT: 'lat',\r\n  LAV: 'lav',\r\n  LIT: 'lit',\r\n  MAL: 'mal',\r\n  MAR: 'mar',\r\n  MKD: 'mkd',\r\n  MLT: 'mlt',\r\n  MSA: 'msa',\r\n  MYA: 'mya',\r\n  NEP: 'nep',\r\n  NLD: 'nld',\r\n  NOR: 'nor',\r\n  ORI: 'ori',\r\n  PAN: 'pan',\r\n  POL: 'pol',\r\n  POR: 'por',\r\n  PUS: 'pus',\r\n  RON: 'ron',\r\n  RUS: 'rus',\r\n  SAN: 'san',\r\n  SIN: 'sin',\r\n  SLK: 'slk',\r\n  SLV: 'slv',\r\n  SPA: 'spa',\r\n  SPA_OLD: 'spa_old',\r\n  SQI: 'sqi',\r\n  SRP: 'srp',\r\n  SRP_LATN: 'srp_latn',\r\n  SWA: 'swa',\r\n  SWE: 'swe',\r\n  SYR: 'syr',\r\n  TAM: 'tam',\r\n  TEL: 'tel',\r\n  TGK: 'tgk',\r\n  TGL: 'tgl',\r\n  THA: 'tha',\r\n  TIR: 'tir',\r\n  TUR: 'tur',\r\n  UIG: 'uig',\r\n  UKR: 'ukr',\r\n  URD: 'urd',\r\n  UZB: 'uzb',\r\n  UZB_CYRL: 'uzb_cyrl',\r\n  VIE: 'vie',\r\n  YID: 'yid',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (prefix, cnt) => (\r\n  `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`\r\n);\r\n","'use strict';\r\n\r\nconst createWorker = require('./createWorker');\r\n\r\nconst recognize = async (image, langs, options) => {\r\n  const worker = await createWorker(langs, 1, options);\r\n  return worker.recognize(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nconst detect = async (image, options) => {\r\n  const worker = await createWorker('osd', 0, options);\r\n  return worker.detect(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n  recognize,\r\n  detect,\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * PSM = Page Segmentation Mode\r\n */\r\nmodule.exports = {\r\n  OSD_ONLY: '0',\r\n  AUTO_OSD: '1',\r\n  AUTO_ONLY: '2',\r\n  AUTO: '3',\r\n  SINGLE_COLUMN: '4',\r\n  SINGLE_BLOCK_VERT_TEXT: '5',\r\n  SINGLE_BLOCK: '6',\r\n  SINGLE_LINE: '7',\r\n  SINGLE_WORD: '8',\r\n  CIRCLE_WORD: '9',\r\n  SINGLE_CHAR: '10',\r\n  SPARSE_TEXT: '11',\r\n  SPARSE_TEXT_OSD: '12',\r\n  RAW_LINE: '13',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (worker, handler) => {\r\n  worker.onmessage = ({ data }) => { // eslint-disable-line\r\n    handler(data);\r\n  };\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * OEM = OCR Engine Mode, and there are 4 possible modes.\r\n *\r\n * By default tesseract.js uses LSTM_ONLY mode.\r\n *\r\n */\r\nmodule.exports = {\r\n  TESSERACT_ONLY: 0,\r\n  LSTM_ONLY: 1,\r\n  TESSERACT_LSTM_COMBINED: 2,\r\n  DEFAULT: 3,\r\n};\r\n","/**\r\n * Copyright (c) 2014-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nvar runtime = (function (exports) {\r\n  \"use strict\";\r\n\r\n  var Op = Object.prototype;\r\n  var hasOwn = Op.hasOwnProperty;\r\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\r\n  var undefined; // More compressible than void 0.\r\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n  function define(obj, key, value) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n    return obj[key];\r\n  }\r\n  try {\r\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\r\n    define({}, \"\");\r\n  } catch (err) {\r\n    define = function(obj, key, value) {\r\n      return obj[key] = value;\r\n    };\r\n  }\r\n\r\n  function wrap(innerFn, outerFn, self, tryLocsList) {\r\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n    var generator = Object.create(protoGenerator.prototype);\r\n    var context = new Context(tryLocsList || []);\r\n\r\n    // The ._invoke method unifies the implementations of the .next,\r\n    // .throw, and .return methods.\r\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\r\n\r\n    return generator;\r\n  }\r\n  exports.wrap = wrap;\r\n\r\n  // Try/catch helper to minimize deoptimizations. Returns a completion\r\n  // record like context.tryEntries[i].completion. This interface could\r\n  // have been (and was previously) designed to take a closure to be\r\n  // invoked without arguments, but in all the cases we care about we\r\n  // already have an existing method we want to call, so there's no need\r\n  // to create a new function object. We can even get away with assuming\r\n  // the method takes exactly one argument, since that happens to be true\r\n  // in every case, so we don't have to touch the arguments object. The\r\n  // only additional allocation required is the completion record, which\r\n  // has a stable shape and so hopefully should be cheap to allocate.\r\n  function tryCatch(fn, obj, arg) {\r\n    try {\r\n      return { type: \"normal\", arg: fn.call(obj, arg) };\r\n    } catch (err) {\r\n      return { type: \"throw\", arg: err };\r\n    }\r\n  }\r\n\r\n  var GenStateSuspendedStart = \"suspendedStart\";\r\n  var GenStateSuspendedYield = \"suspendedYield\";\r\n  var GenStateExecuting = \"executing\";\r\n  var GenStateCompleted = \"completed\";\r\n\r\n  // Returning this object from the innerFn has the same effect as\r\n  // breaking out of the dispatch switch statement.\r\n  var ContinueSentinel = {};\r\n\r\n  // Dummy constructor functions that we use as the .constructor and\r\n  // .constructor.prototype properties for functions that return Generator\r\n  // objects. For full spec compliance, you may wish to configure your\r\n  // minifier not to mangle the names of these two functions.\r\n  function Generator() {}\r\n  function GeneratorFunction() {}\r\n  function GeneratorFunctionPrototype() {}\r\n\r\n  // This is a polyfill for %IteratorPrototype% for environments that\r\n  // don't natively support it.\r\n  var IteratorPrototype = {};\r\n  define(IteratorPrototype, iteratorSymbol, function () {\r\n    return this;\r\n  });\r\n\r\n  var getProto = Object.getPrototypeOf;\r\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n  if (NativeIteratorPrototype &&\r\n      NativeIteratorPrototype !== Op &&\r\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n    // This environment has a native %IteratorPrototype%; use it instead\r\n    // of the polyfill.\r\n    IteratorPrototype = NativeIteratorPrototype;\r\n  }\r\n\r\n  var Gp = GeneratorFunctionPrototype.prototype =\r\n    Generator.prototype = Object.create(IteratorPrototype);\r\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\r\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\r\n  defineProperty(\r\n    GeneratorFunctionPrototype,\r\n    \"constructor\",\r\n    { value: GeneratorFunction, configurable: true }\r\n  );\r\n  GeneratorFunction.displayName = define(\r\n    GeneratorFunctionPrototype,\r\n    toStringTagSymbol,\r\n    \"GeneratorFunction\"\r\n  );\r\n\r\n  // Helper for defining the .next, .throw, and .return methods of the\r\n  // Iterator interface in terms of a single ._invoke method.\r\n  function defineIteratorMethods(prototype) {\r\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n      define(prototype, method, function(arg) {\r\n        return this._invoke(method, arg);\r\n      });\r\n    });\r\n  }\r\n\r\n  exports.isGeneratorFunction = function(genFun) {\r\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n    return ctor\r\n      ? ctor === GeneratorFunction ||\r\n        // For the native GeneratorFunction constructor, the best we can\r\n        // do is to check its .name property.\r\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n      : false;\r\n  };\r\n\r\n  exports.mark = function(genFun) {\r\n    if (Object.setPrototypeOf) {\r\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n    } else {\r\n      genFun.__proto__ = GeneratorFunctionPrototype;\r\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\r\n    }\r\n    genFun.prototype = Object.create(Gp);\r\n    return genFun;\r\n  };\r\n\r\n  // Within the body of any async function, `await x` is transformed to\r\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n  // meant to be awaited.\r\n  exports.awrap = function(arg) {\r\n    return { __await: arg };\r\n  };\r\n\r\n  function AsyncIterator(generator, PromiseImpl) {\r\n    function invoke(method, arg, resolve, reject) {\r\n      var record = tryCatch(generator[method], generator, arg);\r\n      if (record.type === \"throw\") {\r\n        reject(record.arg);\r\n      } else {\r\n        var result = record.arg;\r\n        var value = result.value;\r\n        if (value &&\r\n            typeof value === \"object\" &&\r\n            hasOwn.call(value, \"__await\")) {\r\n          return PromiseImpl.resolve(value.__await).then(function(value) {\r\n            invoke(\"next\", value, resolve, reject);\r\n          }, function(err) {\r\n            invoke(\"throw\", err, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\r\n          // When a yielded Promise is resolved, its final value becomes\r\n          // the .value of the Promise<{value,done}> result for the\r\n          // current iteration.\r\n          result.value = unwrapped;\r\n          resolve(result);\r\n        }, function(error) {\r\n          // If a rejected Promise was yielded, throw the rejection back\r\n          // into the async generator function so it can be handled there.\r\n          return invoke(\"throw\", error, resolve, reject);\r\n        });\r\n      }\r\n    }\r\n\r\n    var previousPromise;\r\n\r\n    function enqueue(method, arg) {\r\n      function callInvokeWithMethodAndArg() {\r\n        return new PromiseImpl(function(resolve, reject) {\r\n          invoke(method, arg, resolve, reject);\r\n        });\r\n      }\r\n\r\n      return previousPromise =\r\n        // If enqueue has been called before, then we want to wait until\r\n        // all previous Promises have been resolved before calling invoke,\r\n        // so that results are always delivered in the correct order. If\r\n        // enqueue has not been called before, then it is important to\r\n        // call invoke immediately, without waiting on a callback to fire,\r\n        // so that the async generator function has the opportunity to do\r\n        // any necessary setup in a predictable way. This predictability\r\n        // is why the Promise constructor synchronously invokes its\r\n        // executor callback, and why async functions synchronously\r\n        // execute code before the first await. Since we implement simple\r\n        // async functions in terms of async generators, it is especially\r\n        // important to get this right, even though it requires care.\r\n        previousPromise ? previousPromise.then(\r\n          callInvokeWithMethodAndArg,\r\n          // Avoid propagating failures to Promises returned by later\r\n          // invocations of the iterator.\r\n          callInvokeWithMethodAndArg\r\n        ) : callInvokeWithMethodAndArg();\r\n    }\r\n\r\n    // Define the unified helper method that is used to implement .next,\r\n    // .throw, and .return (see defineIteratorMethods).\r\n    defineProperty(this, \"_invoke\", { value: enqueue });\r\n  }\r\n\r\n  defineIteratorMethods(AsyncIterator.prototype);\r\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\r\n    return this;\r\n  });\r\n  exports.AsyncIterator = AsyncIterator;\r\n\r\n  // Note that simple async functions are implemented on top of\r\n  // AsyncIterator objects; they just return a Promise for the value of\r\n  // the final result produced by the iterator.\r\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\r\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\r\n\r\n    var iter = new AsyncIterator(\r\n      wrap(innerFn, outerFn, self, tryLocsList),\r\n      PromiseImpl\r\n    );\r\n\r\n    return exports.isGeneratorFunction(outerFn)\r\n      ? iter // If outerFn is a generator, return the full iterator.\r\n      : iter.next().then(function(result) {\r\n          return result.done ? result.value : iter.next();\r\n        });\r\n  };\r\n\r\n  function makeInvokeMethod(innerFn, self, context) {\r\n    var state = GenStateSuspendedStart;\r\n\r\n    return function invoke(method, arg) {\r\n      if (state === GenStateExecuting) {\r\n        throw new Error(\"Generator is already running\");\r\n      }\r\n\r\n      if (state === GenStateCompleted) {\r\n        if (method === \"throw\") {\r\n          throw arg;\r\n        }\r\n\r\n        // Be forgiving, per 25.3.3.3.3 of the spec:\r\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n        return doneResult();\r\n      }\r\n\r\n      context.method = method;\r\n      context.arg = arg;\r\n\r\n      while (true) {\r\n        var delegate = context.delegate;\r\n        if (delegate) {\r\n          var delegateResult = maybeInvokeDelegate(delegate, context);\r\n          if (delegateResult) {\r\n            if (delegateResult === ContinueSentinel) continue;\r\n            return delegateResult;\r\n          }\r\n        }\r\n\r\n        if (context.method === \"next\") {\r\n          // Setting context._sent for legacy support of Babel's\r\n          // function.sent implementation.\r\n          context.sent = context._sent = context.arg;\r\n\r\n        } else if (context.method === \"throw\") {\r\n          if (state === GenStateSuspendedStart) {\r\n            state = GenStateCompleted;\r\n            throw context.arg;\r\n          }\r\n\r\n          context.dispatchException(context.arg);\r\n\r\n        } else if (context.method === \"return\") {\r\n          context.abrupt(\"return\", context.arg);\r\n        }\r\n\r\n        state = GenStateExecuting;\r\n\r\n        var record = tryCatch(innerFn, self, context);\r\n        if (record.type === \"normal\") {\r\n          // If an exception is thrown from innerFn, we leave state ===\r\n          // GenStateExecuting and loop back for another invocation.\r\n          state = context.done\r\n            ? GenStateCompleted\r\n            : GenStateSuspendedYield;\r\n\r\n          if (record.arg === ContinueSentinel) {\r\n            continue;\r\n          }\r\n\r\n          return {\r\n            value: record.arg,\r\n            done: context.done\r\n          };\r\n\r\n        } else if (record.type === \"throw\") {\r\n          state = GenStateCompleted;\r\n          // Dispatch the exception by looping back around to the\r\n          // context.dispatchException(context.arg) call above.\r\n          context.method = \"throw\";\r\n          context.arg = record.arg;\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Call delegate.iterator[context.method](context.arg) and handle the\r\n  // result, either by returning a { value, done } result from the\r\n  // delegate iterator, or by modifying context.method and context.arg,\r\n  // setting context.delegate to null, and returning the ContinueSentinel.\r\n  function maybeInvokeDelegate(delegate, context) {\r\n    var methodName = context.method;\r\n    var method = delegate.iterator[methodName];\r\n    if (method === undefined) {\r\n      // A .throw or .return when the delegate iterator has no .throw\r\n      // method, or a missing .next mehtod, always terminate the\r\n      // yield* loop.\r\n      context.delegate = null;\r\n\r\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\r\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\r\n        // If the delegate iterator has a return method, give it a\r\n        // chance to clean up.\r\n        context.method = \"return\";\r\n        context.arg = undefined;\r\n        maybeInvokeDelegate(delegate, context);\r\n\r\n        if (context.method === \"throw\") {\r\n          // If maybeInvokeDelegate(context) changed context.method from\r\n          // \"return\" to \"throw\", let that override the TypeError below.\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n      if (methodName !== \"return\") {\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\r\n          \"The iterator does not provide a '\" + methodName + \"' method\");\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n    if (record.type === \"throw\") {\r\n      context.method = \"throw\";\r\n      context.arg = record.arg;\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var info = record.arg;\r\n\r\n    if (! info) {\r\n      context.method = \"throw\";\r\n      context.arg = new TypeError(\"iterator result is not an object\");\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    if (info.done) {\r\n      // Assign the result of the finished delegate to the temporary\r\n      // variable specified by delegate.resultName (see delegateYield).\r\n      context[delegate.resultName] = info.value;\r\n\r\n      // Resume execution at the desired location (see delegateYield).\r\n      context.next = delegate.nextLoc;\r\n\r\n      // If context.method was \"throw\" but the delegate handled the\r\n      // exception, let the outer generator proceed normally. If\r\n      // context.method was \"next\", forget context.arg since it has been\r\n      // \"consumed\" by the delegate iterator. If context.method was\r\n      // \"return\", allow the original .return call to continue in the\r\n      // outer generator.\r\n      if (context.method !== \"return\") {\r\n        context.method = \"next\";\r\n        context.arg = undefined;\r\n      }\r\n\r\n    } else {\r\n      // Re-yield the result returned by the delegate method.\r\n      return info;\r\n    }\r\n\r\n    // The delegate iterator is finished, so forget it and continue with\r\n    // the outer generator.\r\n    context.delegate = null;\r\n    return ContinueSentinel;\r\n  }\r\n\r\n  // Define Generator.prototype.{next,throw,return} in terms of the\r\n  // unified ._invoke helper method.\r\n  defineIteratorMethods(Gp);\r\n\r\n  define(Gp, toStringTagSymbol, \"Generator\");\r\n\r\n  // A Generator should always return itself as the iterator object when the\r\n  // @@iterator function is called on it. Some browsers' implementations of the\r\n  // iterator prototype chain incorrectly implement this, causing the Generator\r\n  // object to not be returned from this call. This ensures that doesn't happen.\r\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n  define(Gp, iteratorSymbol, function() {\r\n    return this;\r\n  });\r\n\r\n  define(Gp, \"toString\", function() {\r\n    return \"[object Generator]\";\r\n  });\r\n\r\n  function pushTryEntry(locs) {\r\n    var entry = { tryLoc: locs[0] };\r\n\r\n    if (1 in locs) {\r\n      entry.catchLoc = locs[1];\r\n    }\r\n\r\n    if (2 in locs) {\r\n      entry.finallyLoc = locs[2];\r\n      entry.afterLoc = locs[3];\r\n    }\r\n\r\n    this.tryEntries.push(entry);\r\n  }\r\n\r\n  function resetTryEntry(entry) {\r\n    var record = entry.completion || {};\r\n    record.type = \"normal\";\r\n    delete record.arg;\r\n    entry.completion = record;\r\n  }\r\n\r\n  function Context(tryLocsList) {\r\n    // The root entry object (effectively a try statement without a catch\r\n    // or a finally block) gives us a place to store values thrown from\r\n    // locations where there is no enclosing try statement.\r\n    this.tryEntries = [{ tryLoc: \"root\" }];\r\n    tryLocsList.forEach(pushTryEntry, this);\r\n    this.reset(true);\r\n  }\r\n\r\n  exports.keys = function(val) {\r\n    var object = Object(val);\r\n    var keys = [];\r\n    for (var key in object) {\r\n      keys.push(key);\r\n    }\r\n    keys.reverse();\r\n\r\n    // Rather than returning an object with a next method, we keep\r\n    // things simple and return the next function itself.\r\n    return function next() {\r\n      while (keys.length) {\r\n        var key = keys.pop();\r\n        if (key in object) {\r\n          next.value = key;\r\n          next.done = false;\r\n          return next;\r\n        }\r\n      }\r\n\r\n      // To avoid creating an additional object, we just hang the .value\r\n      // and .done properties off the next function object itself. This\r\n      // also ensures that the minifier will not anonymize the function.\r\n      next.done = true;\r\n      return next;\r\n    };\r\n  };\r\n\r\n  function values(iterable) {\r\n    if (iterable) {\r\n      var iteratorMethod = iterable[iteratorSymbol];\r\n      if (iteratorMethod) {\r\n        return iteratorMethod.call(iterable);\r\n      }\r\n\r\n      if (typeof iterable.next === \"function\") {\r\n        return iterable;\r\n      }\r\n\r\n      if (!isNaN(iterable.length)) {\r\n        var i = -1, next = function next() {\r\n          while (++i < iterable.length) {\r\n            if (hasOwn.call(iterable, i)) {\r\n              next.value = iterable[i];\r\n              next.done = false;\r\n              return next;\r\n            }\r\n          }\r\n\r\n          next.value = undefined;\r\n          next.done = true;\r\n\r\n          return next;\r\n        };\r\n\r\n        return next.next = next;\r\n      }\r\n    }\r\n\r\n    // Return an iterator with no values.\r\n    return { next: doneResult };\r\n  }\r\n  exports.values = values;\r\n\r\n  function doneResult() {\r\n    return { value: undefined, done: true };\r\n  }\r\n\r\n  Context.prototype = {\r\n    constructor: Context,\r\n\r\n    reset: function(skipTempReset) {\r\n      this.prev = 0;\r\n      this.next = 0;\r\n      // Resetting context._sent for legacy support of Babel's\r\n      // function.sent implementation.\r\n      this.sent = this._sent = undefined;\r\n      this.done = false;\r\n      this.delegate = null;\r\n\r\n      this.method = \"next\";\r\n      this.arg = undefined;\r\n\r\n      this.tryEntries.forEach(resetTryEntry);\r\n\r\n      if (!skipTempReset) {\r\n        for (var name in this) {\r\n          // Not sure about the optimal order of these conditions:\r\n          if (name.charAt(0) === \"t\" &&\r\n              hasOwn.call(this, name) &&\r\n              !isNaN(+name.slice(1))) {\r\n            this[name] = undefined;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function() {\r\n      this.done = true;\r\n\r\n      var rootEntry = this.tryEntries[0];\r\n      var rootRecord = rootEntry.completion;\r\n      if (rootRecord.type === \"throw\") {\r\n        throw rootRecord.arg;\r\n      }\r\n\r\n      return this.rval;\r\n    },\r\n\r\n    dispatchException: function(exception) {\r\n      if (this.done) {\r\n        throw exception;\r\n      }\r\n\r\n      var context = this;\r\n      function handle(loc, caught) {\r\n        record.type = \"throw\";\r\n        record.arg = exception;\r\n        context.next = loc;\r\n\r\n        if (caught) {\r\n          // If the dispatched exception was caught by a catch block,\r\n          // then let that catch block handle the exception normally.\r\n          context.method = \"next\";\r\n          context.arg = undefined;\r\n        }\r\n\r\n        return !! caught;\r\n      }\r\n\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        var record = entry.completion;\r\n\r\n        if (entry.tryLoc === \"root\") {\r\n          // Exception thrown outside of any try block that could handle\r\n          // it, so set the completion value of the entire function to\r\n          // throw the exception.\r\n          return handle(\"end\");\r\n        }\r\n\r\n        if (entry.tryLoc <= this.prev) {\r\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n          if (hasCatch && hasFinally) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            } else if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else if (hasCatch) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            }\r\n\r\n          } else if (hasFinally) {\r\n            if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else {\r\n            throw new Error(\"try statement without catch or finally\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    abrupt: function(type, arg) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc <= this.prev &&\r\n            hasOwn.call(entry, \"finallyLoc\") &&\r\n            this.prev < entry.finallyLoc) {\r\n          var finallyEntry = entry;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (finallyEntry &&\r\n          (type === \"break\" ||\r\n           type === \"continue\") &&\r\n          finallyEntry.tryLoc <= arg &&\r\n          arg <= finallyEntry.finallyLoc) {\r\n        // Ignore the finally entry if control is not jumping to a\r\n        // location outside the try/catch block.\r\n        finallyEntry = null;\r\n      }\r\n\r\n      var record = finallyEntry ? finallyEntry.completion : {};\r\n      record.type = type;\r\n      record.arg = arg;\r\n\r\n      if (finallyEntry) {\r\n        this.method = \"next\";\r\n        this.next = finallyEntry.finallyLoc;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      return this.complete(record);\r\n    },\r\n\r\n    complete: function(record, afterLoc) {\r\n      if (record.type === \"throw\") {\r\n        throw record.arg;\r\n      }\r\n\r\n      if (record.type === \"break\" ||\r\n          record.type === \"continue\") {\r\n        this.next = record.arg;\r\n      } else if (record.type === \"return\") {\r\n        this.rval = this.arg = record.arg;\r\n        this.method = \"return\";\r\n        this.next = \"end\";\r\n      } else if (record.type === \"normal\" && afterLoc) {\r\n        this.next = afterLoc;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    },\r\n\r\n    finish: function(finallyLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.finallyLoc === finallyLoc) {\r\n          this.complete(entry.completion, entry.afterLoc);\r\n          resetTryEntry(entry);\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n    },\r\n\r\n    \"catch\": function(tryLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc === tryLoc) {\r\n          var record = entry.completion;\r\n          if (record.type === \"throw\") {\r\n            var thrown = record.arg;\r\n            resetTryEntry(entry);\r\n          }\r\n          return thrown;\r\n        }\r\n      }\r\n\r\n      // The context.catch method must only be called with a location\r\n      // argument that corresponds to a known catch block.\r\n      throw new Error(\"illegal catch attempt\");\r\n    },\r\n\r\n    delegateYield: function(iterable, resultName, nextLoc) {\r\n      this.delegate = {\r\n        iterator: values(iterable),\r\n        resultName: resultName,\r\n        nextLoc: nextLoc\r\n      };\r\n\r\n      if (this.method === \"next\") {\r\n        // Deliberately forget the last sent value so that we don't\r\n        // accidentally pass it on to the delegate.\r\n        this.arg = undefined;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n  };\r\n\r\n  // Regardless of whether this script is executing as a CommonJS module\r\n  // or not, return the runtime object so that we can declare the variable\r\n  // regeneratorRuntime in the outer scope, which allows this module to be\r\n  // injected easily by `bin/regenerator --include-runtime script.js`.\r\n  return exports;\r\n\r\n}(\r\n  // If this script is executing as a CommonJS module, use module.exports\r\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n  // object. Either way, the resulting object will be used to initialize\r\n  // the regeneratorRuntime variable at the top of this file.\r\n  typeof module === \"object\" ? module.exports : {}\r\n));\r\n\r\ntry {\r\n  regeneratorRuntime = runtime;\r\n} catch (accidentalStrictMode) {\r\n  // This module should not be running in strict mode, so the above\r\n  // assignment should always work unless something is misconfigured. Just\r\n  // in case runtime.js accidentally runs in strict mode, in modern engines\r\n  // we can explicitly access globalThis. In older engines we can escape\r\n  // strict mode using a global Function call. This could conceivably fail\r\n  // if a Content Security Policy forbids using Function, but in that case\r\n  // the proper solution is to fix the accidental strict mode problem. If\r\n  // you've misconfigured your bundler to force strict mode and applied a\r\n  // CSP to forbid Function, and you're not willing to fix either of those\r\n  // problems, please detail your unique predicament in a GitHub issue.\r\n  if (typeof globalThis === \"object\") {\r\n    globalThis.regeneratorRuntime = runtime;\r\n  } else {\r\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\r\n  }\r\n}\r\n","'use strict';\r\n\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\n\r\nlet schedulerCounter = 0;\r\n\r\nmodule.exports = () => {\r\n  const id = getId('Scheduler', schedulerCounter);\r\n  const workers = {};\r\n  const runningWorkers = {};\r\n  let jobQueue = [];\r\n\r\n  schedulerCounter += 1;\r\n\r\n  const getQueueLen = () => jobQueue.length;\r\n  const getNumWorkers = () => Object.keys(workers).length;\r\n\r\n  const dequeue = () => {\r\n    if (jobQueue.length !== 0) {\r\n      const wIds = Object.keys(workers);\r\n      for (let i = 0; i < wIds.length; i += 1) {\r\n        if (typeof runningWorkers[wIds[i]] === 'undefined') {\r\n          jobQueue[0](workers[wIds[i]]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const queue = (action, payload) => (\r\n    new Promise((resolve, reject) => {\r\n      const job = createJob({ action, payload });\r\n      jobQueue.push(async (w) => {\r\n        jobQueue.shift();\r\n        runningWorkers[w.id] = job;\r\n        try {\r\n          resolve(await w[action].apply(this, [...payload, job.id]));\r\n        } catch (err) {\r\n          reject(err);\r\n        } finally {\r\n          delete runningWorkers[w.id];\r\n          dequeue();\r\n        }\r\n      });\r\n      log(`[${id}]: Add ${job.id} to JobQueue`);\r\n      log(`[${id}]: JobQueue length=${jobQueue.length}`);\r\n      dequeue();\r\n    })\r\n  );\r\n\r\n  const addWorker = (w) => {\r\n    workers[w.id] = w;\r\n    log(`[${id}]: Add ${w.id}`);\r\n    log(`[${id}]: Number of workers=${getNumWorkers()}`);\r\n    dequeue();\r\n    return w.id;\r\n  };\r\n\r\n  const addJob = async (action, ...payload) => {\r\n    if (getNumWorkers() === 0) {\r\n      throw Error(`[${id}]: You need to have at least one worker before adding jobs`);\r\n    }\r\n    return queue(action, payload);\r\n  };\r\n\r\n  const terminate = async () => {\r\n    Object.keys(workers).forEach(async (wid) => {\r\n      await workers[wid].terminate();\r\n    });\r\n    jobQueue = [];\r\n  };\r\n\r\n  return {\r\n    addWorker,\r\n    addJob,\r\n    terminate,\r\n    getQueueLen,\r\n    getNumWorkers,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst version = require('../../../package.json').version;\r\nconst defaultOptions = require('../../constants/defaultOptions');\r\n\r\n/*\r\n * Default options for browser worker\r\n */\r\nmodule.exports = {\r\n  ...defaultOptions,\r\n  workerPath: `https://cdn.jsdelivr.net/npm/tesseract.js@v${version}/dist/worker.min.js`,\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Entry point for tesseract.js, should be the entry when bundling.\r\n *\r\n * @fileoverview entry point for tesseract.js\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nrequire('regenerator-runtime/runtime');\r\nconst createScheduler = require('./createScheduler');\r\nconst createWorker = require('./createWorker');\r\nconst Tesseract = require('./Tesseract');\r\nconst languages = require('./constants/languages');\r\nconst OEM = require('./constants/OEM');\r\nconst PSM = require('./constants/PSM');\r\nconst { setLogging } = require('./utils/log');\r\n\r\nmodule.exports = {\r\n  languages,\r\n  OEM,\r\n  PSM,\r\n  createScheduler,\r\n  createWorker,\r\n  setLogging,\r\n  ...Tesseract,\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (key) => {\r\n  const env = {};\r\n\r\n  if (typeof WorkerGlobalScope !== 'undefined') {\r\n    env.type = 'webworker';\r\n  } else if (typeof document === 'object') {\r\n    env.type = 'browser';\r\n  } else if (typeof process === 'object' && typeof require === 'function') {\r\n    env.type = 'node';\r\n  }\r\n\r\n  if (typeof key === 'undefined') {\r\n    return env;\r\n  }\r\n\r\n  return env[key];\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  /*\r\n   * Use BlobURL for worker script by default\r\n   * TODO: remove this option\r\n   *\r\n   */\r\n  workerBlobURL: true,\r\n  logger: () => {},\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * send\r\n *\r\n * @name send\r\n * @function send packet to worker and create a job\r\n * @access public\r\n */\r\nmodule.exports = async (worker, packet) => {\r\n  worker.postMessage(packet);\r\n};\r\n","'use strict';\r\n\r\nlet logging = false;\r\n\r\nexports.logging = logging;\r\n\r\nexports.setLogging = (_logging) => {\r\n  logging = _logging;\r\n};\r\n\r\nexports.log = (...args) => (logging ? console.log.apply(this, args) : null);\r\n","'use strict';\r\n\r\n/**\r\n * terminateWorker\r\n *\r\n * @name terminateWorker\r\n * @function terminate worker\r\n * @access public\r\n */\r\nmodule.exports = (worker) => {\r\n  worker.terminate();\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Fuse.js v7.1.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2025 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When `true`, the algorithm will ignore diacritics (accents) in comparisons\n  ignoreDiacritics: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nconst stripDiacritics = String.prototype.normalize\n    ? ((str) => str.normalize('NFD').replace(/[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/g, ''))\n    : ((str) => str);\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, ignoreDiacritics, includeMatches } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// ❗Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      ignoreDiacritics,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive, ignoreDiacritics } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.1.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","\r\nimport Fuse from 'fuse.js';\r\n\r\n\r\nconst Default_Row_Format = {\r\n    Date: null,\r\n    Intervention: null,\r\n    AST: null,\r\n    AST_RangeLow: 8,\r\n    AST_RangeHigh: 33,\r\n    ALT: null,\r\n    ALT_RangeLow: 4,\r\n    ALT_RangeHigh: 36,\r\n    GLOBULIN: null,\r\n    GLOBULIN_RangeLow: 1.9,\r\n    GLOBULIN_RangeHigh: 4.1,\r\n    BUN: null,\r\n    BUN_RangeLow: 6,\r\n    BUN_RangeHigh: 20,\r\n    FASTING_GLUCOSE: null,\r\n    FASTING_GLUCOSE_RangeLow: 70,\r\n    FASTING_GLUCOSE_RangeHigh: 99,\r\n    A1C: null,\r\n    A1C_RangeLow: 0,\r\n    A1C_RangeHigh: 5.5,\r\n    RBC: null,\r\n    RBC_RangeLow: 4.5,\r\n    RBC_RangeHigh: 5.9,\r\n    HGB: null,\r\n    HGB_RangeLow: 13.5,\r\n    HGB_RangeHigh: 17.5,\r\n    HCT: null,\r\n    HCT_RangeLow: 41,\r\n    HCT_RangeHigh: 53,\r\n    WBC: null,\r\n    WBC_RangeLow: 4,\r\n    WBC_RangeHigh: 11,\r\n    PLATELETS: null,\r\n    PLATELETS_RangeLow: 150,\r\n    PLATELETS_RangeHigh: 400,\r\n    SODIUM: null,\r\n    SODIUM_RangeLow: 135,\r\n    SODIUM_RangeHigh: 145,\r\n    POTASSIUM: null,\r\n    POTASSIUM_RangeLow: 3.4,\r\n    POTASSIUM_RangeHigh: 5,\r\n    CHLORIDE: null,\r\n    CHLORIDE_RangeLow: 98,\r\n    CHLORIDE_RangeHigh: 108,\r\n    CALCIUM: null,\r\n    CALCIUM_RangeLow: 8.5,\r\n    CALCIUM_RangeHigh: 10.5,\r\n    CO2: null,\r\n    CO2_RangeLow: 23,\r\n    CO2_RangeHigh: 32,\r\n    IGF1: null,\r\n    IGF1_RangeLow: 120,\r\n    IGF1_RangeHigh: 160,\r\n    FASTING_INSULIN: null,\r\n    FASTING_INSULIN_RangeLow: 2,\r\n    FASTING_INSULIN_RangeHigh: 6,\r\n    BETA_HYDROXYBUTYRATE: null,\r\n    BETA_HYDROXYBUTYRATE_RangeLow: 0,\r\n    BETA_HYDROXYBUTYRATE_RangeHigh: 7,\r\n    B12: null,\r\n    B12_RangeLow: 500,\r\n    B12_RangeHigh: 1300,\r\n    MAGNESIUM: null,\r\n    MAGNESIUM_RangeLow: 1.7,\r\n    MAGNESIUM_RangeHigh: 2.4,\r\n    CRP: null,\r\n    CRP_RangeLow: 1,\r\n    CRP_RangeHigh: 3,\r\n    IRON: null,\r\n    IRON_MaleRangeLow: 50,\r\n    IRON_MaleRangeHigh: 150,\r\n    IRON_FemaleRangeLow: 35,\r\n    IRON_FemaleRangeHigh: 145,\r\n    CHOLESTEROL: null,\r\n    CHOLESTEROL_RangeLow: 0,\r\n    CHOLESTEROL_RangeHigh: 200,\r\n    HOMOCYSTEINE: null,\r\n    HOMOCYSTEINE_RangeLow: 5,\r\n    HOMOCYSTEINE_RangeHigh: 15,\r\n    Vitamin_D: null,\r\n    Vitamin_D_RangeLow: 40,\r\n    Vitamin_D_RangeHigh: 90\r\n};\r\n\r\n\r\nexport const field_names = [\r\n    { csvfield: 'AST', replacements: ['ast', 'aspartate aminotransferase', 'aspartate transaminase', 'sgot', 'serum glutamic oxaloacetic transaminase', 'asp aminotransferase'] },\r\n    { csvfield: 'ALT', replacements: ['alt', 'alanine aminotransferase', 'alanine transaminase', 'sgpt', 'serum glutamic pyruvic transaminase', 'ala aminotransferase', 'alat'] },\r\n    { csvfield: 'GLOBULIN', replacements: ['globulin', 'serum globulin', 'total globulin', 'glob', 'globulins'] },\r\n    { csvfield: 'BUN', replacements: ['bun', 'blood urea nitrogen', 'urea nitrogen', 'urea', 'blood urea'] },\r\n    { csvfield: 'FASTING_GLUCOSE', replacements: ['fasting glucose', 'glucose fasting', 'fbs', 'fasting blood sugar', 'glucose', 'blood glucose', 'serum glucose', 'plasma glucose', 'gluc', 'glu', 'fast glucose', 'glucose fast'] },\r\n    { csvfield: 'A1C', replacements: ['a1c', 'hba1c', 'hemoglobin a1c', 'glycated hemoglobin', 'glycohemoglobin', 'hgb a1c', 'hb a1c', 'a1c hemoglobin', 'hemoglobin a1c'] },\r\n    { csvfield: 'RBC', replacements: ['rbc', 'red blood cells', 'red blood cell count', 'erythrocytes', 'red cell count', 'rbc count', 'red cells'] },\r\n    { csvfield: 'HGB', replacements: ['hgb', 'hemoglobin', 'hb', 'haemoglobin', 'hemo'] },\r\n    { csvfield: 'HCT', replacements: ['hct', 'hematocrit', 'haematocrit', 'packed cell volume', 'pcv'] },\r\n    { csvfield: 'WBC', replacements: ['wbc', 'white blood cells', 'white blood cell count', 'leukocytes', 'white cell count', 'wbc count', 'white cells', 'leucocytes'] },\r\n    { csvfield: 'PLATELETS', replacements: ['platelets', 'platelet count', 'plt', 'thrombocytes', 'plts'] },\r\n    { csvfield: 'SODIUM', replacements: ['sodium', 'na', 'serum sodium', 'na+', 'sod'] },\r\n    { csvfield: 'POTASSIUM', replacements: ['potassium', 'k', 'serum potassium', 'k+', 'pot'] },\r\n    { csvfield: 'CHLORIDE', replacements: ['chloride', 'cl', 'serum chloride', 'cl-', 'chlor'] },\r\n    { csvfield: 'CALCIUM', replacements: ['calcium', 'ca', 'serum calcium', 'ca++', 'total calcium', 'ca2+'] },\r\n    { csvfield: 'CO2', replacements: ['co2', 'carbon dioxide', 'bicarbonate', 'hco3', 'total co2', 'co2 total', 'bicarb', 'tco2'] },\r\n    { csvfield: 'IGF1', replacements: ['igf1', 'igf-1', 'insulin-like growth factor 1', 'insulin like growth factor', 'somatomedin c', 'igf 1'] },\r\n    { csvfield: 'FASTING_INSULIN', replacements: ['fasting insulin', 'insulin fasting', 'insulin', 'serum insulin', 'plasma insulin', 'fast insulin', 'insulin fast'] },\r\n    { csvfield: 'BETA_HYDROXYBUTYRATE', replacements: ['beta hydroxybutyrate', 'beta-hydroxybutyrate', 'b-hydroxybutyrate', 'bhb', 'ketones', 'serum ketones', 'beta hydroxy butyrate'] },\r\n    { csvfield: 'B12', replacements: ['b12', 'vitamin b12', 'vitamin b-12', 'cobalamin', 'cyanocobalamin', 'b 12', 'vit b12', 'folate b12'] },\r\n    { csvfield: 'Vitamin_D', replacements: ['vitamin d', 'vitamin d3', 'vitamin d 25-oh', '25-hydroxyvitamin d', '25 oh vitamin d', 'calcidiol', 'vit d', 'vitamin d total', '25-oh-d3', '25(oh)d', 'vitamin d 25 hydroxy'] },\r\n    { csvfield: 'MAGNESIUM', replacements: ['magnesium', 'mg', 'serum magnesium', 'mg++', 'mag'] },\r\n    { csvfield: 'IRON', replacements: ['iron', 'fe', 'serum iron', 'iron serum', 'total iron'] },\r\n    { csvfield: 'CRP', replacements: ['crp', 'c-reactive protein', 'c reactive protein', 'c-rp', 'high sensitivity crp', 'hs-crp', 'hs crp'] },\r\n    { csvfield: 'CHOLESTEROL', replacements: ['cholesterol', 'total cholesterol', 'chol', 'tc', 'serum cholesterol', 'total chol'] },\r\n    { csvfield: 'HOMOCYSTEINE', replacements: ['homocysteine', 'hcy', 'homo-cysteine', 'homocyst', 'total homocysteine'] }\r\n];\r\n\r\n//placeholder for persistent curRowFormat\r\nlet curRowFormat = { ...Default_Row_Format };\r\n\r\n//modify row format based on field and range value\r\nexport async function modifyRowFormat(field, rangeValue, newValue) {\r\n    // Check if the field exists in curRowFormat\r\n    if (curRowFormat.hasOwnProperty(field)) {\r\n        // If modifying the main field value\r\n        if (!rangeValue) {\r\n            curRowFormat[field] = newValue;\r\n        } else {\r\n            // If modifying a range value (e.g., RangeLow or RangeHigh)\r\n            const rangeKey = `${field}_${rangeValue}`;\r\n            if (curRowFormat.hasOwnProperty(rangeKey)) {\r\n                curRowFormat[rangeKey] = newValue;\r\n            } else {\r\n                console.error(`Range key \"${rangeKey}\" does not exist in curRowFormat.`);\r\n            }\r\n        }\r\n    } else {\r\n        console.error(`Field \"${field}\" does not exist in curRowFormat.`);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport async function testingJsonProcessing( ocr_object_list) {\r\n    // This function is for debugging purposes to test the JSON processing logic\r\n\r\n    //mutates json input with a new property for potential of being a value and a bounding box center point\r\n    for (var word_object of ocr_object_list){\r\n        const possible_val = word_object.word_text\r\n        const val_score = scoreOCRNumber(possible_val)\r\n        word_object['number_score'] = val_score\r\n        word_object['center_value'] = {\r\n            centerx: (word_object.word_bbox.x1 + word_object.word_bbox.x0)/2,\r\n            centery: (word_object.word_bbox.y1 + word_object.word_bbox.y0)/2,\r\n        }\r\n        word_object['potential_keys_for'] = new Set()\r\n    }\r\n\r\n    //finds which ocr values are probably a sought after csv field (will mutate ocr_object_list)\r\n    let probable_keys = {}\r\n    for (const field of field_names) {\r\n        const field_name = field.csvfield\r\n        const field_replacements = field.replacements\r\n        const field_key_value_pair = await evalKeyConfidence(field_name, field_replacements, ocr_object_list)\r\n        probable_keys[field_key_value_pair.csv_value] = field_key_value_pair.closest_matches\r\n    }\r\n\r\n    console.log(ocr_object_list)\r\n\r\n    //search for innate structural offset between different probable keys and probable values\r\n    //isolate each page\r\n    let image_dic = {}\r\n    for (var word_object of ocr_object_list) {\r\n        const page_key = word_object.imageName\r\n        if (page_key in image_dic) {\r\n            // Check if key or value and add to appropriate key or value\r\n            if (word_object.potential_keys_for instanceof Set) {\r\n                if (word_object.potential_keys_for.size > 0) {\r\n                    // console.log('Pushing key:', word_object.word_text, 'potential_keys_for:', word_object.potential_keys_for);\r\n                    image_dic[page_key].keys.push(word_object);\r\n                    continue;\r\n                } else {\r\n                    // Debug: Set is empty\r\n                    //console.log('Empty potential_keys_for Set for:', word_object.word_text);\r\n                }\r\n            } else {\r\n                // Debug: Not a Set\r\n                //console.warn('potential_keys_for is not a Set for:', word_object.word_text, word_object.potential_keys_for);\r\n            }\r\n            if (word_object.number_score > 0.9) {\r\n                image_dic[page_key].values.push(word_object);\r\n                continue;\r\n            }\r\n        } else {\r\n            image_dic[page_key] = {\r\n                keys: [],\r\n                values: []\r\n            };\r\n        }\r\n    }\r\n    console.log(image_dic)\r\n    return image_dic\r\n\r\n\r\n\r\n}\r\n\r\n\r\n//\r\nexport async function processToCsv(resultsObject) {\r\n    let final_csv = {... curRowFormat}\r\n    for (const [key, value] of Object.entries(final_csv)) {\r\n        if (value === null) {\r\n            if (key in resultsObject) {\r\n                final_csv[key] = resultsObject[key]\r\n            }\r\n        }\r\n    }\r\n    const csv = [\r\n        Object.keys(obj).join(','),       // header row\r\n        Object.values(obj).join(',')      // value row\r\n    ].join('\\n');\r\n    return csv\r\n}\r\n\r\n","/**\r\n * Returns a marked up array of images that display the contents of ocrResults\r\n * Classifies values by color benchmarks: green = unimportant, blue = key, red = number\r\n *\r\n * @param {File[]} originalImages - Array of image files that were processed\r\n * @param {Object[]} ocrResults - list of mutated word objects to be interpreted\r\n * @returns {File[]} - Array of marked up image files\r\n */\r\nexport async function markupOcrResults(originalImages, ocrResults) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n    const markedImages = [];\r\n    for (const original_file of originalImages) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n        \r\n        const cur_page_words = ocrResults.filter(word_object => image_name === word_object.imageName);\r\n        for (const cur_page_word of cur_page_words) {\r\n            ctx.beginPath();\r\n            ctx.rect(cur_page_word.word_x, cur_page_word.word_y, cur_page_word.width, cur_page_word.height);\r\n\r\n            if (cur_page_word.potential_matches.size > 0) {\r\n                ctx.strokeStyle = 'blue';\r\n            } else if (cur_page_word.numberScore > 0) {\r\n                ctx.strokeStyle = 'red';\r\n            } else {\r\n                ctx.strokeStyle = 'green';\r\n            }\r\n\r\n            ctx.lineWidth = 3;\r\n            ctx.stroke();\r\n\r\n            // Draw the word text at the center\r\n            ctx.save();\r\n            ctx.font = '16px Arial';\r\n            ctx.fillStyle = 'white';\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText(cur_page_word.word_text, cur_page_word.word_x, cur_page_word.word_y);\r\n            ctx.restore();\r\n        } \r\n        \r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}\r\n\r\n/**\r\n * Opens a new browser window and displays a list of image files\r\n * Provides a simple UI with each image centered and a close button\r\n *\r\n * @param {File[]} image_list - Array of image files to display\r\n * @returns {void} - Opens a new window; does not return a value\r\n */\r\nexport async function displayImages(image_list) {\r\n    console.log('ran the display')\r\n    // Open a new window and display all marked images there\r\n    const imageWindow = window.open('', '_blank', 'width=1200,height=900,scrollbars=yes,resizable=yes');\r\n    if (imageWindow) {\r\n        imageWindow.document.write('<!DOCTYPE html><html><head><title>Marked Images</title>');\r\n        imageWindow.document.write('<style>body{background:#222;color:#fff;font-family:sans-serif;margin:0;padding:2em;} .img-wrap{margin:2em 0;text-align:center;} img{max-width:95vw;max-height:80vh;box-shadow:0 0 10px #000;} button{position:fixed;top:1em;right:1em;z-index:1000;padding:0.5em 1em;font-size:1.2em;}</style>');\r\n        imageWindow.document.write('</head><body>');\r\n        imageWindow.document.write('<button onclick=\"window.close()\">Close</button>');\r\n        for (const markedFile of image_list) {\r\n            const url = imageWindow.URL.createObjectURL(markedFile);\r\n            imageWindow.document.write('<div class=\"img-wrap\"><img src=\"' + url + '\" alt=\"' + (markedFile.name || 'marked_image.png') + '\"></div>');\r\n        }\r\n        imageWindow.document.write('</body></html>');\r\n        imageWindow.document.close();\r\n    } else {\r\n        alert('Popup blocked! Please allow popups for this site to view marked images.');\r\n    }\r\n}\r\n//Ignore below --------------------------------------------------------------------------------\r\n\r\n\r\n\r\n// Draws lines between key centers and value centers for each image, returns array of marked-up image Files\r\nexport async function markupStructure(original_images, imageKeyValList) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n    const markedImages = [];\r\n    for (const original_file of original_images) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n\r\n        if (!imageKeyValList[image_name]) {\r\n            console.warn('No markup data for image:', image_name);\r\n        }\r\n\r\n        const page_info = imageKeyValList[image_name] \r\n\r\n        //circles keys\r\n        const keys = page_info.keys;\r\n        for (const key_object of keys) {\r\n            ctx.beginPath();\r\n            ctx.arc(key_object.word_x, key_object.word_y, 10, 0, 2 * Math.PI);\r\n            ctx.strokeStyle = 'red';\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n        }\r\n        const values = page_info.values;\r\n        for (const value_object of values) {\r\n            ctx.beginPath();\r\n            ctx.arc(value_object.word_x, value_object.word_y, 10, 0, 2 * Math.PI);\r\n            ctx.strokeStyle = 'blue';\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n        }\r\n\r\n        // Draw green lines between each key and its 2 closest values\r\n        for (const key_object of keys) {\r\n            const keyObjectUniqueKey = key_object.uniqueKey\r\n            const keyValStruct = page_info.keyValStructPattern\r\n            const keyFoundInStruct = keyObjectUniqueKey in keyValStruct\r\n\r\n            const key_x = key_object.word_x\r\n            const key_y = key_object.word_y\r\n\r\n            // Compute distances to all values\r\n            const structDistances = [];\r\n            const regDistances = [];\r\n            for (const value_object of values) {\r\n                const valObjectUniqueKey = value_object.uniqueKey\r\n                if (keyFoundInStruct) {\r\n                    if (valObjectUniqueKey in keyValStruct[keyObjectUniqueKey]) {\r\n                        const dx = keyValStruct[keyObjectUniqueKey][valObjectUniqueKey].dx\r\n                        const dy = keyValStruct[keyObjectUniqueKey][valObjectUniqueKey].dy\r\n                        const dist = Math.sqrt(dx * dx + dy * dy);\r\n                        structDistances.push({key_x, key_y, dx, dy, dist});\r\n                        continue \r\n                    } \r\n                }\r\n\r\n                \r\n                const dx = value_object.word_x - key_object.word_x;\r\n                const dy = value_object.word_y - key_object.word_y;\r\n                const dist = Math.sqrt(dx * dx + dy * dy);\r\n                regDistances.push({key_x, key_y, dx, dy, dist});\r\n            }\r\n            // Sort by distance and take 2 closest\r\n            regDistances.sort((a, b) => a.dist - b.dist);\r\n            for (const distanceInfo of regDistances.slice(0, 3)) {\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(distanceInfo.key_x, distanceInfo.key_y);\r\n                ctx.lineTo(distanceInfo.key_x + distanceInfo.dx, distanceInfo.key_y + distanceInfo.dy);\r\n                ctx.strokeStyle = 'yellow';\r\n                ctx.lineWidth = 2;\r\n                ctx.stroke();\r\n            }\r\n\r\n            for (const distanceInfo of structDistances) {\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(distanceInfo.key_x, distanceInfo.key_y);\r\n                ctx.lineTo(distanceInfo.key_x + dx, distanceInfo.key_y + dy);\r\n                ctx.strokeStyle = 'green';\r\n                ctx.lineWidth = 3;\r\n                ctx.stroke();\r\n            }\r\n        }\r\n            \r\n      \r\n\r\n\r\n\r\n\r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}\r\n\r\n\r\n//markup function for ocr results (will be chaotic)\r\nexport async function markupOCRStructure(original_images, imageDic) {\r\n    console.log('running markupOCRStructure')\r\n    console.log('with :')\r\n    console.log(original_images)\r\n    console.log(imageDic)\r\n    console.log('as inputs')\r\n    const red = { r: 255, g: 0, b: 0 };\r\n    const blue = { r: 0, g: 0, b: 255 };\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n\r\n    const markedImages = [];\r\n    for (const original_file of original_images) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n\r\n        if (!imageDic[image_name]) {\r\n            console.warn('No markup data for image:', image_name);\r\n        }\r\n\r\n        const page_info = imageDic[image_name] \r\n\r\n        //circles keys\r\n        const keys = page_info.words;\r\n        for (const key_object of keys) {\r\n            ctx.beginPath();\r\n            ctx.arc(key_object.word_x, key_object.word_y, 10, 0, 2 * Math.PI);\r\n            ctx.strokeStyle = 'red';\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n        }\r\n        const values = page_info.numbers;\r\n        for (const value_object of values) {\r\n            ctx.beginPath();\r\n            ctx.arc(value_object.word_x, value_object.word_y, 10, 0, 2 * Math.PI);\r\n            ctx.strokeStyle = 'green';\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n        }\r\n\r\n        const minCount = 1\r\n        const maxCount = page_info.patterns.reduce((currentMax, item) => {\r\n            if (item.count > currentMax) {\r\n                return item.count;\r\n            } else {\r\n                return currentMax;\r\n            }\r\n        }, -Infinity);\r\n\r\n\r\n        for (const pattern of page_info.patterns) {\r\n            const patternCount = pattern.count\r\n            for (const [word, numberObj] of Object.entries(pattern.keyValueInfo)) {\r\n                for (const [number, distanceInfo] of Object.entries(numberObj)) {\r\n                    // const lerpColor = getStrokeColorForWidth(patternCount, minCount, maxCount, red, blue)\r\n                    // const alphaVal = lerp(patternCount, minCount, maxCount, 1, 0)\r\n                    \r\n                    // console.log(`Color: ${lerpColor}, Alpha: ${alphaVal.toFixed(2)} (Count: ${patternCount})`);\r\n\r\n                    ctx.strokeStyle = 'red'\r\n                    ctx.globalAlpha = 0.1\r\n                    ctx.moveTo(distanceInfo.key_x, distanceInfo.key_y);\r\n                    ctx.lineTo(distanceInfo.key_x + distanceInfo.dx, distanceInfo.key_y + distanceInfo.dy);\r\n                    ctx.lineWidth = 0;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}","import {createScheduler, createWorker, PSM} from 'tesseract.js';\r\nimport Fuse from 'fuse.js';\r\nimport {field_names} from './formatCsvRow';\r\nimport {markupOcrResults, displayImages} from './imageMarkup';\r\n\r\n/**\r\n * Performs Ocr, cleans results, and evaluates each result's potential of being a sought after value through mutating the potential_matchs and numberScore properties\r\n *\r\n * @param {File[]} allImages - Array of image files to be processed.\r\n * @param {float} fuseThreshold - numerical threshold option for fuzzy searching with fuse.js\r\n * @param {float} resultThreshold - score threshold for accepting fuse result score\r\n * @returns {Object[]} Filtered and cleaned array of scored word objects\r\n */\r\nexport async function processDocumentCollection(\r\n    allImages, \r\n    fuseThreshold,\r\n    resultThreshold,\r\n    downloadOcrResults,\r\n    displayOcrResults\r\n    ) {\r\n    //run OCR\r\n    // returns ocr_results: Array of word objects extracted from OCR results.\r\n    // Each object represents a single recognized word with metadata:\r\n    // {\r\n    //   word_text: String        // The recognized word text\r\n    //   word_confidence: Number  // Confidence score from Tesseract (0–100)\r\n    //   word_choices: Array      // Alternative recognition choices (empty if none)\r\n    //   word_y: Number           // Top Y coordinate of word bounding box\r\n    //   word_x: Number           // Left X coordinate of word bounding box\r\n    //   height: Number           // Height of bounding box\r\n    //   width: Number            // Width of bounding box\r\n    //   potential_matches: Set   // Placeholder for matching to hardcoded keys\r\n    //   uniqueKey: String        // Unique hierarchical key (block/para/line/word)\r\n    //   imageName: String        // Name of source image/PDF page\r\n    //   rotateRadians: Number    // Page rotation in radians\r\n    //   numberScore: Number      // Placeholder scoring for numeric parsing\r\n    // }\r\n    let currentOcrResults = await ocrProcessing(allImages);\r\n\r\n    //cleaned OCR results\r\n    //returns same format as ocrProcessing\r\n    currentOcrResults =  ocrCleaning(currentOcrResults)\r\n    \r\n    //mutates currentOcrResults to score probability of word_text being a sought after csv value\r\n    //returns an object that maps csv_value to array of 'matched' ocr objects (fuse output form) \r\n    const fuseResults = scoreKeyOcr(currentOcrResults, field_names, fuseThreshold, resultThreshold)\r\n    \r\n    //mutates currentOcrResults to score probability of word_text being a sought after numerical value\r\n    scoreValOcr(currentOcrResults)\r\n    \r\n    //downloads mutated OcrResults\r\n    if (downloadOcrResults) {\r\n        console.log(\"requesting ocr json output download\")\r\n        const json = JSON.stringify(currentOcrResults, null, 2);\r\n        const json_blob = new Blob([json], { type: 'application/json' });\r\n        const json_url = URL.createObjectURL(json_blob);\r\n        const json_a = document.createElement('a');\r\n        json_a.href = json_url;\r\n        json_a.download = 'mutated_json_output.json';\r\n        document.body.appendChild(json_a);\r\n        json_a.click();\r\n        document.body.removeChild(json_a);\r\n        URL.revokeObjectURL(json_url);\r\n    }\r\n\r\n    //markup Ocr Results for display\r\n    if (displayOcrResults) {\r\n        const markedImages = await markupOcrResults(allImages, currentOcrResults)\r\n        displayImages(markedImages)\r\n    }\r\n\r\n    return currentOcrResults\r\n}\r\n\r\n/**\r\n * Processes an array of image files using Tesseract.js OCR with multiple workers.\r\n * Performs text recognition on each image and extracts word-level data including confidence, choices, bounding boxes, and rotation.\r\n * Returns a flattened array of word objects for all processed images.\r\n *\r\n * @param {File[]} files - Array of image files to be processed.\r\n * @returns {Promise<Object[]>} Resolves to an array of word objects containing OCR results for each image.\r\n * @throws {Error} Throws if no images are provided.\r\n */\r\nasync function ocrProcessing(files) {    \r\n    if (!files || !files.length) {\r\n        throw new Error('No images provided to ocrProcessing.');\r\n    }\r\n\r\n    // Create a scheduler and workers\r\n    const workerN = 7;\r\n    const scheduler = createScheduler();\r\n\r\n    const workerGen = async () => {\r\n        const worker = await createWorker(\"eng\", 1, { \r\n            logger: m => console.log(m), cachePath: \".\",\r\n            workerPath: chrome.runtime.getURL('node_modules/tesseract.js/dist/worker.min.js'),\r\n            corePath: chrome.runtime.getURL('node_modules/tesseract.js-core/tesseract-core-lstm.wasm.js'),\r\n            workerBlobURL: false,\r\n        });\r\n        await worker.setParameters({\r\n            tessedit_pageseg_mode: PSM.SPARSE_TEXT_OSD\r\n        });\r\n        scheduler.addWorker(worker);\r\n    };\r\n\r\n    await Promise.all(Array(workerN).fill(0).map(async () => await workerGen())); \r\n    \r\n\r\n    \r\n    const jobPromises = files.map(async (file) => {\r\n        return scheduler.addJob('recognize', file, {}, {\r\n            text: true,\r\n            blocks: true,\r\n            hocr: false,\r\n            tsv: false,\r\n        })\r\n        .then(out => {\r\n            // console.log(out) //for debugging\r\n            const wordsArray = [];\r\n            const imageName = file.name\r\n            const rotateRadians = out.data.rotateRadians\r\n            if (out.data?.blocks) {\r\n                out.data.blocks.forEach((block, blockIdx) => {\r\n                    block.paragraphs.forEach((para, paraIdx) => {\r\n                        const paragraphKey = `b_${blockIdx};p_${paraIdx}`;\r\n                        para.lines.forEach((line, lineIdx) => {\r\n                            const lineKey = `${paragraphKey};l_${lineIdx}`;\r\n                            line.words.forEach((word, wordIdx) => {\r\n                                var word_choices = word.choices\r\n                                if (word_choices.length < 2) {\r\n                                    word_choices = []\r\n                                }\r\n                                const uniqueKey = `${lineKey};w_${wordIdx};`\r\n                                wordsArray.push({\r\n                                    word_text: word.text,\r\n                                    word_confidence: word.confidence,\r\n                                    word_choices: word_choices,\r\n                                    word_y: word.bbox.y0,\r\n                                    word_x: word.bbox.x0,\r\n                                    height: word.bbox.y1 - word.bbox.y0,\r\n                                    width: word.bbox.x1 - word.bbox.x0,\r\n                                    potential_matches: new Set(),\r\n                                    uniqueKey: uniqueKey,\r\n                                    imageName: imageName,\r\n                                    rotateRadians: rotateRadians,\r\n                                    numberScore: 0\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            return wordsArray\r\n        })\r\n        .catch(error => ({\r\n            imageName: file.webkitRelativePath || file.name,\r\n            error: error.message,\r\n        }));\r\n    });\r\n\r\n    const results = await Promise.all(jobPromises);\r\n    const flatResults = results.flat()\r\n    // Terminate workers and save results\r\n    await scheduler.terminate();\r\n\r\n    console.log('OCR processing completed. \\n here are results:');\r\n    console.log(flatResults)\r\n    return flatResults;\r\n\r\n}\r\n\r\n/**\r\n * Processes array word objects from ocrProcessing\r\n * Performs cleaning of results (text normalization, noise filtering, word-regrouping)\r\n * Returns a filtered array of word objects with some changed metadata TODO\r\n *\r\n * @param {Object[]} rawOcrResults - Array of word objects produced by OCR.\r\n * @returns {Object[]} Filtered and cleaned array of word objects.\r\n * @throws {Error} If the input array is empty or invalid.\r\n */\r\nfunction ocrCleaning(rawOcrResults) {\r\n    //Removal of low score values\r\n    let workingOcrResults = rawOcrResults.filter(word => word.word_confidence >= 80);\r\n   \r\n    //Normalize text: convert all word_text to lowercase\r\n    workingOcrResults = workingOcrResults.map(wordObj => ({\r\n        ...wordObj,\r\n        word_text: wordObj.word_text.toLowerCase()\r\n    }));\r\n\r\n    //Token merging and Splitting TODO\r\n    //for now gets rid of words that are single characters that aren't numbers\r\n    workingOcrResults = rawOcrResults.filter(word => {\r\n        return word.word_text.length > 1 || /^\\d$/.test(word.word_text);\r\n    });\r\n\r\n    return workingOcrResults\r\n}\r\n\r\n/**\r\n * Performs fuzzy matching on all words in Ocr word list, finding the best matches per field_name (from ./formatCsvRow)\r\n * Mutates the matched Ocr word objects' potential_matches property by adding potential matches to each word where search threshold is maintained {\r\n *      'matched_word': csv field name\r\n        'word_score': fuse score result\r\n * }\r\n * Returns an object that maps all csv fields to the array of 'matched' ocr objects (fuse output form)\r\n *\r\n * @param {Object[]} currentOcrResults - Array of word objects produced by OCR (to be mutated)\r\n * @param {Object[]} fieldNames - Array of fieldName objects {\r\n *      csvfield: value as found in csv format,\r\n *      replacements: array of potential replacement values (unused),\r\n * }\r\n * @param {float} fuseThreshold - numerical threshold option for fuzzy searching with fuse.js\r\n * @param {float} resultThreshold - score threshold for accepting fuse result score\r\n * @returns {Object} - Map between csv field name and array of 'matched' ocr objects (fuse output form)\r\n */\r\nfunction scoreKeyOcr(currentOcrResults, field_names, fuseThreshold, resultThreshold) {\r\n    let fieldOcrMap = {}\r\n    for (var fieldNameObj of field_names){ \r\n        const csvFieldName = fieldNameObj.csvfield\r\n        const fuseOptions = {\r\n            isCaseSensitive: false,\r\n            includeScore: true,\r\n            ignoreDiacritics: true, \r\n            shouldSort: true,\r\n            includeMatches: false,\r\n            findAllMatches: true,\r\n            minMatchCharLength: 2,\r\n            location: 0,\r\n            threshold: fuseThreshold, //tentative\r\n            distance: 100,\r\n            useExtendedSearch: false,\r\n            ignoreLocation: true,\r\n            ignoreFieldNorm: true,\r\n            // fieldNormWeight: 1,\r\n            keys: [\"word_text\"]\r\n        };\r\n        const fuse = new Fuse(currentOcrResults, fuseOptions);\r\n        const pure_results = fuse\r\n            .search(csvFieldName)\r\n            .filter(result => result.score < resultThreshold);\r\n\r\n        //record of filtered results\r\n        var matchedOcrObjects = []\r\n        for (const pure_result of pure_results) {\r\n            matchedOcrObjects.push(pure_result)\r\n            //mutate ocrObject\r\n            pure_result.item.potential_matches.add({\r\n                'matched_word': csvFieldName,\r\n                'word_score': pure_result.score\r\n            })\r\n        }\r\n\r\n        fieldOcrMap[csvFieldName] = matchedOcrObjects\r\n    }\r\n    return fieldOcrMap\r\n}\r\n        \r\n/**\r\n * Performs a scoring on all words in Ocr word list that evaluates whether or not said word object is a number\r\n * Mutates each entry's numberScore property to reflect that\r\n * @param {Object[]} currentOcrResults - Array of word objects produced by OCR (to be mutated)\r\n * @returns {void} \r\n */\r\nfunction scoreValOcr(currentOcrResults) {\r\n    const replacementWeight = 0.2\r\n    const regexWeight = 0.3\r\n    //replacements are only applicable when word_confidence is between 80 and 90\r\n    const replacements = {\r\n        'o': '0', 'O': '0',\r\n        'I': '1', 'l': '1', 'L': '1',\r\n        'S': '5', 's': '5',\r\n        'B': '8',\r\n        'q': '9', 'g': '9',\r\n        'Z': '2', 'z': '2',\r\n        'G': '6',\r\n        'A': '4',\r\n        'T': '7'\r\n    };\r\n    for (var ocrObj of currentOcrResults){\r\n        let curWordText = ocrObj.word_text;\r\n        const wordConfidence = ocrObj.word_confidence\r\n            \r\n        //replacement evaluation\r\n        let charReplaceCount = 0\r\n        if (wordConfidence < 90) {\r\n            let replacedText = ''\r\n            for (let i = 0; i < curWordText.length; i++) {\r\n                const char = curWordText[i];\r\n                if (replacements.hasOwnProperty(char)) {\r\n                    replacedText += replacements[char];\r\n                    charReplaceCount++;\r\n                } else {\r\n                    replacedText += char;\r\n                }\r\n            }\r\n            curWordText = replacedText\r\n        }\r\n\r\n        //regex match evaluation\r\n        const match = curWordText.match(/(?<!\\d)(\\d+(\\.\\d+)?)(?!\\d)/);\r\n        if (!match) {\r\n            //number score stays the same as initial 0\r\n            continue\r\n        }\r\n        const extractedNumber = match[0]\r\n        if (extractedNumber.trim() === '' || isNaN(Number(extractedNumber))) {\r\n            //number score stays the same as initial 0\r\n            continue\r\n        }\r\n        let regexPenalty = 1 - extractedNumber.length / curWordText.length;\r\n        \r\n        //mutation\r\n        ocrObj.numberScore = Math.max(\r\n            0,\r\n            1\r\n            - charReplaceCount * replacementWeight\r\n            - regexPenalty * regexWeight\r\n        )\r\n    }\r\n}\r\n\r\n//---------------------------------------------------------------------------------------------\r\nexport async function findOCRDataStruct(ocr_object_list, angleTolerance = 10) {\r\n    let imageDic = {};\r\n    for (var wordObj of ocr_object_list) {\r\n        const pageKey = wordObj.imageName;\r\n        if (!(pageKey in imageDic)) {\r\n            imageDic[pageKey] = {\r\n                words: [],\r\n                numbers: []\r\n            };\r\n        }\r\n        //check if it is a number\r\n        if (wordObj.numberScore > 0.8) {\r\n            imageDic[pageKey].numbers.push(wordObj);\r\n        } else {\r\n            imageDic[pageKey].words.push(wordObj);\r\n        }\r\n    }\r\n    //used dictionary to find innate structure\r\n    for (var pageObj of Object.values(imageDic)) {\r\n        const words = pageObj.words\r\n        const numbers = pageObj.numbers\r\n        //create object that references all distances between word and number\r\n        let wordDic = {};\r\n        for (const word of words) {\r\n            let numberDic = {}\r\n                for (const number of numbers) {\r\n                    const dx = number.word_x - word.word_x\r\n                    const dy = number.word_y - word.word_y\r\n                    const distance = Math.sqrt(dx * dx + dy * dy);\r\n                    const angle = Math.atan2(dy, dx) * (180 / Math.PI);\r\n                    numberDic[number.uniqueKey] = {\r\n                        dx,\r\n                        dy,\r\n                        distance,\r\n                        angle,\r\n                        key_x: word.word_x,\r\n                        key_y: word.word_y\r\n                    }\r\n                }\r\n            wordDic[word.uniqueKey] = numberDic\r\n        }\r\n        //create object that organizes above object into reoccuring similar postional offsets\r\n        let patterns = []\r\n        for (const [wordkey, numberObj] of Object.entries(wordDic)) {\r\n            for (const [numberkey, distanceInfo] of Object.entries(numberObj)) {\r\n                //searching existing patterns for a match\r\n                var foundSameAngle = false\r\n                for (var pattern of patterns) {\r\n                    const newAverageAngle = (pattern.averagedAngle * pattern.count + distanceInfo.angle) / (pattern.count + 1)\r\n                    const isSameAngle = Math.abs(newAverageAngle - pattern.averagedAngle) <= angleTolerance\r\n                    if (!isSameAngle) continue;\r\n                    const horizontalAngle = isHorizontalAngle(distanceInfo.angle)\r\n                    const verticalAngle = isVerticalAngle(distanceInfo.angle)\r\n                    const isAxial = horizontalAngle || verticalAngle\r\n                    const sameWord = wordkey in pattern.keyValueInfo;\r\n                    \r\n                    if (sameWord && !isAxial) continue;\r\n                    if (!sameWord) {\r\n                        pattern.keyValueInfo[wordkey] = {};\r\n                    }\r\n\r\n                    pattern.keyValueInfo[wordkey][numberkey] = distanceInfo;\r\n                    pattern.averagedAngle = newAverageAngle;\r\n                    pattern.count += 1;\r\n                    foundSameAngle = true\r\n                    break\r\n                }\r\n                if (!foundSameAngle) {\r\n                    patterns.push({\r\n                        keyValueInfo: {\r\n                            [wordkey]: {\r\n                                [numberkey]: distanceInfo\r\n                            }\r\n                        },\r\n                        averagedAngle: distanceInfo.angle,\r\n                        count: 1\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        pageObj['patterns'] = patterns\r\n    }\r\n    return imageDic\r\n}\r\n\r\n\r\n\r\n\r\n//mutates imageKeyValList to include information about keys with structure\r\nexport async function findDataStructPattern(imageKeyValueList) {\r\n    console.log(\"running findDataStructPattern\")\r\n    console.log(\"imageKeyValueList:\")\r\n    console.log(imageKeyValueList)\r\n    for (var pageObj of Object.values(imageKeyValueList)) {\r\n        pageObj['keyValStructPattern'] = findPageDataStructPattern(pageObj)\r\n    }\r\n}\r\n\r\n//identifies if there is a positional pattern between keywords and values by noting distances between each keyword and all values\r\n//notes if distance/direction is the same and is indicative of a positional data structure\r\n//also notes keys in relation to each otehr\r\n\r\nfunction findPageDataStructPattern(pageObj, angleTolerance = 5) {\r\n    console.log(\"running findPageDataStructPattern\")\r\n    console.log(\"pageObj: \")\r\n    console.log(pageObj)\r\n\r\n    const keywords = pageObj.keys \r\n    const values = pageObj.values\r\n\r\n    const keyValueDistances = {};\r\n\r\n    for (const key of keywords) {\r\n        let valueDic = {}\r\n        for (const value of values) {\r\n            const dx = value.word_x - key.word_x\r\n            const dy = value.word_y - key.word_y\r\n            const distance = Math.sqrt(dx * dx + dy * dy);\r\n            const angle = Math.atan2(dy, dx) * (180 / Math.PI);\r\n            valueDic[value.uniqueKey] = {\r\n                valUniqueKey: value.uniqueKey,\r\n                dx,\r\n                dy,\r\n                distance,\r\n                angle\r\n            }\r\n        }\r\n        keyValueDistances[key.uniqueKey] = valueDic\r\n    }\r\n\r\n    //\r\n    let evidenceGroupings = []\r\n    console.log(`iterating over the following:`)\r\n    console.log(keyValueDistances)\r\n    //identifies key and value pairs based on matching angles\r\n    for (const keyUniqueKey of Object.keys(keyValueDistances)) {\r\n\r\n        const valueDic = keyValueDistances[keyUniqueKey]\r\n        console.log(`nested iterating over the following:`)\r\n        console.log(valueDic)\r\n        for (const valueUniqueKey of Object.keys(valueDic)) {\r\n            const valueInfo = valueDic[valueUniqueKey]\r\n            //find if there is group match\r\n            let foundGroup = false\r\n            for (var grouping of evidenceGroupings) {\r\n                const newAverageAngle = (grouping.averagedAngle * grouping.count + valueInfo.angle) / (grouping.count + 1)\r\n                const sameAngle = Math.abs(newAverageAngle - grouping.averagedAngle) <= angleTolerance\r\n                \r\n                if (!sameAngle) continue;\r\n                \r\n                const horizontalAngle = isHorizontalAngle(valueInfo.angle)\r\n                const verticalAngle = isVerticalAngle(valueInfo.angle)\r\n                const isDirectional = horizontalAngle || verticalAngle\r\n                const exists = keyUniqueKey in grouping.keyValuePairs;\r\n\r\n                if (exists && isDirectional) continue;\r\n\r\n                if (!exists) {\r\n                    grouping.keyValuePairs[keyUniqueKey] = [];\r\n                }\r\n\r\n                grouping.keyValuePairs[keyUniqueKey].push(valueInfo);\r\n                grouping.averagedAngle = newAverageAngle;\r\n                grouping.count += 1;\r\n                foundGroup = true\r\n                break\r\n            }\r\n            //create new group if none found\r\n            if (!foundGroup) {\r\n                evidenceGroupings.push({\r\n                    keyValuePairs: {\r\n                        [keyUniqueKey]: [valueInfo]\r\n                    },\r\n                    averagedAngle: valueInfo.angle,\r\n                    count: 1\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n    return evidenceGroupings.filter(grouping => grouping.count > 1)\r\n}\r\n\r\nfunction isHorizontalAngle(angle, tolerance = 10) {\r\n    return (\r\n        Math.abs(angle) <= tolerance ||        // near 0° (right)\r\n        Math.abs(angle - 180) <= tolerance     // near 180° (left)\r\n    );\r\n}\r\n\r\nfunction isVerticalAngle(angle, tolerance = 10) {\r\n    return (\r\n        Math.abs(angle - 90) <= tolerance ||   // near 90° (down)\r\n        Math.abs(angle + 90) <= tolerance      // near -90° (up)\r\n    );\r\n}","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/**\n * pdfjsVersion = 5.3.31\n * pdfjsBuild = 47ad820d9\n */\n\n;// ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  SIGNATURE: 101\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    const {\n      platform,\n      userAgent\n    } = navigator;\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox: userAgent.includes(\"Firefox\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Promise.try !== \"function\") {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\n;// ./src/display/display_utils.js\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(window.screen.availWidth * window.screen.availHeight * this.pixelRatio ** 2 * (1 + capAreaFactor / 100));\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\n\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n  }\n  #addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      _uiManager.delete();\n    }, {\n      signal: _uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n    this.#altText = altText;\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this.#signatureManager = signatureManager;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      const ac = new AbortController();\n      const signal = this.combinedSignal(ac);\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        ac.abort();\n        activeLayer?.toggleDrawing(true);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      this._editorUndoBar?.hide();\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId || editor.id === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  isSelected = false;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      style\n    } = this.div;\n    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    if (this.#altText) {\n      await this._editToolbar.addAltText(this.#altText);\n    }\n    return this._editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10n);\n    this.#altText = new AltText(this);\n    if (this.#accessibilityData) {\n      this.#altText.data = this.#accessibilityData;\n      this.#accessibilityData = null;\n    }\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n    return true;\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n    return true;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  get canChangeContent() {\n    return false;\n  }\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id\n    });\n  }\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n}\n\n;// ./src/display/api_utils.js\n\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\n;// ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n;// ./src/display/filter_factory.js\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\nif (isNodeJS) {\n  warn(\"Please use the `legacy` build in Node.js environments.\");\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const {\n          fillStyle,\n          strokeStyle\n        } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height) {\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](path);\n      return;\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](path);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(path) {\n    this.stroke(path);\n  }\n  fill(path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(path, intersect);\n    }\n  }\n  eoFill(path) {\n    this.pendingEOFill = true;\n    this.fill(path);\n  }\n  fillStroke(path) {\n    this.fill(path, false);\n    this.stroke(path, false);\n    this.consumePath(path);\n  }\n  eoFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  closeFillStroke(path) {\n    this.fillStroke(path);\n  }\n  closeEOFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  endPath(path) {\n    this.consumePath(path);\n  }\n  rawFillPath(path) {\n    this.ctx.fill(path);\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      return;\n    }\n    const newPath = new Path2D();\n    const invTransf = ctx.getTransform().invertSelf();\n    for (const {\n      transform,\n      x,\n      y,\n      fontSize,\n      path\n    } of paths) {\n      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n    }\n    ctx.clip(newPath);\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(matrix) {\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill || patternStroke) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n    this.current.patternStroke = true;\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(color) {\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent() {\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(color) {\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  setFillTransparent() {\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath();\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/pdf_objects.js\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    });\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.3.31\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : isNodeJS ? PDFNodeStream : PDFNetworkStream;\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n  #progressiveDoneListeners = [];\n  #progressiveReadListeners = [];\n  #progressListeners = [];\n  #rangeListeners = [];\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this.#capability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n  #messageHandler = null;\n  #port = null;\n  #webWorker = null;\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts = new WeakMap();\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n    this.fromPort = params => {\n      deprecated(\"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\");\n      if (!params?.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      return this.create(params);\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n  }\n  get promise() {\n    return this.#capability.promise;\n  }\n  #resolve() {\n    this.#capability.resolve();\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this.#port;\n  }\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {});\n    this.#resolve();\n  }\n  #initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this.#setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this.#webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this.#setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this.#setupFakeWorker();\n  }\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this.#capability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this.#port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this.#capability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.create - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.3.31\";\nconst build = \"47ad820d9\";\n\n;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      data\n    } = this;\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id);\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n    return true;\n  }\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n    return true;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  get canChangeContent() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n        Util.rectBoundingBox(...bbox, minMax);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\nclass HighlightOutliner {\n  #box;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  #type;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa\n        }\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.#opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const A = buf[(i << 2) + 3];\n      if (A === 0) {\n        max = out[i] = 0xff;\n        continue;\n      }\n      const pix = out[i] = buf[i << 2];\n      if (pix > max) {\n        max = pix;\n      }\n      if (pix < min) {\n        min = pix;\n      }\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0; i < N; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.signatureManager && this.#description !== null) {\n      await toolbar.addEditSignatureButton(this._uiManager.signatureManager, this.#signatureUUID, this.#description);\n      toolbar.show();\n    }\n    return toolbar;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.#description = description;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.#description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor({\n      mode: AnnotationEditorType.STAMP\n    }, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._editToolbar.hide();\n      this._uiManager.editAltText(this, true);\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    editor.annotationElementId = data.id || null;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, build, createValidAbsoluteUrl, fetchData, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map","import * as pdfjsLib from './node_modules/pdfjs-dist/build/pdf.mjs';\r\npdfjsLib.GlobalWorkerOptions.workerSrc = './node_modules/pdfjs-dist/build/pdf.worker.mjs';\r\n\r\n\r\nexport async function cleanImage(file) {\r\n    // Placeholder for image cleaning logic\r\n    // This function should handle the image processing and return a cleaned image\r\n    return file; // For now, just return the original file\r\n}\r\n/**\r\n * Filters and processes uploaded files to return only valid image files\r\n * Converts PDF pages to images and optionally cleans each image\r\n *\r\n * @param {File[]} files - Array of uploaded File objects (images and/or PDFs)\r\n * @returns {Promise<File[]>} - Promise resolving to an array of processed image File objects\r\n * @throws {Error} - Throws if no valid images remain after filtering and processing\r\n */\r\nexport async function filterImageFiles(files) {\r\n    \r\n    // Separate image and PDF files\r\n    const imageFiles = Array.from(files)\r\n        .filter(file => file.type.startsWith('image/'));\r\n    const pdfFiles = Array.from(files).filter(file => file.type === 'application/pdf');\r\n\r\n    // Convert PDF files to File objects\r\n    function canvasToFile(canvas, name) {\r\n        return new Promise(resolve => {\r\n            canvas.toBlob(blob => {\r\n                resolve(new File([blob], name, { type: 'image/png' }));\r\n            }, 'image/png');\r\n        });\r\n    }\r\n\r\n    const convertedPdfFiles = [];\r\n    for (const pdffile of pdfFiles) {\r\n        try {\r\n            const arrayBuffer = await pdffile.arrayBuffer();\r\n            const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });\r\n            const pdf = await loadingTask.promise;\r\n            console.log(`PDF loaded: ${pdffile.name}`);\r\n            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\r\n                const page = await pdf.getPage(pageNum);\r\n                const viewport = page.getViewport({ scale: 2 });\r\n                const canvas = document.createElement('canvas');\r\n                const context = canvas.getContext('2d');\r\n                canvas.width = viewport.width;\r\n                canvas.height = viewport.height;\r\n                await page.render({ canvasContext: context, viewport }).promise;\r\n                const uniqueName = `${pdffile.name}_page${pageNum}.png`;\r\n                const file = await canvasToFile(canvas, uniqueName);\r\n                convertedPdfFiles.push(file);\r\n            }\r\n        } catch (err) {\r\n            console.error(`Error loading ${pdffile.name}:`, err);\r\n        }\r\n    }\r\n\r\n    // Combine all image sources as File objects\r\n    const allImages = [...imageFiles, ...convertedPdfFiles];\r\n    if (!Array.isArray(allImages) || allImages.length === 0) {\r\n        throw new Error('No valid images found after filtering.');\r\n    }\r\n\r\n    // Clean all images and filter out failures\r\n    const processedImages = await Promise.all(\r\n        allImages.map(async image => {\r\n            // Clean image (async)\r\n            return await cleanImage(image);\r\n        })\r\n    );\r\n\r\n    // Remove any undefined images\r\n    return processedImages.filter(img => img !== undefined);\r\n}","import {processDocumentCollection} from './imageProcessor.js'\r\nimport {filterImageFiles} from './imageCleaner.js'\r\nimport {processToCsv} from './formatCsvRow.js'\r\n\r\ndocument.querySelectorAll('input[type=\"range\"]').forEach(slider => {\r\n    const spanId = slider.id + '-value';\r\n    const display = document.getElementById(spanId);\r\n    if (display) {\r\n    display.textContent = slider.value;\r\n    slider.addEventListener('input', () => {\r\n        display.textContent = slider.value;\r\n    });\r\n    }\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    document.getElementById('process-btn-test').addEventListener('click', async () => {\r\n        //fuse parameters\r\n        const fuseSearchThreshold = parseFloat(document.getElementById('slider-fuse-search-threshold').value);\r\n        const fuseMatchThreshold = parseFloat(document.getElementById('slider-fuse-match-threshold').value);\r\n        const downloadOcrResults = document.getElementById('downloadOCRJson').checked\r\n        const displayOcrResults = document.getElementById('displayOCRJson').checked\r\n        const downloadCsv = document.getElementById('downloadCsv').checked\r\n        const displayKeyValStruct = document.getElementById('displayKeyValueStruct').checked\r\n        \r\n        try {\r\n            //filtering image files\r\n            const files = document.getElementById('bloodwork-files').files;\r\n            const allImages = await filterImageFiles(files);\r\n\r\n            const extractedResults = processDocumentCollection(allImages,\r\n                fuseSearchThreshold,\r\n                fuseMatchThreshold,\r\n                downloadOcrResults,\r\n                displayOcrResults\r\n            );\r\n                        \r\n        } catch (err) {\r\n            console.error('Error during processing:', err);\r\n        }\r\n    });\r\n});\r\n\r\n\r\n"],"names":["readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","target","error","code","Error","readAsArrayBuffer","loadImage","async","image","data","test","atob","split","map","c","charCodeAt","resp","fetch","arrayBuffer","HTMLElement","tagName","src","poster","toBlob","OffscreenCanvas","convertToBlob","File","Blob","Uint8Array","module","exports","workerPath","workerBlobURL","worker","URL","type","Worker","createObjectURL","defaultOptions","spawnWorker","terminateWorker","onMessage","send","getId","jobCounter","id","_id","action","payload","resolveURL","s","window","location","href","options","opts","forEach","key","resolvePaths","createJob","log","OEM","workerCounter","langs","oem","LSTM_ONLY","_options","config","logger","errorHandler","promises","currentLangs","currentOem","currentConfig","lstmOnlyCore","DEFAULT","includes","legacyCore","workerResReject","workerResResolve","workerRes","event","message","startJob","jobId","workerId","loadLanguageInternal","_langs","langPath","dataPath","cachePath","cacheMethod","gzip","lstmOnly","legacyLang","initializeInternal","_oem","_config","status","promiseId","userJobId","resolveObj","load","console","warn","writeText","path","text","method","args","readText","encoding","removeFile","FS","reinitialize","TESSERACT_ONLY","TESSERACT_LSTM_COMBINED","filter","x","push","length","then","setParameters","params","recognize","output","detect","terminate","corePath","logging","catch","AFR","AMH","ARA","ASM","AZE","AZE_CYRL","BEL","BEN","BOD","BOS","BUL","CAT","CEB","CES","CHI_SIM","CHI_TRA","CHR","CYM","DAN","DEU","DZO","ELL","ENG","ENM","EPO","EST","EUS","FAS","FIN","FRA","FRK","FRM","GLE","GLG","GRC","GUJ","HAT","HEB","HIN","HRV","HUN","IKU","IND","ISL","ITA","ITA_OLD","JAV","JPN","KAN","KAT","KAT_OLD","KAZ","KHM","KIR","KOR","KUR","LAO","LAT","LAV","LIT","MAL","MAR","MKD","MLT","MSA","MYA","NEP","NLD","NOR","ORI","PAN","POL","POR","PUS","RON","RUS","SAN","SIN","SLK","SLV","SPA","SPA_OLD","SQI","SRP","SRP_LATN","SWA","SWE","SYR","TAM","TEL","TGK","TGL","THA","TIR","TUR","UIG","UKR","URD","UZB","UZB_CYRL","VIE","YID","prefix","cnt","Math","random","toString","slice","createWorker","finally","OSD_ONLY","AUTO_OSD","AUTO_ONLY","AUTO","SINGLE_COLUMN","SINGLE_BLOCK_VERT_TEXT","SINGLE_BLOCK","SINGLE_LINE","SINGLE_WORD","CIRCLE_WORD","SINGLE_CHAR","SPARSE_TEXT","SPARSE_TEXT_OSD","RAW_LINE","handler","onmessage","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","schedulerCounter","workers","runningWorkers","jobQueue","getNumWorkers","dequeue","wIds","queue","job","w","shift","apply","addWorker","addJob","wid","getQueueLen","version","createScheduler","Tesseract","languages","PSM","setLogging","env","WorkerGlobalScope","document","process","packet","postMessage","_logging","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","isArray","Array","getTag","isString","isNumber","isObject","isDefined","isBlank","trim","KeyStore","_keys","_keyMap","totalWeight","createKey","weight","get","keyId","toJSON","JSON","stringify","getFn","createKeyPath","createKeyId","INVALID_KEY_WEIGHT_VALUE","join","Config","isCaseSensitive","ignoreDiacritics","includeScore","shouldSort","sortFn","a","b","score","idx","includeMatches","findAllMatches","minMatchCharLength","threshold","distance","useExtendedSearch","list","arr","deepGet","index","isObjectLike","isBoolean","baseToString","len","ignoreLocation","ignoreFieldNorm","fieldNormWeight","SPACE","FuseIndex","norm","mantissa","cache","Map","m","pow","numTokens","match","has","n","parseFloat","round","set","clear","isCreated","setIndexRecords","setSources","docs","records","setKeys","_keysMap","doc","docIndex","_addString","_addObject","add","size","removeAt","splice","getValueForItemAtKeyId","item","v","$","keyIndex","subRecords","stack","nestedArrIndex","subRecord","k","createIndex","myIndex","computeScore$1","pattern","errors","currentLocation","expectedLocation","accuracy","proximity","abs","MAX_BITS","createPatternAlphabet","mask","char","stripDiacritics","String","normalize","str","replace","BitapSearch","toLowerCase","chunks","addChunk","startIndex","alphabet","remainder","end","substr","searchIn","isMatch","indices","allIndices","totalScore","hasMatches","patternAlphabet","patternLen","textLen","max","min","currentThreshold","bestLocation","computeMatches","matchMask","indexOf","lastBitArr","finalScore","binMax","binMin","binMid","floor","start","bitArr","j","charMatch","matchmask","convertMaskToIndices","search","BaseMatch","isMultiMatch","getMatch","multiRegex","isSingleMatch","singleRegex","exp","matches","FuzzyMatch","super","_bitapSearch","IncludeMatch","searchers","startsWith","endsWith","searchersLen","SPACE_RE","MultiMatchSet","Set","registeredSearchers","createSearcher","searcherClass","condition","LogicalOperator","KeyType","isExpression","query","convertToExplicit","parse","auto","isQueryPath","isPath","isLeaf","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","searcher","node","children","operator","transformMatches","refIndex","transformScore","Fuse","_keyStore","setCollection","_docs","_myIndex","remove","predicate","results","getIndex","limit","_searchStringList","_searchObjectList","_searchLogical","Number","EPSILON","computeScore","sort","transformers","transformer","format","expression","evaluate","_findMatches","res","child","resultMap","expResults","_typeof","o","ownKeys","e","r","t","getOwnPropertySymbols","getOwnPropertyDescriptor","_defineProperty","toPrimitive","_toPrimitive","_toPropertyKey","parseIndex","parseQuery","register","queryItem","found","token","_","numMatches","qLen","pLen","field_names","csvfield","replacements","u","_regeneratorDefine2","f","p","y","G","d","bind","l","_regenerator","_createForOfIteratorHelper","_arrayLikeToArray","from","_unsupportedIterableToArray","_n","F","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","markupOcrResults","_x","_x2","_markupOcrResults","_callee","originalImages","ocrResults","markedImages","_iterator","_step","_loop","_t","_context2","file","img","Image","original_file","image_name","canvas","ctx","cur_page_words","_iterator2","_step2","cur_page_word","markedBlob","markedFile","_context","createElement","width","height","getContext","drawImage","word_object","imageName","beginPath","rect","word_x","word_y","potential_matches","strokeStyle","numberScore","lineWidth","stroke","save","font","fillStyle","textAlign","textBaseline","fillText","word_text","restore","revokeObjectURL","_regeneratorValues","displayImages","_x3","_displayImages","_callee2","image_list","imageWindow","_iterator3","_step3","url","_context3","open","write","close","alert","_objectSpread","getOwnPropertyDescriptors","defineProperties","processDocumentCollection","_x4","_x5","_processDocumentCollection","allImages","fuseThreshold","resultThreshold","downloadOcrResults","displayOcrResults","currentOcrResults","json","json_blob","json_url","json_a","ocrProcessing","rawOcrResults","word","word_confidence","wordObj","scoreKeyOcr","scoreValOcr","download","body","appendChild","click","removeChild","_x6","_ocrProcessing","_callee5","files","scheduler","workerGen","jobPromises","flatResults","_context5","_ref","chrome","getURL","tessedit_pageseg_mode","all","fill","_callee3","_ref3","_callee4","_context4","blocks","hocr","tsv","out","_out$data","wordsArray","rotateRadians","block","blockIdx","paragraphs","para","paraIdx","paragraphKey","concat","lines","line","lineIdx","lineKey","words","wordIdx","word_choices","choices","uniqueKey","confidence","bbox","y0","x0","y1","x1","webkitRelativePath","_x9","flat","fieldOcrMap","csvFieldName","pure_results","matchedOcrObjects","pure_result","ocrObj","curWordText","wordConfidence","charReplaceCount","replacedText","extractedNumber","regexPenalty","Date","Intervention","AST","AST_RangeLow","AST_RangeHigh","ALT","ALT_RangeLow","ALT_RangeHigh","GLOBULIN","GLOBULIN_RangeLow","GLOBULIN_RangeHigh","BUN","BUN_RangeLow","BUN_RangeHigh","FASTING_GLUCOSE","FASTING_GLUCOSE_RangeLow","FASTING_GLUCOSE_RangeHigh","A1C","A1C_RangeLow","A1C_RangeHigh","RBC","RBC_RangeLow","RBC_RangeHigh","HGB","HGB_RangeLow","HGB_RangeHigh","HCT","HCT_RangeLow","HCT_RangeHigh","WBC","WBC_RangeLow","WBC_RangeHigh","PLATELETS","PLATELETS_RangeLow","PLATELETS_RangeHigh","SODIUM","SODIUM_RangeLow","SODIUM_RangeHigh","POTASSIUM","POTASSIUM_RangeLow","POTASSIUM_RangeHigh","CHLORIDE","CHLORIDE_RangeLow","CHLORIDE_RangeHigh","CALCIUM","CALCIUM_RangeLow","CALCIUM_RangeHigh","CO2","CO2_RangeLow","CO2_RangeHigh","IGF1","IGF1_RangeLow","IGF1_RangeHigh","FASTING_INSULIN","FASTING_INSULIN_RangeLow","FASTING_INSULIN_RangeHigh","BETA_HYDROXYBUTYRATE","BETA_HYDROXYBUTYRATE_RangeLow","BETA_HYDROXYBUTYRATE_RangeHigh","B12","B12_RangeLow","B12_RangeHigh","MAGNESIUM","MAGNESIUM_RangeLow","MAGNESIUM_RangeHigh","CRP","CRP_RangeLow","CRP_RangeHigh","IRON","IRON_MaleRangeLow","IRON_MaleRangeHigh","IRON_FemaleRangeLow","IRON_FemaleRangeHigh","CHOLESTEROL","CHOLESTEROL_RangeLow","CHOLESTEROL_RangeHigh","HOMOCYSTEINE","HOMOCYSTEINE_RangeLow","HOMOCYSTEINE_RangeHigh","Vitamin_D","Vitamin_D_RangeLow","Vitamin_D_RangeHigh","isNodeJS","versions","nw","electron","FONT_IDENTITY_MATRIX","LINE_FACTOR","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","SIGNATURE","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","closeStroke","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","verbosity","setVerbosityLevel","level","isInteger","getVerbosityLevel","msg","unreachable","assert","cond","createValidAbsoluteUrl","baseUrl","addDefaultProtocol","dots","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","protocol","_isValidProtocol","updateUrlHash","hash","allowRel","shadow","prop","nonSerializable","BaseException","PasswordException","UnknownErrorException","details","InvalidPDFException","ResponseException","missing","FormatError","AbortException","bytesToString","bytes","MAX_ARGUMENT_COUNT","fromCharCode","strBuf","chunkEnd","chunk","subarray","stringToBytes","util_FeatureTest","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","isOffscreenCanvasSupported","isImageDecoderSupported","ImageDecoder","platform","userAgent","navigator","isAndroid","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","CSS","supports","hexNumbers","padStart","Util","makeHexColor","g","scaleMinMax","minMax","temp","m1","m2","applyTransform","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","axialAlignedBoundingBox","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","inverseTransform","singularValueDecompose2dScale","matrix","first","second","sqrt","normalizeRect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","rectBoundingBox","x2","x3","y2","y3","mt","tt","ttt","delta","sqrtDelta","bezierBoundingBox","NormalizeRegex","NormalizationMap","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","MathClamp","toBase64Util","toBase64","btoa","try","sumPrecise","numbers","reduce","SVG_NS","PixelsPerInch","static","PDF","fetchData","isValidFetchUrl","baseURI","response","ok","statusText","request","XMLHttpRequest","responseType","onreadystatechange","readyState","DONE","responseText","PageViewport","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","rawDims","dims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","substring","isPdfFile","filename","StatTimer","started","times","time","now","timeEnd","outBuf","longest","padEnd","noContextMenu","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","input","RegExp","exec","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getRGB","color","colorRGB","getCurrentTransform","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","style","useRound","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","capAreaFactor","maxAreaScale","Infinity","maxWidthScale","maxHeightScale","capPixels","maxScale","devicePixelRatio","winPixels","ceil","screen","availWidth","availHeight","SupportedImageMimeTypes","EditorToolbar","editor","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","classList","signal","_uiManager","_signal","addEventListener","buttons","className","append","position","toolbarPosition","direction","insetInlineEnd","top","_focusEventsAllowed","element","capture","hide","hideDropdown","show","shown","editorType","button","tabIndex","delete","divider","addAltText","altText","prepend","addColorPicker","colorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","updateEditSignatureButton","description","title","destroy","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","ImageManager","_isSVGFittingCanvas","willReadFrequently","decode","getImageData","rawData","bitmap","refCounter","isSvg","mustRemoveAspectRatioPromise","imageElement","imagePromise","svgUrl","readAsDataURL","createImageBitmap","getFromFile","lastModified","getFromUrl","getFromBlob","blobPromise","getFromId","getFromCanvas","offscreen","transferToImageBitmap","getSvgUrl","deleteId","transferFromImageBitmap","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","KeyboardManager","callbacks","allKeys","callback","isMacKey","at","altKey","ctrlKey","metaKey","shiftKey","bubbles","checker","ColorManager","_colors","colors","visibility","colorScheme","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","AnnotationEditorUIManager","AbortController","_editorUndoBar","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","hasSomethingToControl","textInputChecker","_self","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","mlManager","editorUndoBar","supportsPinchToZoom","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_supportsPinchToZoom","abort","layer","clearTimeout","combinedSignal","ac","AbortSignal","any","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","pair","highlightColorNames","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","firstTime","getSignature","switchToMode","mode","on","once","dispatch","source","setPreference","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","textLayer","currentLayer","hasTextLayer","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","closest","getSelectionBoxes","empty","isNoneMode","createAndAddNewEditor","showAllEditors","addToAnnotationStorage","setValue","activeLayer","toggleDrawing","pointerup","blur","hasSelection","lastEditor","lastActiveElement","keydown","keyup","copy","cut","paste","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","editors","serialized","serialize","clipboardData","setData","getData","ex","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","entries","some","assign","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","promise","withResolvers","loadSignatures","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateColor","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","updateUIForDefaultProperties","toggleSelected","select","isSelected","firstSelectedEditor","cleanUndoStack","drawingEditor","endDrawingSession","commit","noCommit","totalX","totalY","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","setCanvas","addMissingCanvas","AltText","added","review","initialize","l10n","_l10n","label","onClick","_reportTelemetry","guessedText","focusVisible","hasData","setGuessedText","generatedAltText","toggleAltTextBadge","badge","isForCopying","decorative","textWithDisclaimer","cancel","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","removeAttribute","textContent","parentNode","getElementForAltText","TouchManager","isPinchingDisabled","isPinchingStopped","onPinchStart","onPinching","onPinchEnd","passive","MIN_TOUCH_DISTANCE_TO_PINCH","touches","pointerDownAC","cancelPointerDown","pointerType","opt","onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","screen0X","screen0Y","screen1X","screen1Y","touchInfo","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","hypot","pDistance","origin","AnnotationEditor","_isCopy","_editToolbar","_initialOptions","_initialData","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","_type","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","focusin","focusout","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","_onTranslating","translate","scrollIntoView","findNewParent","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","angle","pageTranslationToScreen","parentScale","setDims","fixDims","widthPercent","heightPercent","getInitialTranslation","classes","savedDraggable","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","_onResized","newWidth","newHeight","_round","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","deltaX","deltaY","ratioX","ratioY","fromKeyboard","lastScreenX","lastScreenY","oldDiag","_onResizing","altTextFinish","addEditToolbar","removeEditToolbar","addContainer","editToolbarDiv","before","getClientDimensions","addAltTextButton","altTextData","guessedAltText","setGuessedAltText","serializeAltText","hasAltText","hasAltTextData","defaultL10nId","maxWidth","maxHeight","isResizable","_origin","prevDistance","factor","transfCenterPoint","newTransfCenterPoint","pointerdown","hasDraggingStarted","cancelDrag","_onStopDragging","clientX","clientY","pointerId","_onStartDragging","isPrimary","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","isInEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","bottom","right","innerHeight","innerWidth","rotate","_angle","serializeDeleted","popupRef","accessibilityData","isCopy","timeout","makeResizable","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","lastChild","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","canChangeContent","dblclick","_editorType","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","ArrayBuffer","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","resetModifiedIds","modifiedIds","ids","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","baseFontName","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","otherRequest","_loadTestFont","int32","offset","spliceString","insert","called","XXXX_VALUE","checksum","fontFamily","isFontReady","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","objId","cmds","Path2D","fontExtraProperties","getFactoryUrlProp","isRefProxy","num","gen","isValidExplicitDest","validRef","validName","dest","page","zoom","argsLen","allowNull","LoopbackPort","listener","rmAbort","aborted","onAbort","removeEventListener","onFn","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","stream","capability","reason","actionName","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","onPull","onCancel","success","streamController","dataReason","allSettled","BaseCanvasFactory","enableHWA","_createCanvas","canvasAndContext","DOMCanvasFactory","BaseCMapReaderFactory","isCompressed","_fetch","cMapData","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","DOMFilterFactory","docId","contain","svg","createElementNS","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","step","newStart","newStep","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","DOMStandardFontDataFactory","BaseWasmFactory","DOMWasmFactory","node_utils_fetchData","fs","getBuiltinModule","readFile","NodeFilterFactory","NodeCanvasFactory","createRequire","require","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","PathType","applyBoundingBox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","ownerBBox","current","getClippedPathBoundingBox","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","baseTransform","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p2","p3","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","Float32Array","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","fillColor","strokeColor","convertBlackAndWhiteToRGBA","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","CachedCanvases","canvasFactory","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","patternStroke","fillAlpha","strokeAlpha","activeSMask","transferMaps","clipBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","op","path2d","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","needRestore","paths","pendingTextPaths","invTransf","preMultiplySelf","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","invPatternTransform","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","GlobalWorkerOptions","workerPort","workerSrc","Metadata","parsedData","getRaw","INTERNAL","OptionalContentGroup","renderingIntent","usage","rbGroups","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","policy","setVisibility","preserveRB","rbGroup","otherId","setOCGState","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","onProgress","_removeRangeReader","reader","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","read","requestCapability","_end","_queuedChunk","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","validateRangeRequestCapabilities","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","decoder","TextDecoder","fatal","quotindex","replaceAll","extvalue","encodingend","charset","hex","getFilenameFromContentDispositionHeader","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","abortController","credentials","redirect","getArrayBuffer","PDFFetchStream","_responseOrigin","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","getReader","_readCapability","responseOrigin","NetworkManager","currXhrId","pendingRequests","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","lengthComputable","_requestId","_close","urlRegex","PDFNodeStream","sourceUrl","pathToFileURL","parseUrlOrPath","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_readableStream","lstat","stat","_setReadableStream","createReadStream","_error","readableStream","INITIAL_DATA","PDFObjects","TextLayer","FontInspector","WeakMap","textContentSource","fontFamilyMap","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","cleanup","alpha","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","XfaText","xfa","walk","shouldBuildText","attributes","getDocument","task","PDFDocumentLoadingTask","getUrlProp","Buffer","getDataProp","password","rangeTransport","PDFDataRangeTransport","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","port","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","transport","WorkerTransport","_transport","_capability","onPassword","_pendingDestroy","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","_intentStates","getViewport","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","_isSameOrigin","otherUrl","base","other","_createCDNWrapper","wrapper","fromPort","terminateEarly","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","import","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","modifiedIdsHash","terminated","sink","readyReason","_numPages","htmlForXfa","updatePassword","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","imageData","refStr","metadata","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_canvas","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","G_CMYK","G_RGB","G_rgb","G_HTML","RGB_G","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","RGB_CMYK","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","html","storage","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","root","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","titleObj","contentsObj","richText","_isEditable","isEditable","hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","findIndex","selectChild","editable","changeEx","keyDown","PopupElement","elementIds","ariaHasPopup","trigger","flatMap","baseColor","outlineColor","header","dateObj","valueOf","contents","_formatContents","popupLines","popupContent","lineAttributes","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","vertices","points","polyline","it","inkLists","thickness","AnnotationLayer","accessibilityManager","annotationEditorUIManager","structTreeLayer","_annotationEditorUIManager","hasEditableAnnotations","contentElement","ariaAttributes","getAriaAttributes","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","addLinkAnnotations","_defaultBorderStyle","replaceWith","after","editableAnnotation","_hasNoCanvas","getEditableAnnotations","getEditableAnnotation","rawWidth","EOL_PATTERN","FreeTextEditor","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","innerText","prevChild","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","_translate","svgRound","_normalizePoint","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","scaleFactor","innerMargin","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","lastTopX","lastTopY","lastBottomX","lastBottomY","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","last","N","lastPoint","lastPointX","lastPointY","ltrCallback","newOutliner","getNewOutline","outliner","HighlightOutliner","shiftedMinX","shiftedMinY","lastEdge","edge","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","HighlightOutline","middle","y4","polygon","prevX","prevY","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","ColorPicker","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","blue","green","pink","red","yellow","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeDraw","drawOutline","rootClass","highlightOutline","free","updateProperties","setColorAndOpacity","opa","savedOpacity","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","draw","highlightDiv","pointerover","hovered","pointerleave","setPosition","startHighlighting","_freeHighlight","_freeHighlightId","_freeHighlightClipId","DrawingOptions","updateProperty","updateSVGProperty","toSVGProperties","updateAll","DrawingEditor","_drawId","mustBeCommitted","_addOutlines","drawOutlines","drawId","drawingOptions","_drawingOptions","defaultProperties","_mergeSVGProperties","defaultSVGProperties","p1Keys","getDefaultDrawingOptions","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","_currentDrawId","_updateProperty","savedValue","setter","getPathResizingSVGProperties","getPathResizedSVGProperties","_y","getPathTranslatedSVGProperties","moving","updateParent","pW","pH","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","_endDraw","isCancellable","removeLastElement","_drawMove","timeStamp","startNew","_cleanup","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","InkDrawOutliner","Float64Array","InkDrawOutline","firstX","firstY","lastIndexOf","secondX","secondY","c1x","c1y","c2x","c2y","build","serializedLines","serializedPoints","rescaleFn","newLines","margin","marginX","marginY","oldMarginX","oldMarginY","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","PRECISION","s1x","s1y","s2x","s2y","newParentWidth","newParentHeight","InkDrawingOptions","viewerParameters","_viewParameters","InkEditor","ContourDrawOutline","SignatureExtractor","sigmaSFactor","sigmaR","kernelSize","i0","j0","Int32Array","kk","lnbd","nbd","contours","ij","pix","i2","j2","isHole","contour","contour0","shiftI","shiftJ","i1","j1","i3","j3","i4","j4","ij3","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","sigmaS","kernel","sigmaS2","halfSize","rangeValues","sigmaR2","histogram","sum","neighbour","Uint8ClampedArray","M","L","spos","originalBitmap","prevWidth","prevHeight","log2","isteps","grayImage","extractContoursFromText","fontStyle","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","uint8Buf","contourList","processDrawnLines","curves","mustSmooth","areContours","linesAndPoints","xScale","yScale","newCurves","reducedPoints","newPoints","compressSignature","bufferType","minDiff","maxDiff","outlinesLength","dx","Int8Array","Int16Array","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","BufferCtor","diffs","Response","readable","decompressSignature","signatureData","fromBase64","DecompressionStream","numberOfDrawings","diffsOffset","POINTS_PROPERTIES_NUMBER","SignatureOptions","DrawnSignatureOptions","SignatureEditor","_defaultDrawnSignatureOptions","hasDescription","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","isSignature","alt","StampEditor","bitmapUrl","bitmapFile","pasteEditor","getAsFile","hasAltTextStats","fromId","alt_text_modal","alt_text_type","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","accept","bitmapId","MAX_RATIO","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","scaledWidth","scaledHeight","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","toUrl","toDataURL","missingCanvas","structParent","_structTree","changes","isSame","isSameAltText","stamps","area","prevData","isSamePageIndex","AnnotationEditorLayer","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","annotationElementIds","editables","changedAnnotations","resetAnnotations","attach","detach","removePointerInTextLayer","currentMode","startDrawingSession","pause","oldRotation","DrawLayer","_svgFactory","pathId","clipPathUse","isPathUpdatable","hasClip","use","mustRemoveSelfIntersections","maskId","use1","use2","cloneNode","elementOrId","pathElement","cleanImage","_cleanImage","filterImageFiles","_filterImageFiles","imageFiles","pdfFiles","canvasToFile","convertedPdfFiles","pdffile","pdf","pageNum","uniqueName","processedImages","_t2","pdfjsLib","_pdfjsTestingUtils","FeatureTest","getFilenameFromUrl","getPdfFilenameFromUrl","defaultFilename","reFilename","splitURI","suggestedFilename","getXfaPageViewport","xfaPage","ImageKind","normalizeUnicode","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","slider","spanId","getElementById","fuseSearchThreshold","fuseMatchThreshold"],"sourceRoot":""}