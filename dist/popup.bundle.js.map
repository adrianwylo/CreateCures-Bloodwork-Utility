{"version":3,"file":"popup.bundle.js","mappings":"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","sources":["webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/loadImage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/spawnWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createJob.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/resolvePaths.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/languages.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getId.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/Tesseract.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/PSM.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/onMessage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/OEM.js","webpack://createcures-bloodwork-utility/./node_modules/regenerator-runtime/runtime.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createScheduler.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getEnvironment.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/send.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/log.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/terminateWorker.js","webpack://createcures-bloodwork-utility/webpack/bootstrap","webpack://createcures-bloodwork-utility/./node_modules/fuse.js/dist/fuse.mjs","webpack://createcures-bloodwork-utility/./formatCsvRow.js","webpack://createcures-bloodwork-utility/./imageProcessor.js","webpack://createcures-bloodwork-utility/./node_modules/pdfjs-dist/build/pdf.mjs","webpack://createcures-bloodwork-utility/./imageCleaner.js","webpack://createcures-bloodwork-utility/./imageMarkup.js","webpack://createcures-bloodwork-utility/./popup.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n * readFromBlobOrFile\r\n *\r\n * @name readFromBlobOrFile\r\n * @function\r\n * @access private\r\n */\r\nconst readFromBlobOrFile = (blob) => (\r\n  new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      resolve(fileReader.result);\r\n    };\r\n    fileReader.onerror = ({ target: { error: { code } } }) => {\r\n      reject(Error(`File could not be read! Code=${code}`));\r\n    };\r\n    fileReader.readAsArrayBuffer(blob);\r\n  })\r\n);\r\n\r\n/**\r\n * loadImage\r\n *\r\n * @name loadImage\r\n * @function load image from different source\r\n * @access private\r\n */\r\nconst loadImage = async (image) => {\r\n  let data = image;\r\n  if (typeof image === 'undefined') {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof image === 'string') {\r\n    // Base64 Image\r\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\r\n      data = atob(image.split(',')[1])\r\n        .split('')\r\n        .map((c) => c.charCodeAt(0));\r\n    } else {\r\n      const resp = await fetch(image);\r\n      data = await resp.arrayBuffer();\r\n    }\r\n  } else if (typeof HTMLElement !== 'undefined' && image instanceof HTMLElement) {\r\n    if (image.tagName === 'IMG') {\r\n      data = await loadImage(image.src);\r\n    }\r\n    if (image.tagName === 'VIDEO') {\r\n      data = await loadImage(image.poster);\r\n    }\r\n    if (image.tagName === 'CANVAS') {\r\n      await new Promise((resolve) => {\r\n        image.toBlob(async (blob) => {\r\n          data = await readFromBlobOrFile(blob);\r\n          resolve();\r\n        });\r\n      });\r\n    }\r\n  } else if (typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas) {\r\n    const blob = await image.convertToBlob();\r\n    data = await readFromBlobOrFile(blob);\r\n  } else if (image instanceof File || image instanceof Blob) {\r\n    data = await readFromBlobOrFile(image);\r\n  }\r\n\r\n  return new Uint8Array(data);\r\n};\r\n\r\nmodule.exports = loadImage;\r\n","'use strict';\r\n\r\n/**\r\n * spawnWorker\r\n *\r\n * @name spawnWorker\r\n * @function create a new Worker in browser\r\n * @access public\r\n */\r\nmodule.exports = ({ workerPath, workerBlobURL }) => {\r\n  let worker;\r\n  if (Blob && URL && workerBlobURL) {\r\n    const blob = new Blob([`importScripts(\"${workerPath}\");`], {\r\n      type: 'application/javascript',\r\n    });\r\n    worker = new Worker(URL.createObjectURL(blob));\r\n  } else {\r\n    worker = new Worker(workerPath);\r\n  }\r\n\r\n  return worker;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Tesseract Worker adapter for browser\r\n *\r\n * @fileoverview Tesseract Worker adapter for browser\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nconst defaultOptions = require('./defaultOptions');\r\nconst spawnWorker = require('./spawnWorker');\r\nconst terminateWorker = require('./terminateWorker');\r\nconst onMessage = require('./onMessage');\r\nconst send = require('./send');\r\nconst loadImage = require('./loadImage');\r\n\r\nmodule.exports = {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  send,\r\n  loadImage,\r\n};\r\n","'use strict';\r\n\r\nconst getId = require('./utils/getId');\r\n\r\nlet jobCounter = 0;\r\n\r\nmodule.exports = ({\r\n  id: _id,\r\n  action,\r\n  payload = {},\r\n}) => {\r\n  let id = _id;\r\n  if (typeof id === 'undefined') {\r\n    id = getId('Job', jobCounter);\r\n    jobCounter += 1;\r\n  }\r\n\r\n  return {\r\n    id,\r\n    action,\r\n    payload,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst isBrowser = require('./getEnvironment')('type') === 'browser';\r\n\r\nconst resolveURL = isBrowser ? s => (new URL(s, window.location.href)).href : s => s; // eslint-disable-line\r\n\r\nmodule.exports = (options) => {\r\n  const opts = { ...options };\r\n  ['corePath', 'workerPath', 'langPath'].forEach((key) => {\r\n    if (options[key]) {\r\n      opts[key] = resolveURL(opts[key]);\r\n    }\r\n  });\r\n  return opts;\r\n};\r\n","'use strict';\r\n\r\nconst resolvePaths = require('./utils/resolvePaths');\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\nconst OEM = require('./constants/OEM');\r\nconst {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  loadImage,\r\n  send,\r\n} = require('./worker/node');\r\n\r\nlet workerCounter = 0;\r\n\r\nmodule.exports = async (langs = 'eng', oem = OEM.LSTM_ONLY, _options = {}, config = {}) => {\r\n  const id = getId('Worker', workerCounter);\r\n  const {\r\n    logger,\r\n    errorHandler,\r\n    ...options\r\n  } = resolvePaths({\r\n    ...defaultOptions,\r\n    ..._options,\r\n  });\r\n  const promises = {};\r\n\r\n  // Current langs, oem, and config file.\r\n  // Used if the user ever re-initializes the worker using `worker.reinitialize`.\r\n  const currentLangs = typeof langs === 'string' ? langs.split('+') : langs;\r\n  let currentOem = oem;\r\n  let currentConfig = config;\r\n  const lstmOnlyCore = [OEM.DEFAULT, OEM.LSTM_ONLY].includes(oem) && !options.legacyCore;\r\n\r\n  let workerResReject;\r\n  let workerResResolve;\r\n  const workerRes = new Promise((resolve, reject) => {\r\n    workerResResolve = resolve;\r\n    workerResReject = reject;\r\n  });\r\n  const workerError = (event) => { workerResReject(event.message); };\r\n\r\n  let worker = spawnWorker(options);\r\n  worker.onerror = workerError;\r\n\r\n  workerCounter += 1;\r\n\r\n  const startJob = ({ id: jobId, action, payload }) => (\r\n    new Promise((resolve, reject) => {\r\n      log(`[${id}]: Start ${jobId}, action=${action}`);\r\n      // Using both `action` and `jobId` in case user provides non-unique `jobId`.\r\n      const promiseId = `${action}-${jobId}`;\r\n      promises[promiseId] = { resolve, reject };\r\n      send(worker, {\r\n        workerId: id,\r\n        jobId,\r\n        action,\r\n        payload,\r\n      });\r\n    })\r\n  );\r\n\r\n  const load = () => (\r\n    console.warn('`load` is depreciated and should be removed from code (workers now come pre-loaded)')\r\n  );\r\n\r\n  const loadInternal = (jobId) => (\r\n    startJob(createJob({\r\n      id: jobId, action: 'load', payload: { options: { lstmOnly: lstmOnlyCore, corePath: options.corePath, logging: options.logging } },\r\n    }))\r\n  );\r\n\r\n  const writeText = (path, text, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'writeFile', args: [path, text] },\r\n    }))\r\n  );\r\n\r\n  const readText = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'readFile', args: [path, { encoding: 'utf8' }] },\r\n    }))\r\n  );\r\n\r\n  const removeFile = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'unlink', args: [path] },\r\n    }))\r\n  );\r\n\r\n  const FS = (method, args, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method, args },\r\n    }))\r\n  );\r\n\r\n  const loadLanguageInternal = (_langs, jobId) => startJob(createJob({\r\n    id: jobId,\r\n    action: 'loadLanguage',\r\n    payload: {\r\n      langs: _langs,\r\n      options: {\r\n        langPath: options.langPath,\r\n        dataPath: options.dataPath,\r\n        cachePath: options.cachePath,\r\n        cacheMethod: options.cacheMethod,\r\n        gzip: options.gzip,\r\n        lstmOnly: [OEM.DEFAULT, OEM.LSTM_ONLY].includes(currentOem)\r\n          && !options.legacyLang,\r\n      },\r\n    },\r\n  }));\r\n\r\n  const initializeInternal = (_langs, _oem, _config, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'initialize',\r\n      payload: { langs: _langs, oem: _oem, config: _config },\r\n    }))\r\n  );\r\n\r\n  const reinitialize = (langs = 'eng', oem, config, jobId) => { // eslint-disable-line\r\n\r\n    if (lstmOnlyCore && [OEM.TESSERACT_ONLY, OEM.TESSERACT_LSTM_COMBINED].includes(oem)) throw Error('Legacy model requested but code missing.');\r\n\r\n    const _oem = oem || currentOem;\r\n    currentOem = _oem;\r\n\r\n    const _config = config || currentConfig;\r\n    currentConfig = _config;\r\n\r\n    // Only load langs that are not already loaded.\r\n    // This logic fails if the user downloaded the LSTM-only English data for a language\r\n    // and then uses `worker.reinitialize` to switch to the Legacy engine.\r\n    // However, the correct data will still be downloaded after initialization fails\r\n    // and this can be avoided entirely if the user loads the correct data ahead of time.\r\n    const langsArr = typeof langs === 'string' ? langs.split('+') : langs;\r\n    const _langs = langsArr.filter((x) => !currentLangs.includes(x));\r\n    currentLangs.push(..._langs);\r\n\r\n    if (_langs.length > 0) {\r\n      return loadLanguageInternal(_langs, jobId)\r\n        .then(() => initializeInternal(langs, _oem, _config, jobId));\r\n    }\r\n\r\n    return initializeInternal(langs, _oem, _config, jobId);\r\n  };\r\n\r\n  const setParameters = (params = {}, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'setParameters',\r\n      payload: { params },\r\n    }))\r\n  );\r\n\r\n  const recognize = async (image, opts = {}, output = {\r\n    text: true,\r\n  }, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'recognize',\r\n      payload: { image: await loadImage(image), options: opts, output },\r\n    }))\r\n  );\r\n\r\n  const detect = async (image, jobId) => {\r\n    if (lstmOnlyCore) throw Error('`worker.detect` requires Legacy model, which was not loaded.');\r\n\r\n    return startJob(createJob({\r\n      id: jobId,\r\n      action: 'detect',\r\n      payload: { image: await loadImage(image) },\r\n    }));\r\n  };\r\n\r\n  const terminate = async () => {\r\n    if (worker !== null) {\r\n      /*\r\n      await startJob(createJob({\r\n        id: jobId,\r\n        action: 'terminate',\r\n      }));\r\n      */\r\n      terminateWorker(worker);\r\n      worker = null;\r\n    }\r\n    return Promise.resolve();\r\n  };\r\n\r\n  onMessage(worker, ({\r\n    workerId, jobId, status, action, data,\r\n  }) => {\r\n    const promiseId = `${action}-${jobId}`;\r\n    if (status === 'resolve') {\r\n      log(`[${workerId}]: Complete ${jobId}`);\r\n      promises[promiseId].resolve({ jobId, data });\r\n      delete promises[promiseId];\r\n    } else if (status === 'reject') {\r\n      promises[promiseId].reject(data);\r\n      delete promises[promiseId];\r\n      if (action === 'load') workerResReject(data);\r\n      if (errorHandler) {\r\n        errorHandler(data);\r\n      } else {\r\n        throw Error(data);\r\n      }\r\n    } else if (status === 'progress') {\r\n      logger({ ...data, userJobId: jobId });\r\n    }\r\n  });\r\n\r\n  const resolveObj = {\r\n    id,\r\n    worker,\r\n    load,\r\n    writeText,\r\n    readText,\r\n    removeFile,\r\n    FS,\r\n    reinitialize,\r\n    setParameters,\r\n    recognize,\r\n    detect,\r\n    terminate,\r\n  };\r\n\r\n  loadInternal()\r\n    .then(() => loadLanguageInternal(langs))\r\n    .then(() => initializeInternal(langs, oem, config))\r\n    .then(() => workerResResolve(resolveObj))\r\n    .catch(() => {});\r\n\r\n  return workerRes;\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * languages with existing tesseract traineddata\r\n * https://tesseract-ocr.github.io/tessdoc/Data-Files#data-files-for-version-400-november-29-2016\r\n */\r\n\r\n/**\r\n * @typedef {object} Languages\r\n * @property {string} AFR Afrikaans\r\n * @property {string} AMH Amharic\r\n * @property {string} ARA Arabic\r\n * @property {string} ASM Assamese\r\n * @property {string} AZE Azerbaijani\r\n * @property {string} AZE_CYRL Azerbaijani - Cyrillic\r\n * @property {string} BEL Belarusian\r\n * @property {string} BEN Bengali\r\n * @property {string} BOD Tibetan\r\n * @property {string} BOS Bosnian\r\n * @property {string} BUL Bulgarian\r\n * @property {string} CAT Catalan; Valencian\r\n * @property {string} CEB Cebuano\r\n * @property {string} CES Czech\r\n * @property {string} CHI_SIM Chinese - Simplified\r\n * @property {string} CHI_TRA Chinese - Traditional\r\n * @property {string} CHR Cherokee\r\n * @property {string} CYM Welsh\r\n * @property {string} DAN Danish\r\n * @property {string} DEU German\r\n * @property {string} DZO Dzongkha\r\n * @property {string} ELL Greek, Modern (1453-)\r\n * @property {string} ENG English\r\n * @property {string} ENM English, Middle (1100-1500)\r\n * @property {string} EPO Esperanto\r\n * @property {string} EST Estonian\r\n * @property {string} EUS Basque\r\n * @property {string} FAS Persian\r\n * @property {string} FIN Finnish\r\n * @property {string} FRA French\r\n * @property {string} FRK German Fraktur\r\n * @property {string} FRM French, Middle (ca. 1400-1600)\r\n * @property {string} GLE Irish\r\n * @property {string} GLG Galician\r\n * @property {string} GRC Greek, Ancient (-1453)\r\n * @property {string} GUJ Gujarati\r\n * @property {string} HAT Haitian; Haitian Creole\r\n * @property {string} HEB Hebrew\r\n * @property {string} HIN Hindi\r\n * @property {string} HRV Croatian\r\n * @property {string} HUN Hungarian\r\n * @property {string} IKU Inuktitut\r\n * @property {string} IND Indonesian\r\n * @property {string} ISL Icelandic\r\n * @property {string} ITA Italian\r\n * @property {string} ITA_OLD Italian - Old\r\n * @property {string} JAV Javanese\r\n * @property {string} JPN Japanese\r\n * @property {string} KAN Kannada\r\n * @property {string} KAT Georgian\r\n * @property {string} KAT_OLD Georgian - Old\r\n * @property {string} KAZ Kazakh\r\n * @property {string} KHM Central Khmer\r\n * @property {string} KIR Kirghiz; Kyrgyz\r\n * @property {string} KOR Korean\r\n * @property {string} KUR Kurdish\r\n * @property {string} LAO Lao\r\n * @property {string} LAT Latin\r\n * @property {string} LAV Latvian\r\n * @property {string} LIT Lithuanian\r\n * @property {string} MAL Malayalam\r\n * @property {string} MAR Marathi\r\n * @property {string} MKD Macedonian\r\n * @property {string} MLT Maltese\r\n * @property {string} MSA Malay\r\n * @property {string} MYA Burmese\r\n * @property {string} NEP Nepali\r\n * @property {string} NLD Dutch; Flemish\r\n * @property {string} NOR Norwegian\r\n * @property {string} ORI Oriya\r\n * @property {string} PAN Panjabi; Punjabi\r\n * @property {string} POL Polish\r\n * @property {string} POR Portuguese\r\n * @property {string} PUS Pushto; Pashto\r\n * @property {string} RON Romanian; Moldavian; Moldovan\r\n * @property {string} RUS Russian\r\n * @property {string} SAN Sanskrit\r\n * @property {string} SIN Sinhala; Sinhalese\r\n * @property {string} SLK Slovak\r\n * @property {string} SLV Slovenian\r\n * @property {string} SPA Spanish; Castilian\r\n * @property {string} SPA_OLD Spanish; Castilian - Old\r\n * @property {string} SQI Albanian\r\n * @property {string} SRP Serbian\r\n * @property {string} SRP_LATN Serbian - Latin\r\n * @property {string} SWA Swahili\r\n * @property {string} SWE Swedish\r\n * @property {string} SYR Syriac\r\n * @property {string} TAM Tamil\r\n * @property {string} TEL Telugu\r\n * @property {string} TGK Tajik\r\n * @property {string} TGL Tagalog\r\n * @property {string} THA Thai\r\n * @property {string} TIR Tigrinya\r\n * @property {string} TUR Turkish\r\n * @property {string} UIG Uighur; Uyghur\r\n * @property {string} UKR Ukrainian\r\n * @property {string} URD Urdu\r\n * @property {string} UZB Uzbek\r\n * @property {string} UZB_CYRL Uzbek - Cyrillic\r\n * @property {string} VIE Vietnamese\r\n * @property {string} YID Yiddish\r\n */\r\n\r\n/**\r\n  * @type {Languages}\r\n  */\r\nmodule.exports = {\r\n  AFR: 'afr',\r\n  AMH: 'amh',\r\n  ARA: 'ara',\r\n  ASM: 'asm',\r\n  AZE: 'aze',\r\n  AZE_CYRL: 'aze_cyrl',\r\n  BEL: 'bel',\r\n  BEN: 'ben',\r\n  BOD: 'bod',\r\n  BOS: 'bos',\r\n  BUL: 'bul',\r\n  CAT: 'cat',\r\n  CEB: 'ceb',\r\n  CES: 'ces',\r\n  CHI_SIM: 'chi_sim',\r\n  CHI_TRA: 'chi_tra',\r\n  CHR: 'chr',\r\n  CYM: 'cym',\r\n  DAN: 'dan',\r\n  DEU: 'deu',\r\n  DZO: 'dzo',\r\n  ELL: 'ell',\r\n  ENG: 'eng',\r\n  ENM: 'enm',\r\n  EPO: 'epo',\r\n  EST: 'est',\r\n  EUS: 'eus',\r\n  FAS: 'fas',\r\n  FIN: 'fin',\r\n  FRA: 'fra',\r\n  FRK: 'frk',\r\n  FRM: 'frm',\r\n  GLE: 'gle',\r\n  GLG: 'glg',\r\n  GRC: 'grc',\r\n  GUJ: 'guj',\r\n  HAT: 'hat',\r\n  HEB: 'heb',\r\n  HIN: 'hin',\r\n  HRV: 'hrv',\r\n  HUN: 'hun',\r\n  IKU: 'iku',\r\n  IND: 'ind',\r\n  ISL: 'isl',\r\n  ITA: 'ita',\r\n  ITA_OLD: 'ita_old',\r\n  JAV: 'jav',\r\n  JPN: 'jpn',\r\n  KAN: 'kan',\r\n  KAT: 'kat',\r\n  KAT_OLD: 'kat_old',\r\n  KAZ: 'kaz',\r\n  KHM: 'khm',\r\n  KIR: 'kir',\r\n  KOR: 'kor',\r\n  KUR: 'kur',\r\n  LAO: 'lao',\r\n  LAT: 'lat',\r\n  LAV: 'lav',\r\n  LIT: 'lit',\r\n  MAL: 'mal',\r\n  MAR: 'mar',\r\n  MKD: 'mkd',\r\n  MLT: 'mlt',\r\n  MSA: 'msa',\r\n  MYA: 'mya',\r\n  NEP: 'nep',\r\n  NLD: 'nld',\r\n  NOR: 'nor',\r\n  ORI: 'ori',\r\n  PAN: 'pan',\r\n  POL: 'pol',\r\n  POR: 'por',\r\n  PUS: 'pus',\r\n  RON: 'ron',\r\n  RUS: 'rus',\r\n  SAN: 'san',\r\n  SIN: 'sin',\r\n  SLK: 'slk',\r\n  SLV: 'slv',\r\n  SPA: 'spa',\r\n  SPA_OLD: 'spa_old',\r\n  SQI: 'sqi',\r\n  SRP: 'srp',\r\n  SRP_LATN: 'srp_latn',\r\n  SWA: 'swa',\r\n  SWE: 'swe',\r\n  SYR: 'syr',\r\n  TAM: 'tam',\r\n  TEL: 'tel',\r\n  TGK: 'tgk',\r\n  TGL: 'tgl',\r\n  THA: 'tha',\r\n  TIR: 'tir',\r\n  TUR: 'tur',\r\n  UIG: 'uig',\r\n  UKR: 'ukr',\r\n  URD: 'urd',\r\n  UZB: 'uzb',\r\n  UZB_CYRL: 'uzb_cyrl',\r\n  VIE: 'vie',\r\n  YID: 'yid',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (prefix, cnt) => (\r\n  `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`\r\n);\r\n","'use strict';\r\n\r\nconst createWorker = require('./createWorker');\r\n\r\nconst recognize = async (image, langs, options) => {\r\n  const worker = await createWorker(langs, 1, options);\r\n  return worker.recognize(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nconst detect = async (image, options) => {\r\n  const worker = await createWorker('osd', 0, options);\r\n  return worker.detect(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n  recognize,\r\n  detect,\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * PSM = Page Segmentation Mode\r\n */\r\nmodule.exports = {\r\n  OSD_ONLY: '0',\r\n  AUTO_OSD: '1',\r\n  AUTO_ONLY: '2',\r\n  AUTO: '3',\r\n  SINGLE_COLUMN: '4',\r\n  SINGLE_BLOCK_VERT_TEXT: '5',\r\n  SINGLE_BLOCK: '6',\r\n  SINGLE_LINE: '7',\r\n  SINGLE_WORD: '8',\r\n  CIRCLE_WORD: '9',\r\n  SINGLE_CHAR: '10',\r\n  SPARSE_TEXT: '11',\r\n  SPARSE_TEXT_OSD: '12',\r\n  RAW_LINE: '13',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (worker, handler) => {\r\n  worker.onmessage = ({ data }) => { // eslint-disable-line\r\n    handler(data);\r\n  };\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * OEM = OCR Engine Mode, and there are 4 possible modes.\r\n *\r\n * By default tesseract.js uses LSTM_ONLY mode.\r\n *\r\n */\r\nmodule.exports = {\r\n  TESSERACT_ONLY: 0,\r\n  LSTM_ONLY: 1,\r\n  TESSERACT_LSTM_COMBINED: 2,\r\n  DEFAULT: 3,\r\n};\r\n","/**\r\n * Copyright (c) 2014-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nvar runtime = (function (exports) {\r\n  \"use strict\";\r\n\r\n  var Op = Object.prototype;\r\n  var hasOwn = Op.hasOwnProperty;\r\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\r\n  var undefined; // More compressible than void 0.\r\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n  function define(obj, key, value) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n    return obj[key];\r\n  }\r\n  try {\r\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\r\n    define({}, \"\");\r\n  } catch (err) {\r\n    define = function(obj, key, value) {\r\n      return obj[key] = value;\r\n    };\r\n  }\r\n\r\n  function wrap(innerFn, outerFn, self, tryLocsList) {\r\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n    var generator = Object.create(protoGenerator.prototype);\r\n    var context = new Context(tryLocsList || []);\r\n\r\n    // The ._invoke method unifies the implementations of the .next,\r\n    // .throw, and .return methods.\r\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\r\n\r\n    return generator;\r\n  }\r\n  exports.wrap = wrap;\r\n\r\n  // Try/catch helper to minimize deoptimizations. Returns a completion\r\n  // record like context.tryEntries[i].completion. This interface could\r\n  // have been (and was previously) designed to take a closure to be\r\n  // invoked without arguments, but in all the cases we care about we\r\n  // already have an existing method we want to call, so there's no need\r\n  // to create a new function object. We can even get away with assuming\r\n  // the method takes exactly one argument, since that happens to be true\r\n  // in every case, so we don't have to touch the arguments object. The\r\n  // only additional allocation required is the completion record, which\r\n  // has a stable shape and so hopefully should be cheap to allocate.\r\n  function tryCatch(fn, obj, arg) {\r\n    try {\r\n      return { type: \"normal\", arg: fn.call(obj, arg) };\r\n    } catch (err) {\r\n      return { type: \"throw\", arg: err };\r\n    }\r\n  }\r\n\r\n  var GenStateSuspendedStart = \"suspendedStart\";\r\n  var GenStateSuspendedYield = \"suspendedYield\";\r\n  var GenStateExecuting = \"executing\";\r\n  var GenStateCompleted = \"completed\";\r\n\r\n  // Returning this object from the innerFn has the same effect as\r\n  // breaking out of the dispatch switch statement.\r\n  var ContinueSentinel = {};\r\n\r\n  // Dummy constructor functions that we use as the .constructor and\r\n  // .constructor.prototype properties for functions that return Generator\r\n  // objects. For full spec compliance, you may wish to configure your\r\n  // minifier not to mangle the names of these two functions.\r\n  function Generator() {}\r\n  function GeneratorFunction() {}\r\n  function GeneratorFunctionPrototype() {}\r\n\r\n  // This is a polyfill for %IteratorPrototype% for environments that\r\n  // don't natively support it.\r\n  var IteratorPrototype = {};\r\n  define(IteratorPrototype, iteratorSymbol, function () {\r\n    return this;\r\n  });\r\n\r\n  var getProto = Object.getPrototypeOf;\r\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n  if (NativeIteratorPrototype &&\r\n      NativeIteratorPrototype !== Op &&\r\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n    // This environment has a native %IteratorPrototype%; use it instead\r\n    // of the polyfill.\r\n    IteratorPrototype = NativeIteratorPrototype;\r\n  }\r\n\r\n  var Gp = GeneratorFunctionPrototype.prototype =\r\n    Generator.prototype = Object.create(IteratorPrototype);\r\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\r\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\r\n  defineProperty(\r\n    GeneratorFunctionPrototype,\r\n    \"constructor\",\r\n    { value: GeneratorFunction, configurable: true }\r\n  );\r\n  GeneratorFunction.displayName = define(\r\n    GeneratorFunctionPrototype,\r\n    toStringTagSymbol,\r\n    \"GeneratorFunction\"\r\n  );\r\n\r\n  // Helper for defining the .next, .throw, and .return methods of the\r\n  // Iterator interface in terms of a single ._invoke method.\r\n  function defineIteratorMethods(prototype) {\r\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n      define(prototype, method, function(arg) {\r\n        return this._invoke(method, arg);\r\n      });\r\n    });\r\n  }\r\n\r\n  exports.isGeneratorFunction = function(genFun) {\r\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n    return ctor\r\n      ? ctor === GeneratorFunction ||\r\n        // For the native GeneratorFunction constructor, the best we can\r\n        // do is to check its .name property.\r\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n      : false;\r\n  };\r\n\r\n  exports.mark = function(genFun) {\r\n    if (Object.setPrototypeOf) {\r\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n    } else {\r\n      genFun.__proto__ = GeneratorFunctionPrototype;\r\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\r\n    }\r\n    genFun.prototype = Object.create(Gp);\r\n    return genFun;\r\n  };\r\n\r\n  // Within the body of any async function, `await x` is transformed to\r\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n  // meant to be awaited.\r\n  exports.awrap = function(arg) {\r\n    return { __await: arg };\r\n  };\r\n\r\n  function AsyncIterator(generator, PromiseImpl) {\r\n    function invoke(method, arg, resolve, reject) {\r\n      var record = tryCatch(generator[method], generator, arg);\r\n      if (record.type === \"throw\") {\r\n        reject(record.arg);\r\n      } else {\r\n        var result = record.arg;\r\n        var value = result.value;\r\n        if (value &&\r\n            typeof value === \"object\" &&\r\n            hasOwn.call(value, \"__await\")) {\r\n          return PromiseImpl.resolve(value.__await).then(function(value) {\r\n            invoke(\"next\", value, resolve, reject);\r\n          }, function(err) {\r\n            invoke(\"throw\", err, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\r\n          // When a yielded Promise is resolved, its final value becomes\r\n          // the .value of the Promise<{value,done}> result for the\r\n          // current iteration.\r\n          result.value = unwrapped;\r\n          resolve(result);\r\n        }, function(error) {\r\n          // If a rejected Promise was yielded, throw the rejection back\r\n          // into the async generator function so it can be handled there.\r\n          return invoke(\"throw\", error, resolve, reject);\r\n        });\r\n      }\r\n    }\r\n\r\n    var previousPromise;\r\n\r\n    function enqueue(method, arg) {\r\n      function callInvokeWithMethodAndArg() {\r\n        return new PromiseImpl(function(resolve, reject) {\r\n          invoke(method, arg, resolve, reject);\r\n        });\r\n      }\r\n\r\n      return previousPromise =\r\n        // If enqueue has been called before, then we want to wait until\r\n        // all previous Promises have been resolved before calling invoke,\r\n        // so that results are always delivered in the correct order. If\r\n        // enqueue has not been called before, then it is important to\r\n        // call invoke immediately, without waiting on a callback to fire,\r\n        // so that the async generator function has the opportunity to do\r\n        // any necessary setup in a predictable way. This predictability\r\n        // is why the Promise constructor synchronously invokes its\r\n        // executor callback, and why async functions synchronously\r\n        // execute code before the first await. Since we implement simple\r\n        // async functions in terms of async generators, it is especially\r\n        // important to get this right, even though it requires care.\r\n        previousPromise ? previousPromise.then(\r\n          callInvokeWithMethodAndArg,\r\n          // Avoid propagating failures to Promises returned by later\r\n          // invocations of the iterator.\r\n          callInvokeWithMethodAndArg\r\n        ) : callInvokeWithMethodAndArg();\r\n    }\r\n\r\n    // Define the unified helper method that is used to implement .next,\r\n    // .throw, and .return (see defineIteratorMethods).\r\n    defineProperty(this, \"_invoke\", { value: enqueue });\r\n  }\r\n\r\n  defineIteratorMethods(AsyncIterator.prototype);\r\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\r\n    return this;\r\n  });\r\n  exports.AsyncIterator = AsyncIterator;\r\n\r\n  // Note that simple async functions are implemented on top of\r\n  // AsyncIterator objects; they just return a Promise for the value of\r\n  // the final result produced by the iterator.\r\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\r\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\r\n\r\n    var iter = new AsyncIterator(\r\n      wrap(innerFn, outerFn, self, tryLocsList),\r\n      PromiseImpl\r\n    );\r\n\r\n    return exports.isGeneratorFunction(outerFn)\r\n      ? iter // If outerFn is a generator, return the full iterator.\r\n      : iter.next().then(function(result) {\r\n          return result.done ? result.value : iter.next();\r\n        });\r\n  };\r\n\r\n  function makeInvokeMethod(innerFn, self, context) {\r\n    var state = GenStateSuspendedStart;\r\n\r\n    return function invoke(method, arg) {\r\n      if (state === GenStateExecuting) {\r\n        throw new Error(\"Generator is already running\");\r\n      }\r\n\r\n      if (state === GenStateCompleted) {\r\n        if (method === \"throw\") {\r\n          throw arg;\r\n        }\r\n\r\n        // Be forgiving, per 25.3.3.3.3 of the spec:\r\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n        return doneResult();\r\n      }\r\n\r\n      context.method = method;\r\n      context.arg = arg;\r\n\r\n      while (true) {\r\n        var delegate = context.delegate;\r\n        if (delegate) {\r\n          var delegateResult = maybeInvokeDelegate(delegate, context);\r\n          if (delegateResult) {\r\n            if (delegateResult === ContinueSentinel) continue;\r\n            return delegateResult;\r\n          }\r\n        }\r\n\r\n        if (context.method === \"next\") {\r\n          // Setting context._sent for legacy support of Babel's\r\n          // function.sent implementation.\r\n          context.sent = context._sent = context.arg;\r\n\r\n        } else if (context.method === \"throw\") {\r\n          if (state === GenStateSuspendedStart) {\r\n            state = GenStateCompleted;\r\n            throw context.arg;\r\n          }\r\n\r\n          context.dispatchException(context.arg);\r\n\r\n        } else if (context.method === \"return\") {\r\n          context.abrupt(\"return\", context.arg);\r\n        }\r\n\r\n        state = GenStateExecuting;\r\n\r\n        var record = tryCatch(innerFn, self, context);\r\n        if (record.type === \"normal\") {\r\n          // If an exception is thrown from innerFn, we leave state ===\r\n          // GenStateExecuting and loop back for another invocation.\r\n          state = context.done\r\n            ? GenStateCompleted\r\n            : GenStateSuspendedYield;\r\n\r\n          if (record.arg === ContinueSentinel) {\r\n            continue;\r\n          }\r\n\r\n          return {\r\n            value: record.arg,\r\n            done: context.done\r\n          };\r\n\r\n        } else if (record.type === \"throw\") {\r\n          state = GenStateCompleted;\r\n          // Dispatch the exception by looping back around to the\r\n          // context.dispatchException(context.arg) call above.\r\n          context.method = \"throw\";\r\n          context.arg = record.arg;\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Call delegate.iterator[context.method](context.arg) and handle the\r\n  // result, either by returning a { value, done } result from the\r\n  // delegate iterator, or by modifying context.method and context.arg,\r\n  // setting context.delegate to null, and returning the ContinueSentinel.\r\n  function maybeInvokeDelegate(delegate, context) {\r\n    var methodName = context.method;\r\n    var method = delegate.iterator[methodName];\r\n    if (method === undefined) {\r\n      // A .throw or .return when the delegate iterator has no .throw\r\n      // method, or a missing .next mehtod, always terminate the\r\n      // yield* loop.\r\n      context.delegate = null;\r\n\r\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\r\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\r\n        // If the delegate iterator has a return method, give it a\r\n        // chance to clean up.\r\n        context.method = \"return\";\r\n        context.arg = undefined;\r\n        maybeInvokeDelegate(delegate, context);\r\n\r\n        if (context.method === \"throw\") {\r\n          // If maybeInvokeDelegate(context) changed context.method from\r\n          // \"return\" to \"throw\", let that override the TypeError below.\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n      if (methodName !== \"return\") {\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\r\n          \"The iterator does not provide a '\" + methodName + \"' method\");\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n    if (record.type === \"throw\") {\r\n      context.method = \"throw\";\r\n      context.arg = record.arg;\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var info = record.arg;\r\n\r\n    if (! info) {\r\n      context.method = \"throw\";\r\n      context.arg = new TypeError(\"iterator result is not an object\");\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    if (info.done) {\r\n      // Assign the result of the finished delegate to the temporary\r\n      // variable specified by delegate.resultName (see delegateYield).\r\n      context[delegate.resultName] = info.value;\r\n\r\n      // Resume execution at the desired location (see delegateYield).\r\n      context.next = delegate.nextLoc;\r\n\r\n      // If context.method was \"throw\" but the delegate handled the\r\n      // exception, let the outer generator proceed normally. If\r\n      // context.method was \"next\", forget context.arg since it has been\r\n      // \"consumed\" by the delegate iterator. If context.method was\r\n      // \"return\", allow the original .return call to continue in the\r\n      // outer generator.\r\n      if (context.method !== \"return\") {\r\n        context.method = \"next\";\r\n        context.arg = undefined;\r\n      }\r\n\r\n    } else {\r\n      // Re-yield the result returned by the delegate method.\r\n      return info;\r\n    }\r\n\r\n    // The delegate iterator is finished, so forget it and continue with\r\n    // the outer generator.\r\n    context.delegate = null;\r\n    return ContinueSentinel;\r\n  }\r\n\r\n  // Define Generator.prototype.{next,throw,return} in terms of the\r\n  // unified ._invoke helper method.\r\n  defineIteratorMethods(Gp);\r\n\r\n  define(Gp, toStringTagSymbol, \"Generator\");\r\n\r\n  // A Generator should always return itself as the iterator object when the\r\n  // @@iterator function is called on it. Some browsers' implementations of the\r\n  // iterator prototype chain incorrectly implement this, causing the Generator\r\n  // object to not be returned from this call. This ensures that doesn't happen.\r\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n  define(Gp, iteratorSymbol, function() {\r\n    return this;\r\n  });\r\n\r\n  define(Gp, \"toString\", function() {\r\n    return \"[object Generator]\";\r\n  });\r\n\r\n  function pushTryEntry(locs) {\r\n    var entry = { tryLoc: locs[0] };\r\n\r\n    if (1 in locs) {\r\n      entry.catchLoc = locs[1];\r\n    }\r\n\r\n    if (2 in locs) {\r\n      entry.finallyLoc = locs[2];\r\n      entry.afterLoc = locs[3];\r\n    }\r\n\r\n    this.tryEntries.push(entry);\r\n  }\r\n\r\n  function resetTryEntry(entry) {\r\n    var record = entry.completion || {};\r\n    record.type = \"normal\";\r\n    delete record.arg;\r\n    entry.completion = record;\r\n  }\r\n\r\n  function Context(tryLocsList) {\r\n    // The root entry object (effectively a try statement without a catch\r\n    // or a finally block) gives us a place to store values thrown from\r\n    // locations where there is no enclosing try statement.\r\n    this.tryEntries = [{ tryLoc: \"root\" }];\r\n    tryLocsList.forEach(pushTryEntry, this);\r\n    this.reset(true);\r\n  }\r\n\r\n  exports.keys = function(val) {\r\n    var object = Object(val);\r\n    var keys = [];\r\n    for (var key in object) {\r\n      keys.push(key);\r\n    }\r\n    keys.reverse();\r\n\r\n    // Rather than returning an object with a next method, we keep\r\n    // things simple and return the next function itself.\r\n    return function next() {\r\n      while (keys.length) {\r\n        var key = keys.pop();\r\n        if (key in object) {\r\n          next.value = key;\r\n          next.done = false;\r\n          return next;\r\n        }\r\n      }\r\n\r\n      // To avoid creating an additional object, we just hang the .value\r\n      // and .done properties off the next function object itself. This\r\n      // also ensures that the minifier will not anonymize the function.\r\n      next.done = true;\r\n      return next;\r\n    };\r\n  };\r\n\r\n  function values(iterable) {\r\n    if (iterable) {\r\n      var iteratorMethod = iterable[iteratorSymbol];\r\n      if (iteratorMethod) {\r\n        return iteratorMethod.call(iterable);\r\n      }\r\n\r\n      if (typeof iterable.next === \"function\") {\r\n        return iterable;\r\n      }\r\n\r\n      if (!isNaN(iterable.length)) {\r\n        var i = -1, next = function next() {\r\n          while (++i < iterable.length) {\r\n            if (hasOwn.call(iterable, i)) {\r\n              next.value = iterable[i];\r\n              next.done = false;\r\n              return next;\r\n            }\r\n          }\r\n\r\n          next.value = undefined;\r\n          next.done = true;\r\n\r\n          return next;\r\n        };\r\n\r\n        return next.next = next;\r\n      }\r\n    }\r\n\r\n    // Return an iterator with no values.\r\n    return { next: doneResult };\r\n  }\r\n  exports.values = values;\r\n\r\n  function doneResult() {\r\n    return { value: undefined, done: true };\r\n  }\r\n\r\n  Context.prototype = {\r\n    constructor: Context,\r\n\r\n    reset: function(skipTempReset) {\r\n      this.prev = 0;\r\n      this.next = 0;\r\n      // Resetting context._sent for legacy support of Babel's\r\n      // function.sent implementation.\r\n      this.sent = this._sent = undefined;\r\n      this.done = false;\r\n      this.delegate = null;\r\n\r\n      this.method = \"next\";\r\n      this.arg = undefined;\r\n\r\n      this.tryEntries.forEach(resetTryEntry);\r\n\r\n      if (!skipTempReset) {\r\n        for (var name in this) {\r\n          // Not sure about the optimal order of these conditions:\r\n          if (name.charAt(0) === \"t\" &&\r\n              hasOwn.call(this, name) &&\r\n              !isNaN(+name.slice(1))) {\r\n            this[name] = undefined;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function() {\r\n      this.done = true;\r\n\r\n      var rootEntry = this.tryEntries[0];\r\n      var rootRecord = rootEntry.completion;\r\n      if (rootRecord.type === \"throw\") {\r\n        throw rootRecord.arg;\r\n      }\r\n\r\n      return this.rval;\r\n    },\r\n\r\n    dispatchException: function(exception) {\r\n      if (this.done) {\r\n        throw exception;\r\n      }\r\n\r\n      var context = this;\r\n      function handle(loc, caught) {\r\n        record.type = \"throw\";\r\n        record.arg = exception;\r\n        context.next = loc;\r\n\r\n        if (caught) {\r\n          // If the dispatched exception was caught by a catch block,\r\n          // then let that catch block handle the exception normally.\r\n          context.method = \"next\";\r\n          context.arg = undefined;\r\n        }\r\n\r\n        return !! caught;\r\n      }\r\n\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        var record = entry.completion;\r\n\r\n        if (entry.tryLoc === \"root\") {\r\n          // Exception thrown outside of any try block that could handle\r\n          // it, so set the completion value of the entire function to\r\n          // throw the exception.\r\n          return handle(\"end\");\r\n        }\r\n\r\n        if (entry.tryLoc <= this.prev) {\r\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n          if (hasCatch && hasFinally) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            } else if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else if (hasCatch) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            }\r\n\r\n          } else if (hasFinally) {\r\n            if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else {\r\n            throw new Error(\"try statement without catch or finally\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    abrupt: function(type, arg) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc <= this.prev &&\r\n            hasOwn.call(entry, \"finallyLoc\") &&\r\n            this.prev < entry.finallyLoc) {\r\n          var finallyEntry = entry;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (finallyEntry &&\r\n          (type === \"break\" ||\r\n           type === \"continue\") &&\r\n          finallyEntry.tryLoc <= arg &&\r\n          arg <= finallyEntry.finallyLoc) {\r\n        // Ignore the finally entry if control is not jumping to a\r\n        // location outside the try/catch block.\r\n        finallyEntry = null;\r\n      }\r\n\r\n      var record = finallyEntry ? finallyEntry.completion : {};\r\n      record.type = type;\r\n      record.arg = arg;\r\n\r\n      if (finallyEntry) {\r\n        this.method = \"next\";\r\n        this.next = finallyEntry.finallyLoc;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      return this.complete(record);\r\n    },\r\n\r\n    complete: function(record, afterLoc) {\r\n      if (record.type === \"throw\") {\r\n        throw record.arg;\r\n      }\r\n\r\n      if (record.type === \"break\" ||\r\n          record.type === \"continue\") {\r\n        this.next = record.arg;\r\n      } else if (record.type === \"return\") {\r\n        this.rval = this.arg = record.arg;\r\n        this.method = \"return\";\r\n        this.next = \"end\";\r\n      } else if (record.type === \"normal\" && afterLoc) {\r\n        this.next = afterLoc;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    },\r\n\r\n    finish: function(finallyLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.finallyLoc === finallyLoc) {\r\n          this.complete(entry.completion, entry.afterLoc);\r\n          resetTryEntry(entry);\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n    },\r\n\r\n    \"catch\": function(tryLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc === tryLoc) {\r\n          var record = entry.completion;\r\n          if (record.type === \"throw\") {\r\n            var thrown = record.arg;\r\n            resetTryEntry(entry);\r\n          }\r\n          return thrown;\r\n        }\r\n      }\r\n\r\n      // The context.catch method must only be called with a location\r\n      // argument that corresponds to a known catch block.\r\n      throw new Error(\"illegal catch attempt\");\r\n    },\r\n\r\n    delegateYield: function(iterable, resultName, nextLoc) {\r\n      this.delegate = {\r\n        iterator: values(iterable),\r\n        resultName: resultName,\r\n        nextLoc: nextLoc\r\n      };\r\n\r\n      if (this.method === \"next\") {\r\n        // Deliberately forget the last sent value so that we don't\r\n        // accidentally pass it on to the delegate.\r\n        this.arg = undefined;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n  };\r\n\r\n  // Regardless of whether this script is executing as a CommonJS module\r\n  // or not, return the runtime object so that we can declare the variable\r\n  // regeneratorRuntime in the outer scope, which allows this module to be\r\n  // injected easily by `bin/regenerator --include-runtime script.js`.\r\n  return exports;\r\n\r\n}(\r\n  // If this script is executing as a CommonJS module, use module.exports\r\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n  // object. Either way, the resulting object will be used to initialize\r\n  // the regeneratorRuntime variable at the top of this file.\r\n  typeof module === \"object\" ? module.exports : {}\r\n));\r\n\r\ntry {\r\n  regeneratorRuntime = runtime;\r\n} catch (accidentalStrictMode) {\r\n  // This module should not be running in strict mode, so the above\r\n  // assignment should always work unless something is misconfigured. Just\r\n  // in case runtime.js accidentally runs in strict mode, in modern engines\r\n  // we can explicitly access globalThis. In older engines we can escape\r\n  // strict mode using a global Function call. This could conceivably fail\r\n  // if a Content Security Policy forbids using Function, but in that case\r\n  // the proper solution is to fix the accidental strict mode problem. If\r\n  // you've misconfigured your bundler to force strict mode and applied a\r\n  // CSP to forbid Function, and you're not willing to fix either of those\r\n  // problems, please detail your unique predicament in a GitHub issue.\r\n  if (typeof globalThis === \"object\") {\r\n    globalThis.regeneratorRuntime = runtime;\r\n  } else {\r\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\r\n  }\r\n}\r\n","'use strict';\r\n\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\n\r\nlet schedulerCounter = 0;\r\n\r\nmodule.exports = () => {\r\n  const id = getId('Scheduler', schedulerCounter);\r\n  const workers = {};\r\n  const runningWorkers = {};\r\n  let jobQueue = [];\r\n\r\n  schedulerCounter += 1;\r\n\r\n  const getQueueLen = () => jobQueue.length;\r\n  const getNumWorkers = () => Object.keys(workers).length;\r\n\r\n  const dequeue = () => {\r\n    if (jobQueue.length !== 0) {\r\n      const wIds = Object.keys(workers);\r\n      for (let i = 0; i < wIds.length; i += 1) {\r\n        if (typeof runningWorkers[wIds[i]] === 'undefined') {\r\n          jobQueue[0](workers[wIds[i]]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const queue = (action, payload) => (\r\n    new Promise((resolve, reject) => {\r\n      const job = createJob({ action, payload });\r\n      jobQueue.push(async (w) => {\r\n        jobQueue.shift();\r\n        runningWorkers[w.id] = job;\r\n        try {\r\n          resolve(await w[action].apply(this, [...payload, job.id]));\r\n        } catch (err) {\r\n          reject(err);\r\n        } finally {\r\n          delete runningWorkers[w.id];\r\n          dequeue();\r\n        }\r\n      });\r\n      log(`[${id}]: Add ${job.id} to JobQueue`);\r\n      log(`[${id}]: JobQueue length=${jobQueue.length}`);\r\n      dequeue();\r\n    })\r\n  );\r\n\r\n  const addWorker = (w) => {\r\n    workers[w.id] = w;\r\n    log(`[${id}]: Add ${w.id}`);\r\n    log(`[${id}]: Number of workers=${getNumWorkers()}`);\r\n    dequeue();\r\n    return w.id;\r\n  };\r\n\r\n  const addJob = async (action, ...payload) => {\r\n    if (getNumWorkers() === 0) {\r\n      throw Error(`[${id}]: You need to have at least one worker before adding jobs`);\r\n    }\r\n    return queue(action, payload);\r\n  };\r\n\r\n  const terminate = async () => {\r\n    Object.keys(workers).forEach(async (wid) => {\r\n      await workers[wid].terminate();\r\n    });\r\n    jobQueue = [];\r\n  };\r\n\r\n  return {\r\n    addWorker,\r\n    addJob,\r\n    terminate,\r\n    getQueueLen,\r\n    getNumWorkers,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst version = require('../../../package.json').version;\r\nconst defaultOptions = require('../../constants/defaultOptions');\r\n\r\n/*\r\n * Default options for browser worker\r\n */\r\nmodule.exports = {\r\n  ...defaultOptions,\r\n  workerPath: `https://cdn.jsdelivr.net/npm/tesseract.js@v${version}/dist/worker.min.js`,\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Entry point for tesseract.js, should be the entry when bundling.\r\n *\r\n * @fileoverview entry point for tesseract.js\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nrequire('regenerator-runtime/runtime');\r\nconst createScheduler = require('./createScheduler');\r\nconst createWorker = require('./createWorker');\r\nconst Tesseract = require('./Tesseract');\r\nconst languages = require('./constants/languages');\r\nconst OEM = require('./constants/OEM');\r\nconst PSM = require('./constants/PSM');\r\nconst { setLogging } = require('./utils/log');\r\n\r\nmodule.exports = {\r\n  languages,\r\n  OEM,\r\n  PSM,\r\n  createScheduler,\r\n  createWorker,\r\n  setLogging,\r\n  ...Tesseract,\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (key) => {\r\n  const env = {};\r\n\r\n  if (typeof WorkerGlobalScope !== 'undefined') {\r\n    env.type = 'webworker';\r\n  } else if (typeof document === 'object') {\r\n    env.type = 'browser';\r\n  } else if (typeof process === 'object' && typeof require === 'function') {\r\n    env.type = 'node';\r\n  }\r\n\r\n  if (typeof key === 'undefined') {\r\n    return env;\r\n  }\r\n\r\n  return env[key];\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  /*\r\n   * Use BlobURL for worker script by default\r\n   * TODO: remove this option\r\n   *\r\n   */\r\n  workerBlobURL: true,\r\n  logger: () => {},\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * send\r\n *\r\n * @name send\r\n * @function send packet to worker and create a job\r\n * @access public\r\n */\r\nmodule.exports = async (worker, packet) => {\r\n  worker.postMessage(packet);\r\n};\r\n","'use strict';\r\n\r\nlet logging = false;\r\n\r\nexports.logging = logging;\r\n\r\nexports.setLogging = (_logging) => {\r\n  logging = _logging;\r\n};\r\n\r\nexports.log = (...args) => (logging ? console.log.apply(this, args) : null);\r\n","'use strict';\r\n\r\n/**\r\n * terminateWorker\r\n *\r\n * @name terminateWorker\r\n * @function terminate worker\r\n * @access public\r\n */\r\nmodule.exports = (worker) => {\r\n  worker.terminate();\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Fuse.js v7.1.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2025 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When `true`, the algorithm will ignore diacritics (accents) in comparisons\n  ignoreDiacritics: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nconst stripDiacritics = String.prototype.normalize\n    ? ((str) => str.normalize('NFD').replace(/[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/g, ''))\n    : ((str) => str);\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, ignoreDiacritics, includeMatches } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// ❗Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      ignoreDiacritics,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive, ignoreDiacritics } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.1.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","\r\nimport Fuse from 'fuse.js';\r\n\r\n\r\nconst Default_Row_Format = {\r\n    Date: null,\r\n    Intervention: null,\r\n    AST: null,\r\n    AST_RangeLow: 8,\r\n    AST_RangeHigh: 33,\r\n    ALT: null,\r\n    ALT_RangeLow: 4,\r\n    ALT_RangeHigh: 36,\r\n    GLOBULIN: null,\r\n    GLOBULIN_RangeLow: 1.9,\r\n    GLOBULIN_RangeHigh: 4.1,\r\n    BUN: null,\r\n    BUN_RangeLow: 6,\r\n    BUN_RangeHigh: 20,\r\n    FASTING_GLUCOSE: null,\r\n    FASTING_GLUCOSE_RangeLow: 70,\r\n    FASTING_GLUCOSE_RangeHigh: 99,\r\n    A1C: null,\r\n    A1C_RangeLow: 0,\r\n    A1C_RangeHigh: 5.5,\r\n    RBC: null,\r\n    RBC_RangeLow: 4.5,\r\n    RBC_RangeHigh: 5.9,\r\n    HGB: null,\r\n    HGB_RangeLow: 13.5,\r\n    HGB_RangeHigh: 17.5,\r\n    HCT: null,\r\n    HCT_RangeLow: 41,\r\n    HCT_RangeHigh: 53,\r\n    WBC: null,\r\n    WBC_RangeLow: 4,\r\n    WBC_RangeHigh: 11,\r\n    PLATELETS: null,\r\n    PLATELETS_RangeLow: 150,\r\n    PLATELETS_RangeHigh: 400,\r\n    SODIUM: null,\r\n    SODIUM_RangeLow: 135,\r\n    SODIUM_RangeHigh: 145,\r\n    POTASSIUM: null,\r\n    POTASSIUM_RangeLow: 3.4,\r\n    POTASSIUM_RangeHigh: 5,\r\n    CHLORIDE: null,\r\n    CHLORIDE_RangeLow: 98,\r\n    CHLORIDE_RangeHigh: 108,\r\n    CALCIUM: null,\r\n    CALCIUM_RangeLow: 8.5,\r\n    CALCIUM_RangeHigh: 10.5,\r\n    CO2: null,\r\n    CO2_RangeLow: 23,\r\n    CO2_RangeHigh: 32,\r\n    IGF1: null,\r\n    IGF1_RangeLow: 120,\r\n    IGF1_RangeHigh: 160,\r\n    FASTING_INSULIN: null,\r\n    FASTING_INSULIN_RangeLow: 2,\r\n    FASTING_INSULIN_RangeHigh: 6,\r\n    BETA_HYDROXYBUTYRATE: null,\r\n    BETA_HYDROXYBUTYRATE_RangeLow: 0,\r\n    BETA_HYDROXYBUTYRATE_RangeHigh: 7,\r\n    B12: null,\r\n    B12_RangeLow: 500,\r\n    B12_RangeHigh: 1300,\r\n    MAGNESIUM: null,\r\n    MAGNESIUM_RangeLow: 1.7,\r\n    MAGNESIUM_RangeHigh: 2.4,\r\n    CRP: null,\r\n    CRP_RangeLow: 1,\r\n    CRP_RangeHigh: 3,\r\n    IRON: null,\r\n    IRON_MaleRangeLow: 50,\r\n    IRON_MaleRangeHigh: 150,\r\n    IRON_FemaleRangeLow: 35,\r\n    IRON_FemaleRangeHigh: 145,\r\n    CHOLESTEROL: null,\r\n    CHOLESTEROL_RangeLow: 0,\r\n    CHOLESTEROL_RangeHigh: 200,\r\n    HOMOCYSTEINE: null,\r\n    HOMOCYSTEINE_RangeLow: 5,\r\n    HOMOCYSTEINE_RangeHigh: 15,\r\n    Vitamin_D: null,\r\n    Vitamin_D_RangeLow: 40,\r\n    Vitamin_D_RangeHigh: 90\r\n};\r\n\r\n\r\nexport const field_names = [\r\n    { csvfield: 'AST', replacements: ['ast', 'aspartate aminotransferase', 'aspartate transaminase', 'sgot', 'serum glutamic oxaloacetic transaminase', 'asp aminotransferase'] },\r\n    { csvfield: 'ALT', replacements: ['alt', 'alanine aminotransferase', 'alanine transaminase', 'sgpt', 'serum glutamic pyruvic transaminase', 'ala aminotransferase', 'alat'] },\r\n    { csvfield: 'GLOBULIN', replacements: ['globulin', 'serum globulin', 'total globulin', 'glob', 'globulins'] },\r\n    { csvfield: 'BUN', replacements: ['bun', 'blood urea nitrogen', 'urea nitrogen', 'urea', 'blood urea'] },\r\n    { csvfield: 'FASTING_GLUCOSE', replacements: ['fasting glucose', 'glucose fasting', 'fbs', 'fasting blood sugar', 'glucose', 'blood glucose', 'serum glucose', 'plasma glucose', 'gluc', 'glu', 'fast glucose', 'glucose fast'] },\r\n    { csvfield: 'A1C', replacements: ['a1c', 'hba1c', 'hemoglobin a1c', 'glycated hemoglobin', 'glycohemoglobin', 'hgb a1c', 'hb a1c', 'a1c hemoglobin', 'hemoglobin a1c'] },\r\n    { csvfield: 'RBC', replacements: ['rbc', 'red blood cells', 'red blood cell count', 'erythrocytes', 'red cell count', 'rbc count', 'red cells'] },\r\n    { csvfield: 'HGB', replacements: ['hgb', 'hemoglobin', 'hb', 'haemoglobin', 'hemo'] },\r\n    { csvfield: 'HCT', replacements: ['hct', 'hematocrit', 'haematocrit', 'packed cell volume', 'pcv'] },\r\n    { csvfield: 'WBC', replacements: ['wbc', 'white blood cells', 'white blood cell count', 'leukocytes', 'white cell count', 'wbc count', 'white cells', 'leucocytes'] },\r\n    { csvfield: 'PLATELETS', replacements: ['platelets', 'platelet count', 'plt', 'thrombocytes', 'plts'] },\r\n    { csvfield: 'SODIUM', replacements: ['sodium', 'na', 'serum sodium', 'na+', 'sod'] },\r\n    { csvfield: 'POTASSIUM', replacements: ['potassium', 'k', 'serum potassium', 'k+', 'pot'] },\r\n    { csvfield: 'CHLORIDE', replacements: ['chloride', 'cl', 'serum chloride', 'cl-', 'chlor'] },\r\n    { csvfield: 'CALCIUM', replacements: ['calcium', 'ca', 'serum calcium', 'ca++', 'total calcium', 'ca2+'] },\r\n    { csvfield: 'CO2', replacements: ['co2', 'carbon dioxide', 'bicarbonate', 'hco3', 'total co2', 'co2 total', 'bicarb', 'tco2'] },\r\n    { csvfield: 'IGF1', replacements: ['igf1', 'igf-1', 'insulin-like growth factor 1', 'insulin like growth factor', 'somatomedin c', 'igf 1'] },\r\n    { csvfield: 'FASTING_INSULIN', replacements: ['fasting insulin', 'insulin fasting', 'insulin', 'serum insulin', 'plasma insulin', 'fast insulin', 'insulin fast'] },\r\n    { csvfield: 'BETA_HYDROXYBUTYRATE', replacements: ['beta hydroxybutyrate', 'beta-hydroxybutyrate', 'b-hydroxybutyrate', 'bhb', 'ketones', 'serum ketones', 'beta hydroxy butyrate'] },\r\n    { csvfield: 'B12', replacements: ['b12', 'vitamin b12', 'vitamin b-12', 'cobalamin', 'cyanocobalamin', 'b 12', 'vit b12', 'folate b12'] },\r\n    { csvfield: 'Vitamin_D', replacements: ['vitamin d', 'vitamin d3', 'vitamin d 25-oh', '25-hydroxyvitamin d', '25 oh vitamin d', 'calcidiol', 'vit d', 'vitamin d total', '25-oh-d3', '25(oh)d', 'vitamin d 25 hydroxy'] },\r\n    { csvfield: 'MAGNESIUM', replacements: ['magnesium', 'mg', 'serum magnesium', 'mg++', 'mag'] },\r\n    { csvfield: 'IRON', replacements: ['iron', 'fe', 'serum iron', 'iron serum', 'total iron'] },\r\n    { csvfield: 'CRP', replacements: ['crp', 'c-reactive protein', 'c reactive protein', 'c-rp', 'high sensitivity crp', 'hs-crp', 'hs crp'] },\r\n    { csvfield: 'CHOLESTEROL', replacements: ['cholesterol', 'total cholesterol', 'chol', 'tc', 'serum cholesterol', 'total chol'] },\r\n    { csvfield: 'HOMOCYSTEINE', replacements: ['homocysteine', 'hcy', 'homo-cysteine', 'homocyst', 'total homocysteine'] }\r\n];\r\n\r\n//placeholder for persistent curRowFormat\r\nlet curRowFormat = { ...Default_Row_Format };\r\n\r\n//modify row format based on field and range value\r\nexport async function modifyRowFormat(field, rangeValue, newValue) {\r\n    // Check if the field exists in curRowFormat\r\n    if (curRowFormat.hasOwnProperty(field)) {\r\n        // If modifying the main field value\r\n        if (!rangeValue) {\r\n            curRowFormat[field] = newValue;\r\n        } else {\r\n            // If modifying a range value (e.g., RangeLow or RangeHigh)\r\n            const rangeKey = `${field}_${rangeValue}`;\r\n            if (curRowFormat.hasOwnProperty(rangeKey)) {\r\n                curRowFormat[rangeKey] = newValue;\r\n            } else {\r\n                console.error(`Range key \"${rangeKey}\" does not exist in curRowFormat.`);\r\n            }\r\n        }\r\n    } else {\r\n        console.error(`Field \"${field}\" does not exist in curRowFormat.`);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport async function testingJsonProcessing( ocr_object_list) {\r\n    // This function is for debugging purposes to test the JSON processing logic\r\n\r\n    //mutates json input with a new property for potential of being a value and a bounding box center point\r\n    for (var word_object of ocr_object_list){\r\n        const possible_val = word_object.word_text\r\n        const val_score = scoreOCRNumber(possible_val)\r\n        word_object['number_score'] = val_score\r\n        word_object['center_value'] = {\r\n            centerx: (word_object.word_bbox.x1 + word_object.word_bbox.x0)/2,\r\n            centery: (word_object.word_bbox.y1 + word_object.word_bbox.y0)/2,\r\n        }\r\n        word_object['potential_keys_for'] = new Set()\r\n    }\r\n\r\n    //finds which ocr values are probably a sought after csv field (will mutate ocr_object_list)\r\n    let probable_keys = {}\r\n    for (const field of field_names) {\r\n        const field_name = field.csvfield\r\n        const field_replacements = field.replacements\r\n        const field_key_value_pair = await evalKeyConfidence(field_name, field_replacements, ocr_object_list)\r\n        probable_keys[field_key_value_pair.csv_value] = field_key_value_pair.closest_matches\r\n    }\r\n\r\n    console.log(ocr_object_list)\r\n\r\n    //search for innate structural offset between different probable keys and probable values\r\n    //isolate each page\r\n    let image_dic = {}\r\n    for (var word_object of ocr_object_list) {\r\n        const page_key = word_object.imageName\r\n        if (page_key in image_dic) {\r\n            // Check if key or value and add to appropriate key or value\r\n            if (word_object.potential_keys_for instanceof Set) {\r\n                if (word_object.potential_keys_for.size > 0) {\r\n                    // console.log('Pushing key:', word_object.word_text, 'potential_keys_for:', word_object.potential_keys_for);\r\n                    image_dic[page_key].keys.push(word_object);\r\n                    continue;\r\n                } else {\r\n                    // Debug: Set is empty\r\n                    //console.log('Empty potential_keys_for Set for:', word_object.word_text);\r\n                }\r\n            } else {\r\n                // Debug: Not a Set\r\n                //console.warn('potential_keys_for is not a Set for:', word_object.word_text, word_object.potential_keys_for);\r\n            }\r\n            if (word_object.number_score > 0.9) {\r\n                image_dic[page_key].values.push(word_object);\r\n                continue;\r\n            }\r\n        } else {\r\n            image_dic[page_key] = {\r\n                keys: [],\r\n                values: []\r\n            };\r\n        }\r\n    }\r\n    console.log(image_dic)\r\n    return image_dic\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n//  Processes the input JSON data to extract relevant fields and format them into a CSV row.\r\n//  Returns an array of objects, each representing a row in the CSV format.\r\nexport async function processJsonToCSV(ocr_object_list) {\r\n    let probable_keys = {}\r\n    for (const field of field_names) {\r\n        const field_name = field.csvfield\r\n        const field_replacements = field.replacements\r\n        const field_key_value_pair = evalKeyConfidence(field_name, field_replacements, ocr_object_list)\r\n        probable_keys[field_key_value_pair.csv_value] = field_key_value_pair.closest_matches\r\n    }\r\n}\r\n","import {createScheduler, createWorker, PSM} from 'tesseract.js';\r\nimport Fuse from 'fuse.js';\r\nimport { field_names} from './formatCsvRow';\r\n\r\n/**\r\n * Processes an array of image files using Tesseract.js OCR with multiple workers.\r\n * Performs text recognition on each image and extracts word-level data including confidence, choices, bounding boxes, and rotation.\r\n * Returns a flattened array of word objects for all processed images.\r\n *\r\n * @async\r\n * @param {File[]} files - Array of image files to be processed.\r\n * @returns {Promise<Object[]>} Resolves to an array of word objects containing OCR results for each image.\r\n * @throws {Error} Throws if no images are provided.\r\n */\r\nexport async function processTestImages(files) {    \r\n    if (!files || !files.length) {\r\n        throw new Error('No images provided to processTestImages.');\r\n    }\r\n\r\n    // Create a scheduler and workers\r\n    const workerN = 7;\r\n    const scheduler = createScheduler();\r\n\r\n    const workerGen = async () => {\r\n        const worker = await createWorker(\"eng\", 1, { \r\n            logger: m => console.log(m), cachePath: \".\",\r\n            workerPath: chrome.runtime.getURL('node_modules/tesseract.js/dist/worker.min.js'),\r\n            corePath: chrome.runtime.getURL('node_modules/tesseract.js-core/tesseract-core-lstm.wasm.js'),\r\n            workerBlobURL: false,\r\n        });\r\n        await worker.setParameters({\r\n            tessedit_pageseg_mode: PSM.SPARSE_TEXT_OSD\r\n        });\r\n        scheduler.addWorker(worker);\r\n    };\r\n\r\n    await Promise.all(Array(workerN).fill(0).map(async () => await workerGen())); \r\n    \r\n\r\n    \r\n    const jobPromises = files.map(async (file) => {\r\n        return scheduler.addJob('recognize', file, {}, {\r\n            text: true,\r\n            blocks: true,\r\n            hocr: false,\r\n            tsv: false,\r\n        })\r\n        .then(out => {\r\n            // console.log(out) //for debugging\r\n            const wordsArray = [];\r\n            const imageName = file.name\r\n            const rotateRadians = out.data.rotateRadians\r\n            if (out.data?.blocks) {\r\n                out.data.blocks.forEach((block, blockIdx) => {\r\n                    block.paragraphs.forEach((para, paraIdx) => {\r\n                        const paragraphKey = `block_${blockIdx};paragraph_${paraIdx}`;\r\n\r\n                        para.lines.forEach((line, lineIdx) => {\r\n                            const lineKey = `${paragraphKey};line_${lineIdx}`;\r\n                            line.words.forEach(word => {\r\n                                var word_choices = word.choices\r\n                                if (word_choices.length < 2) {\r\n                                    word_choices = []\r\n                                }\r\n                                wordsArray.push({\r\n                                    word_text: word.text,\r\n                                    word_confidence: word.confidence,\r\n                                    word_choices: word_choices,\r\n                                    word_bbox: word.bbox,\r\n                                    unique_paragraph_key: paragraphKey,\r\n                                    unique_line_key: lineKey,\r\n                                    imageName: imageName,\r\n                                    rotateRadians: rotateRadians,\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            return wordsArray\r\n        })\r\n        .catch(error => ({\r\n            imageName: file.webkitRelativePath || file.name,\r\n            error: error.message,\r\n        }));\r\n    });\r\n\r\n    const results = await Promise.all(jobPromises);\r\n    const flatResults = results.flat()\r\n    // Terminate workers and save results\r\n    await scheduler.terminate();\r\n\r\n    console.log('OCR processing completed.');\r\n    return flatResults;\r\n\r\n}\r\n\r\n/**\r\n * Scores the likelihood that a given string represents a valid OCR-extracted number.\r\n * The function attempts to correct common OCR misinterpretations (e.g., 'O' -> '0', 'I' -> '1'),\r\n * then uses a regex to extract a numeric value. The score is reduced based on the number of replacements\r\n * and regex corrections required.\r\n *\r\n * @param {string} str - The string to evaluate as a possible number.\r\n * @param {number} replace_strikes_weight - The penalty weight for each character replacement.\r\n * @param {number} regex_strikes_weight - The penalty weight for regex-based corrections.\r\n * @returns {number} A score between 0 and 1 indicating the confidence that the string is a valid number.\r\n */\r\nfunction scoreOCRNumber(str, replace_strikes_weight, regex_strikes_weight) {\r\n    const replacements = {\r\n        'o': '0', 'O': '0',\r\n        'I': '1', 'l': '1', 'L': '1',\r\n        'S': '5', 's': '5',\r\n        'B': '8',\r\n        'q': '9', 'g': '9',\r\n        'Z': '2', 'z': '2',\r\n        'G': '6',\r\n        'A': '4',\r\n        'T': '7'\r\n    };\r\n\r\n    //might want to consider how confidence of OCR factors into things, but at same time, lower confidence would not lead to anytrhing MORE accurate\r\n    let replace_strikes = 0;\r\n    let transformed = '';\r\n    let regex_strikes = 0;\r\n    let regex_transformed = '';\r\n\r\n    for (let i = 0; i < str.length; i++) {\r\n        const char = str[i];\r\n        if (replacements.hasOwnProperty(char)) {\r\n            transformed += replacements[char];\r\n            replace_strikes++;\r\n        } else {\r\n            transformed += char;\r\n        }\r\n    }\r\n    const match = transformed.match(/(?<!\\d)(\\d+(\\.\\d+)?)(?!\\d)/)\r\n    \r\n    if (match) {\r\n        regex_transformed = match[0];\r\n        if (transformed !== regex_transformed) {\r\n            regex_strikes = 1\r\n        }\r\n    } else {\r\n        return 0\r\n    }\r\n\r\n    if (regex_transformed.trim() === '' || isNaN(Number(regex_transformed))) {\r\n        return 0\r\n    } else {\r\n        return Math.max(1 - replace_strikes * replace_strikes_weight - regex_strikes * regex_strikes_weight, 0)\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Enhances an array of OCR word objects with additional metadata for markup analysis.\r\n * - Adds a 'number_score' property indicating the likelihood that the word represents a numeric value.\r\n * - Adds a 'center_value' property with the center coordinates of the word's bounding box.\r\n * - Adds a 'potential_keys_for' property (Set) for possible CSV field matches.\r\n * - Identifies probable keys and values for each image and groups them by image name.\r\n *\r\n * @param {Object[]} ocr_object_list - Array of word objects from OCR output. Each object should contain at least 'word_text', 'word_bbox', and 'imageName'.\r\n * @returns {Object} An object mapping image names to their detected keys and values:\r\n *   {\r\n *     [imageName]: {\r\n *       keys: Object[],   // Word objects identified as probable keys\r\n *       values: Object[]  // Word objects identified as probable values (numbers)\r\n *     }\r\n *   }\r\n */\r\nexport async function generateImageKeyValueMap(ocr_object_list, fuseThreshold, keySearchThreshold, maxKeyEntries, replaceStrikesWeight, regexStrikesWeight) {\r\n\r\n    for (var wordObj of ocr_object_list){\r\n        const wordText = wordObj.word_text;\r\n        const numberScore = scoreOCRNumber(wordText, replaceStrikesWeight, regexStrikesWeight);\r\n        wordObj['number_score'] = numberScore;\r\n        wordObj['center_value'] = {\r\n            centerx: (wordObj.word_bbox.x1 + wordObj.word_bbox.x0)/2,\r\n            centery: (wordObj.word_bbox.y1 + wordObj.word_bbox.y0)/2,\r\n        };\r\n        wordObj['potential_keys_for'] = new Set();\r\n    }\r\n\r\n    // Finds which ocr values are probably a sought after csv field (will mutate ocr_object_list)\r\n    let probableKeys = {};\r\n    for (const field of field_names) {\r\n        const csvField = field.csvfield;\r\n        const replacementList = field.replacements;\r\n        const keyConfidence = await evalKeyConfidence(csvField, replacementList, ocr_object_list, keySearchThreshold, maxKeyEntries, fuseThreshold);\r\n        probableKeys[keyConfidence.csv_value] = keyConfidence.closest_matches;\r\n    }\r\n\r\n    console.log(ocr_object_list)\r\n\r\n    //search for innate structural offset between different probable keys and probable values\r\n    //isolate each page\r\n    let imageDic = {};\r\n    for (var wordObj of ocr_object_list) {\r\n        const pageKey = wordObj.imageName;\r\n        if (pageKey in imageDic) {\r\n            // Check if key or value and add to appropriate key or value\r\n            if (wordObj.potential_keys_for.size > 0) {\r\n                imageDic[pageKey].keys.push(wordObj);\r\n                continue;\r\n            }\r\n            if (wordObj.number_score > 0.9) {\r\n                imageDic[pageKey].values.push(wordObj);\r\n                continue;\r\n            }\r\n        } else {\r\n            imageDic[pageKey] = {\r\n                keys: [],\r\n                values: []\r\n            };\r\n        }\r\n    }\r\n    console.log(imageDic);\r\n    return imageDic;\r\n}\r\n\r\n\r\n\r\n//Evaluates which json word values are the closest match to a given csv value\r\nasync function evalKeyConfidence(csv_value, csv_replacement_values, ocr_object_list, total_threshold, max_entries, fuseThreshold) {\r\n    // Type checks\r\n    if (typeof csv_value !== 'string') {\r\n        throw new Error('evalKeyConfidence: csv_value must be a string');\r\n    }\r\n    if (!Array.isArray(csv_replacement_values) || !csv_replacement_values.every(val => typeof val === 'string')) {\r\n        throw new Error('evalKeyConfidence: csv_replacement_values must be an array of strings');\r\n    }\r\n    \r\n    // console.log(`searching for \"${csv_value}\" and found`)\r\n    const fuseOptions = {\r\n        isCaseSensitive: false,\r\n        includeScore: true,\r\n        ignoreDiacritics: true, \r\n        shouldSort: true,\r\n        includeMatches: false,\r\n        findAllMatches: true,\r\n        minMatchCharLength: 2,\r\n        location: 0,\r\n        threshold: fuseThreshold, //tentative\r\n        distance: 100,\r\n        useExtendedSearch: false,\r\n        ignoreLocation: true,\r\n        ignoreFieldNorm: true,\r\n        // fieldNormWeight: 1,\r\n        keys: [\"word_text\"]\r\n    };\r\n    \r\n    //looped operation that finds best matches (searching based on main csv_value before csv_replacement value searches)\r\n    let valid_entries = [];\r\n    let threshold = 0.1;\r\n    let seen_indexes = new Set()\r\n    const fuse = new Fuse(ocr_object_list, fuseOptions);\r\n\r\n    while (threshold < total_threshold) {\r\n        const pure_results = fuse\r\n            .search(csv_value)\r\n            .filter(result => result.score < threshold && result.score >= threshold - 0.1);\r\n        for (const pure_result of pure_results) {\r\n            if (!seen_indexes.has(pure_result.refIndex)) {\r\n                seen_indexes.add(pure_result.refIndex)\r\n                valid_entries.push(pure_result)\r\n                pure_result.item.potential_keys_for.add({\r\n                    'matched_word': csv_value,\r\n                    'word_score': pure_result.score\r\n                })\r\n\r\n            }\r\n        }\r\n\r\n        // Try replacements only if nothing matched\r\n        if (pure_results.length === 0) {\r\n            for (const replacement_value of csv_replacement_values) {\r\n                const replacement_results = fuse\r\n                    .search(replacement_value)\r\n                    .filter(result => result.score < threshold && result.score >= threshold - 0.1);\r\n                for (const replacement_result of replacement_results) {\r\n                    if (!seen_indexes.has(replacement_result.refIndex)) {\r\n                        seen_indexes.add(replacement_result.refIndex);\r\n                        valid_entries.push(replacement_result);\r\n                        replacement_result.item.potential_keys_for.add({\r\n                            'matched_word': replacement_value,\r\n                            'word_score': replacement_result.score\r\n                        })\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Sort and slice to top 5 if needed\r\n        valid_entries.sort((a, b) => a.score - b.score);\r\n        if (valid_entries.length > max_entries) {\r\n            break;\r\n        }\r\n        threshold += 0.05;\r\n    }\r\n    \r\n    // console.log(valid_entries)\r\n    // console.log(ocr_object_list)\r\n    return {\r\n        csv_value: csv_value,\r\n        closest_matches: valid_entries\r\n    }\r\n}","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/**\n * pdfjsVersion = 5.3.31\n * pdfjsBuild = 47ad820d9\n */\n\n;// ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  SIGNATURE: 101\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    const {\n      platform,\n      userAgent\n    } = navigator;\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox: userAgent.includes(\"Firefox\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Promise.try !== \"function\") {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\n;// ./src/display/display_utils.js\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(window.screen.availWidth * window.screen.availHeight * this.pixelRatio ** 2 * (1 + capAreaFactor / 100));\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\n\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n  }\n  #addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      _uiManager.delete();\n    }, {\n      signal: _uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n    this.#altText = altText;\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this.#signatureManager = signatureManager;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      const ac = new AbortController();\n      const signal = this.combinedSignal(ac);\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        ac.abort();\n        activeLayer?.toggleDrawing(true);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      this._editorUndoBar?.hide();\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId || editor.id === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  isSelected = false;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      style\n    } = this.div;\n    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    if (this.#altText) {\n      await this._editToolbar.addAltText(this.#altText);\n    }\n    return this._editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10n);\n    this.#altText = new AltText(this);\n    if (this.#accessibilityData) {\n      this.#altText.data = this.#accessibilityData;\n      this.#accessibilityData = null;\n    }\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n    return true;\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n    return true;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  get canChangeContent() {\n    return false;\n  }\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id\n    });\n  }\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n}\n\n;// ./src/display/api_utils.js\n\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\n;// ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n;// ./src/display/filter_factory.js\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\nif (isNodeJS) {\n  warn(\"Please use the `legacy` build in Node.js environments.\");\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const {\n          fillStyle,\n          strokeStyle\n        } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height) {\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](path);\n      return;\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](path);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(path) {\n    this.stroke(path);\n  }\n  fill(path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(path, intersect);\n    }\n  }\n  eoFill(path) {\n    this.pendingEOFill = true;\n    this.fill(path);\n  }\n  fillStroke(path) {\n    this.fill(path, false);\n    this.stroke(path, false);\n    this.consumePath(path);\n  }\n  eoFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  closeFillStroke(path) {\n    this.fillStroke(path);\n  }\n  closeEOFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  endPath(path) {\n    this.consumePath(path);\n  }\n  rawFillPath(path) {\n    this.ctx.fill(path);\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      return;\n    }\n    const newPath = new Path2D();\n    const invTransf = ctx.getTransform().invertSelf();\n    for (const {\n      transform,\n      x,\n      y,\n      fontSize,\n      path\n    } of paths) {\n      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n    }\n    ctx.clip(newPath);\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(matrix) {\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill || patternStroke) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n    this.current.patternStroke = true;\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(color) {\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent() {\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(color) {\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  setFillTransparent() {\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath();\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/pdf_objects.js\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    });\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.3.31\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : isNodeJS ? PDFNodeStream : PDFNetworkStream;\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n  #progressiveDoneListeners = [];\n  #progressiveReadListeners = [];\n  #progressListeners = [];\n  #rangeListeners = [];\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this.#capability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n  #messageHandler = null;\n  #port = null;\n  #webWorker = null;\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts = new WeakMap();\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n    this.fromPort = params => {\n      deprecated(\"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\");\n      if (!params?.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      return this.create(params);\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n  }\n  get promise() {\n    return this.#capability.promise;\n  }\n  #resolve() {\n    this.#capability.resolve();\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this.#port;\n  }\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {});\n    this.#resolve();\n  }\n  #initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this.#setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this.#webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this.#setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this.#setupFakeWorker();\n  }\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this.#capability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this.#port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this.#capability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.create - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.3.31\";\nconst build = \"47ad820d9\";\n\n;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      data\n    } = this;\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id);\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n    return true;\n  }\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n    return true;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  get canChangeContent() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n        Util.rectBoundingBox(...bbox, minMax);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\nclass HighlightOutliner {\n  #box;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  #type;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa\n        }\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.#opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const A = buf[(i << 2) + 3];\n      if (A === 0) {\n        max = out[i] = 0xff;\n        continue;\n      }\n      const pix = out[i] = buf[i << 2];\n      if (pix > max) {\n        max = pix;\n      }\n      if (pix < min) {\n        min = pix;\n      }\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0; i < N; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.signatureManager && this.#description !== null) {\n      await toolbar.addEditSignatureButton(this._uiManager.signatureManager, this.#signatureUUID, this.#description);\n      toolbar.show();\n    }\n    return toolbar;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.#description = description;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.#description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor({\n      mode: AnnotationEditorType.STAMP\n    }, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._editToolbar.hide();\n      this._uiManager.editAltText(this, true);\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    editor.annotationElementId = data.id || null;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, build, createValidAbsoluteUrl, fetchData, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map","import * as pdfjsLib from './node_modules/pdfjs-dist/build/pdf.mjs';\r\npdfjsLib.GlobalWorkerOptions.workerSrc = './node_modules/pdfjs-dist/build/pdf.worker.mjs';\r\n\r\n\r\nexport async function cleanImage(file) {\r\n    // Placeholder for image cleaning logic\r\n    // This function should handle the image processing and return a cleaned image\r\n    return file; // For now, just return the original file\r\n}\r\n\r\n//filter function for incoming uploaded files\r\nexport async function filterImageFiles(files) {\r\n    \r\n    // Separate image and PDF files\r\n    const imageFiles = Array.from(files)\r\n        .filter(file => file.type.startsWith('image/'));\r\n    const pdfFiles = Array.from(files).filter(file => file.type === 'application/pdf');\r\n\r\n    // Convert PDF files to File objects\r\n    function canvasToFile(canvas, name) {\r\n        return new Promise(resolve => {\r\n            canvas.toBlob(blob => {\r\n                resolve(new File([blob], name, { type: 'image/png' }));\r\n            }, 'image/png');\r\n        });\r\n    }\r\n\r\n    const convertedPdfFiles = [];\r\n    for (const pdffile of pdfFiles) {\r\n        try {\r\n            const arrayBuffer = await pdffile.arrayBuffer();\r\n            const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });\r\n            const pdf = await loadingTask.promise;\r\n            console.log(`PDF loaded: ${pdffile.name}`);\r\n            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\r\n                const page = await pdf.getPage(pageNum);\r\n                const viewport = page.getViewport({ scale: 2 });\r\n                const canvas = document.createElement('canvas');\r\n                const context = canvas.getContext('2d');\r\n                canvas.width = viewport.width;\r\n                canvas.height = viewport.height;\r\n                await page.render({ canvasContext: context, viewport }).promise;\r\n                const uniqueName = `${pdffile.name}_page${pageNum}.png`;\r\n                const file = await canvasToFile(canvas, uniqueName);\r\n                convertedPdfFiles.push(file);\r\n            }\r\n        } catch (err) {\r\n            console.error(`Error loading ${pdffile.name}:`, err);\r\n        }\r\n    }\r\n\r\n    // Combine all image sources as File objects\r\n    const allImages = [...imageFiles, ...convertedPdfFiles];\r\n    if (!Array.isArray(allImages) || allImages.length === 0) {\r\n        throw new Error('No valid images found after filtering.');\r\n    }\r\n\r\n    // Clean all images and filter out failures\r\n    const processedImages = await Promise.all(\r\n        allImages.map(async image => {\r\n            // Clean image (async)\r\n            return await cleanImage(image);\r\n        })\r\n    );\r\n\r\n    // Remove any undefined images\r\n    return processedImages.filter(img => img !== undefined);\r\n}","// Draws lines between key centers and value centers for each image, returns array of marked-up image Files\r\nexport async function markupImages(original_images, markup_data) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n    console.log(markup_data)\r\n\r\n    const markedImages = [];\r\n    for (const original_file of original_images) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n\r\n        if (markup_data[image_name]) {\r\n            const keys = markup_data[image_name].keys;\r\n            for (const key_object of keys) {\r\n                const key_center = key_object.center_value;\r\n                if (key_center && typeof key_center.centerx === 'number' && typeof key_center.centery === 'number') {\r\n                    ctx.beginPath();\r\n                    ctx.arc(key_center.centerx, key_center.centery, 10, 0, 2 * Math.PI);\r\n                    ctx.strokeStyle = 'red';\r\n                    ctx.lineWidth = 3;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n            const values = markup_data[image_name].values;\r\n            for (const value_object of values) {\r\n                const value_center = value_object.center_value;\r\n                if (value_center && typeof value_center.centerx === 'number' && typeof value_center.centery === 'number') {\r\n                    ctx.beginPath();\r\n                    ctx.arc(value_center.centerx, value_center.centery, 10, 0, 2 * Math.PI);\r\n                    ctx.strokeStyle = 'blue';\r\n                    ctx.lineWidth = 3;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n\r\n            // Draw green lines between each key and its 2 closest values\r\n            for (const key_object of keys) {\r\n                const key_center = key_object.center_value;\r\n                if (!key_center || typeof key_center.centerx !== 'number' || typeof key_center.centery !== 'number') continue;\r\n                // Compute distances to all values\r\n                const distances = [];\r\n                for (const value_object of values) {\r\n                    const value_center = value_object.center_value;\r\n                    if (!value_center || typeof value_center.centerx !== 'number' || typeof value_center.centery !== 'number') continue;\r\n                    const dx = key_center.centerx - value_center.centerx;\r\n                    const dy = key_center.centery - value_center.centery;\r\n                    const dist = Math.sqrt(dx * dx + dy * dy);\r\n                    distances.push({ value_center, dist });\r\n                }\r\n                // Sort by distance and take 2 closest\r\n                distances.sort((a, b) => a.dist - b.dist);\r\n                const closest = distances.slice(0, 2);\r\n                for (const { value_center } of closest) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(key_center.centerx, key_center.centery);\r\n                    ctx.lineTo(value_center.centerx, value_center.centery);\r\n                    ctx.strokeStyle = 'green';\r\n                    ctx.lineWidth = 2;\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n            \r\n        } else {\r\n            console.warn('No markup data for image:', image_name);\r\n        }\r\n\r\n\r\n\r\n\r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}\r\n\r\n// Process\r\nexport async function markupOCR(original_images, OCR_word_list) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n    console.log(OCR_word_list)\r\n\r\n    const markedImages = [];\r\n    for (const original_file of original_images) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n        \r\n        const cur_page_words = OCR_word_list.filter(word_object => image_name === word_object.imageName);\r\n        console.log(cur_page_words)\r\n        for (const cur_page_word of cur_page_words) {\r\n            const word_bbox = cur_page_word.word_bbox;\r\n            if (word_bbox && typeof word_bbox.x0 === 'number' && typeof word_bbox.y0 === 'number' && typeof word_bbox.x1 === 'number' && typeof word_bbox.y1 === 'number') {\r\n                ctx.beginPath();\r\n                ctx.rect(word_bbox.x0, word_bbox.y0, word_bbox.x1 - word_bbox.x0, word_bbox.y1 - word_bbox.y0);\r\n\r\n                if (cur_page_word.potential_keys_for.size > 0) {\r\n                    ctx.strokeStyle = 'blue';\r\n                } else if (cur_page_word.number_score > 0.9) {\r\n                    ctx.strokeStyle = 'red';\r\n                } else {\r\n                    ctx.strokeStyle = 'green';\r\n                }\r\n\r\n                ctx.lineWidth = 3;\r\n                ctx.stroke();\r\n\r\n                // Draw the word text at the center\r\n                const word_center = cur_page_word.center_value;\r\n                ctx.save();\r\n                ctx.font = '16px Arial';\r\n                ctx.fillStyle = 'white';\r\n                ctx.textAlign = 'center';\r\n                ctx.textBaseline = 'middle';\r\n                ctx.fillText(cur_page_word.word_text, word_center.centerx, word_center.centery);\r\n                ctx.restore();\r\n            }\r\n        }\r\n        \r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}","import {processTestImages, generateImageKeyValueMap} from './imageProcessor.js'\r\nimport {filterImageFiles} from './imageCleaner.js'\r\nimport {processJsonToCSV, testingJsonProcessing} from './formatCsvRow.js'\r\nimport {markupImages, markupOCR} from './imageMarkup.js'\r\n\r\ndocument.querySelectorAll('input[type=\"range\"]').forEach(slider => {\r\n    const spanId = slider.id + '-value';\r\n    const display = document.getElementById(spanId);\r\n    if (display) {\r\n    display.textContent = slider.value;\r\n    slider.addEventListener('input', () => {\r\n        display.textContent = slider.value;\r\n    });\r\n    }\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    document.getElementById('process-btn-test').addEventListener('click', async () => {\r\n        const fuseThreshold = parseFloat(document.getElementById('slider-fuse-threshold').value);\r\n        const keySearchThreshold = parseFloat(document.getElementById('slider-key-search-threshold').value);\r\n        const maxKeyEntries = parseInt(document.getElementById('slider-max-key-entries').value, 10);\r\n        const replaceStrikesWeight = parseFloat(document.getElementById('slider-replace-strikes-weight').value);\r\n        const regexStrikesWeight = parseFloat(document.getElementById('slider-regex-strikes-weight').value);\r\n        console.log({\r\n            fuseThreshold,\r\n            keySearchThreshold,\r\n            maxKeyEntries,\r\n            replaceStrikesWeight,\r\n            regexStrikesWeight\r\n        });\r\n        try {\r\n            const files = document.getElementById('bloodwork-files').files;\r\n            const allImages = await filterImageFiles(files);\r\n            console.log('Number of image files found:', allImages.length);\r\n            console.log('Files ready for processing', allImages);\r\n            const final_data = await processTestImages(allImages);\r\n\r\n            // Download raw JSON output\r\n            // const json = JSON.stringify(final_data, null, 2);\r\n            // const json_blob = new Blob([json], { type: 'application/json' });\r\n            // const json_url = URL.createObjectURL(json_blob);\r\n            // const json_a = document.createElement('a');\r\n            // json_a.href = json_url;\r\n            // json_a.download = 'raw_json_output.json';\r\n            // document.body.appendChild(json_a);\r\n            // json_a.click();\r\n            // document.body.removeChild(json_a);\r\n            // URL.revokeObjectURL(json_url);\r\n            \r\n            const imageKeyValueMap = await generateImageKeyValueMap(\r\n                final_data,\r\n                fuseThreshold,\r\n                keySearchThreshold,\r\n                maxKeyEntries,\r\n                replaceStrikesWeight,\r\n                regexStrikesWeight\r\n            );\r\n            const ocr_marked_image_list = await markupOCR(allImages, final_data)\r\n            const marked_image_list = await markupImages(allImages, imageKeyValueMap)\r\n\r\n            // Open a new window and display all marked images there\r\n            const imageWindow = window.open('', '_blank', 'width=1200,height=900,scrollbars=yes,resizable=yes');\r\n            if (imageWindow) {\r\n                imageWindow.document.write('<!DOCTYPE html><html><head><title>Marked Images</title>');\r\n                imageWindow.document.write('<style>body{background:#222;color:#fff;font-family:sans-serif;margin:0;padding:2em;} .img-wrap{margin:2em 0;text-align:center;} img{max-width:95vw;max-height:80vh;box-shadow:0 0 10px #000;} button{position:fixed;top:1em;right:1em;z-index:1000;padding:0.5em 1em;font-size:1.2em;}</style>');\r\n                imageWindow.document.write('</head><body>');\r\n                imageWindow.document.write('<button onclick=\"window.close()\">Close</button>');\r\n                for (const markedFile of ocr_marked_image_list) {\r\n                    const url = imageWindow.URL.createObjectURL(markedFile);\r\n                    imageWindow.document.write('<div class=\"img-wrap\"><img src=\"' + url + '\" alt=\"' + (markedFile.name || 'marked_image.png') + '\"></div>');\r\n                }\r\n                imageWindow.document.write('</body></html>');\r\n                imageWindow.document.close();\r\n            } else {\r\n                alert('Popup blocked! Please allow popups for this site to view marked images.');\r\n            }\r\n\r\n\r\n            //debug testing\r\n            // const modified_json = JSON.stringify(await testingJsonProcessing(final_data), null, 2);\r\n            // const json_blob = new Blob([modified_json], { type: 'application/json' });\r\n            // const json_url = URL.createObjectURL(json_blob);\r\n            // const json_a = document.createElement('a');\r\n            // json_a.href = json_url;\r\n            // json_a.download = 'mod_json_output.json';\r\n            // document.body.appendChild(json_a);\r\n            // json_a.click();\r\n            // document.body.removeChild(json_a);\r\n            // URL.revokeObjectURL(json_url);\r\n\r\n\r\n\r\n            // Download CSV output\r\n            // const csv = await processJsonToCSV(final_data); // Pass the object, not the string\r\n            // const csv_blob = new Blob([csv], { type: 'application/csv' });\r\n            // const csv_url = URL.createObjectURL(csv_blob);\r\n            // const csv_a = document.createElement('a');\r\n            // csv_a.href = csv_url;\r\n            // csv_a.download = 'output.csv';\r\n            // document.body.appendChild(csv_a);\r\n            // csv_a.click();\r\n            // document.body.removeChild(csv_a);\r\n            // URL.revokeObjectURL(csv_url);\r\n        } catch (err) {\r\n            console.error('Error during processing:', err);\r\n        }\r\n    });\r\n});\r\n"],"names":["readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","target","error","code","Error","readAsArrayBuffer","loadImage","async","image","data","test","atob","split","map","c","charCodeAt","resp","fetch","arrayBuffer","HTMLElement","tagName","src","poster","toBlob","OffscreenCanvas","convertToBlob","File","Blob","Uint8Array","module","exports","workerPath","workerBlobURL","worker","URL","type","Worker","createObjectURL","defaultOptions","spawnWorker","terminateWorker","onMessage","send","getId","jobCounter","id","_id","action","payload","resolveURL","s","window","location","href","options","opts","forEach","key","resolvePaths","createJob","log","OEM","workerCounter","langs","oem","LSTM_ONLY","_options","config","logger","errorHandler","promises","currentLangs","currentOem","currentConfig","lstmOnlyCore","DEFAULT","includes","legacyCore","workerResReject","workerResResolve","workerRes","event","message","startJob","jobId","workerId","loadLanguageInternal","_langs","langPath","dataPath","cachePath","cacheMethod","gzip","lstmOnly","legacyLang","initializeInternal","_oem","_config","status","promiseId","userJobId","resolveObj","load","console","warn","writeText","path","text","method","args","readText","encoding","removeFile","FS","reinitialize","TESSERACT_ONLY","TESSERACT_LSTM_COMBINED","filter","x","push","length","then","setParameters","params","recognize","output","detect","terminate","corePath","logging","catch","AFR","AMH","ARA","ASM","AZE","AZE_CYRL","BEL","BEN","BOD","BOS","BUL","CAT","CEB","CES","CHI_SIM","CHI_TRA","CHR","CYM","DAN","DEU","DZO","ELL","ENG","ENM","EPO","EST","EUS","FAS","FIN","FRA","FRK","FRM","GLE","GLG","GRC","GUJ","HAT","HEB","HIN","HRV","HUN","IKU","IND","ISL","ITA","ITA_OLD","JAV","JPN","KAN","KAT","KAT_OLD","KAZ","KHM","KIR","KOR","KUR","LAO","LAT","LAV","LIT","MAL","MAR","MKD","MLT","MSA","MYA","NEP","NLD","NOR","ORI","PAN","POL","POR","PUS","RON","RUS","SAN","SIN","SLK","SLV","SPA","SPA_OLD","SQI","SRP","SRP_LATN","SWA","SWE","SYR","TAM","TEL","TGK","TGL","THA","TIR","TUR","UIG","UKR","URD","UZB","UZB_CYRL","VIE","YID","prefix","cnt","Math","random","toString","slice","createWorker","finally","OSD_ONLY","AUTO_OSD","AUTO_ONLY","AUTO","SINGLE_COLUMN","SINGLE_BLOCK_VERT_TEXT","SINGLE_BLOCK","SINGLE_LINE","SINGLE_WORD","CIRCLE_WORD","SINGLE_CHAR","SPARSE_TEXT","SPARSE_TEXT_OSD","RAW_LINE","handler","onmessage","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","schedulerCounter","workers","runningWorkers","jobQueue","getNumWorkers","dequeue","wIds","queue","job","w","shift","apply","addWorker","addJob","wid","getQueueLen","version","createScheduler","Tesseract","languages","PSM","setLogging","env","WorkerGlobalScope","document","process","packet","postMessage","_logging","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","isArray","Array","getTag","isString","isNumber","isObject","isDefined","isBlank","trim","KeyStore","_keys","_keyMap","totalWeight","createKey","weight","get","keyId","toJSON","JSON","stringify","getFn","createKeyPath","createKeyId","INVALID_KEY_WEIGHT_VALUE","join","Config","isCaseSensitive","ignoreDiacritics","includeScore","shouldSort","sortFn","a","b","score","idx","includeMatches","findAllMatches","minMatchCharLength","threshold","distance","useExtendedSearch","list","arr","deepGet","index","isObjectLike","isBoolean","baseToString","len","ignoreLocation","ignoreFieldNorm","fieldNormWeight","SPACE","FuseIndex","norm","mantissa","cache","Map","m","pow","numTokens","match","has","n","parseFloat","round","set","clear","isCreated","setIndexRecords","setSources","docs","records","setKeys","_keysMap","doc","docIndex","_addString","_addObject","add","size","removeAt","splice","getValueForItemAtKeyId","item","v","$","keyIndex","subRecords","stack","nestedArrIndex","subRecord","k","createIndex","myIndex","computeScore$1","pattern","errors","currentLocation","expectedLocation","accuracy","proximity","abs","MAX_BITS","createPatternAlphabet","mask","char","stripDiacritics","String","normalize","str","replace","BitapSearch","toLowerCase","chunks","addChunk","startIndex","alphabet","remainder","end","substr","searchIn","isMatch","indices","allIndices","totalScore","hasMatches","patternAlphabet","patternLen","textLen","max","min","currentThreshold","bestLocation","computeMatches","matchMask","indexOf","lastBitArr","finalScore","binMax","binMin","binMid","floor","start","bitArr","j","charMatch","matchmask","convertMaskToIndices","search","BaseMatch","isMultiMatch","getMatch","multiRegex","isSingleMatch","singleRegex","exp","matches","FuzzyMatch","super","_bitapSearch","IncludeMatch","searchers","startsWith","endsWith","searchersLen","SPACE_RE","MultiMatchSet","Set","registeredSearchers","createSearcher","searcherClass","condition","LogicalOperator","KeyType","isExpression","query","convertToExplicit","parse","auto","isQueryPath","isPath","isLeaf","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","searcher","node","children","operator","transformMatches","refIndex","transformScore","Fuse","_keyStore","setCollection","_docs","_myIndex","remove","predicate","results","getIndex","limit","_searchStringList","_searchObjectList","_searchLogical","Number","EPSILON","computeScore","sort","transformers","transformer","format","expression","evaluate","_findMatches","res","child","resultMap","expResults","_typeof","o","ownKeys","e","r","t","getOwnPropertySymbols","getOwnPropertyDescriptor","_defineProperty","toPrimitive","_toPrimitive","_toPropertyKey","parseIndex","parseQuery","register","queryItem","found","token","_","numMatches","qLen","pLen","field_names","csvfield","replacements","u","_regeneratorDefine2","f","p","y","G","d","bind","l","_regenerator","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","processTestImages","_x","_processTestImages","_callee4","files","scheduler","workerGen","jobPromises","flatResults","_context4","_ref","_callee","_context","chrome","getURL","tessedit_pageseg_mode","all","fill","_callee2","_context2","_ref3","_callee3","file","_context3","blocks","hocr","tsv","out","_out$data","wordsArray","imageName","rotateRadians","block","blockIdx","paragraphs","para","paraIdx","paragraphKey","concat","lines","line","lineIdx","lineKey","words","word","word_choices","choices","word_text","word_confidence","confidence","word_bbox","bbox","unique_paragraph_key","unique_line_key","webkitRelativePath","_x12","flat","scoreOCRNumber","replace_strikes_weight","regex_strikes_weight","replace_strikes","transformed","regex_strikes","regex_transformed","generateImageKeyValueMap","_x2","_x3","_x4","_x5","_x6","_x7","_generateImageKeyValueMap","_callee5","ocr_object_list","fuseThreshold","keySearchThreshold","maxKeyEntries","replaceStrikesWeight","regexStrikesWeight","_iterator","_step","wordObj","wordText","numberScore","probableKeys","_iterator2","_step2","field","csvField","replacementList","keyConfidence","imageDic","_iterator3","_step3","pageKey","_t","_t2","_context5","_createForOfIteratorHelper","centerx","x1","x0","centery","y1","y0","evalKeyConfidence","csv_value","closest_matches","potential_keys_for","number_score","_x8","_x9","_x0","_x1","_x10","_x11","_evalKeyConfidence","_callee6","csv_replacement_values","total_threshold","max_entries","fuseOptions","valid_entries","seen_indexes","fuse","pure_results","_iterator4","_step4","pure_result","_iterator5","_step5","replacement_value","replacement_results","_iterator6","_step6","replacement_result","_context6","every","getOwnPropertyDescriptors","defineProperties","_objectSpread","Date","Intervention","AST","AST_RangeLow","AST_RangeHigh","ALT","ALT_RangeLow","ALT_RangeHigh","GLOBULIN","GLOBULIN_RangeLow","GLOBULIN_RangeHigh","BUN","BUN_RangeLow","BUN_RangeHigh","FASTING_GLUCOSE","FASTING_GLUCOSE_RangeLow","FASTING_GLUCOSE_RangeHigh","A1C","A1C_RangeLow","A1C_RangeHigh","RBC","RBC_RangeLow","RBC_RangeHigh","HGB","HGB_RangeLow","HGB_RangeHigh","HCT","HCT_RangeLow","HCT_RangeHigh","WBC","WBC_RangeLow","WBC_RangeHigh","PLATELETS","PLATELETS_RangeLow","PLATELETS_RangeHigh","SODIUM","SODIUM_RangeLow","SODIUM_RangeHigh","POTASSIUM","POTASSIUM_RangeLow","POTASSIUM_RangeHigh","CHLORIDE","CHLORIDE_RangeLow","CHLORIDE_RangeHigh","CALCIUM","CALCIUM_RangeLow","CALCIUM_RangeHigh","CO2","CO2_RangeLow","CO2_RangeHigh","IGF1","IGF1_RangeLow","IGF1_RangeHigh","FASTING_INSULIN","FASTING_INSULIN_RangeLow","FASTING_INSULIN_RangeHigh","BETA_HYDROXYBUTYRATE","BETA_HYDROXYBUTYRATE_RangeLow","BETA_HYDROXYBUTYRATE_RangeHigh","B12","B12_RangeLow","B12_RangeHigh","MAGNESIUM","MAGNESIUM_RangeLow","MAGNESIUM_RangeHigh","CRP","CRP_RangeLow","CRP_RangeHigh","IRON","IRON_MaleRangeLow","IRON_MaleRangeHigh","IRON_FemaleRangeLow","IRON_FemaleRangeHigh","CHOLESTEROL","CHOLESTEROL_RangeLow","CHOLESTEROL_RangeHigh","HOMOCYSTEINE","HOMOCYSTEINE_RangeLow","HOMOCYSTEINE_RangeHigh","Vitamin_D","Vitamin_D_RangeLow","Vitamin_D_RangeHigh","isNodeJS","versions","nw","electron","FONT_IDENTITY_MATRIX","LINE_FACTOR","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","SIGNATURE","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","verbosity","setVerbosityLevel","level","isInteger","getVerbosityLevel","msg","unreachable","assert","cond","createValidAbsoluteUrl","url","baseUrl","addDefaultProtocol","dots","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","protocol","_isValidProtocol","updateUrlHash","hash","allowRel","shadow","prop","nonSerializable","BaseException","PasswordException","UnknownErrorException","details","InvalidPDFException","ResponseException","missing","FormatError","AbortException","bytesToString","bytes","MAX_ARGUMENT_COUNT","fromCharCode","strBuf","chunkEnd","chunk","subarray","stringToBytes","util_FeatureTest","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","isOffscreenCanvasSupported","isImageDecoderSupported","ImageDecoder","platform","userAgent","navigator","isAndroid","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","CSS","supports","hexNumbers","from","padStart","Util","makeHexColor","g","scaleMinMax","minMax","temp","m1","m2","applyTransform","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","axialAlignedBoundingBox","rect","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","inverseTransform","singularValueDecompose2dScale","matrix","first","second","sqrt","normalizeRect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","rectBoundingBox","x2","x3","y2","y3","mt","tt","ttt","delta","sqrtDelta","bezierBoundingBox","NormalizeRegex","NormalizationMap","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","MathClamp","toBase64Util","toBase64","btoa","try","sumPrecise","numbers","reduce","SVG_NS","PixelsPerInch","static","PDF","fetchData","isValidFetchUrl","baseURI","response","ok","statusText","json","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","PageViewport","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","width","height","rawDims","dims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","substring","isPdfFile","filename","StatTimer","started","times","time","now","timeEnd","outBuf","longest","padEnd","noContextMenu","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","input","RegExp","exec","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getRGB","color","colorRGB","getCurrentTransform","ctx","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","style","useRound","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","capAreaFactor","maxAreaScale","Infinity","maxWidthScale","maxHeightScale","capPixels","maxScale","devicePixelRatio","winPixels","ceil","screen","availWidth","availHeight","SupportedImageMimeTypes","EditorToolbar","editor","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","createElement","classList","signal","_uiManager","_signal","addEventListener","buttons","className","append","position","toolbarPosition","direction","insetInlineEnd","top","_focusEventsAllowed","element","capture","hide","hideDropdown","show","shown","editorType","button","tabIndex","delete","divider","addAltText","altText","prepend","addColorPicker","colorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","updateEditSignatureButton","description","title","destroy","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","ImageManager","_isSVGFittingCanvas","getContext","willReadFrequently","Image","decode","drawImage","getImageData","rawData","bitmap","refCounter","isSvg","mustRemoveAspectRatioPromise","imageElement","imagePromise","svgUrl","readAsDataURL","createImageBitmap","getFromFile","lastModified","getFromUrl","getFromBlob","blobPromise","getFromId","getFromCanvas","canvas","offscreen","transferToImageBitmap","getSvgUrl","deleteId","transferFromImageBitmap","close","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","KeyboardManager","callbacks","allKeys","callback","isMacKey","at","altKey","ctrlKey","metaKey","shiftKey","bubbles","checker","ColorManager","_colors","colors","visibility","colorScheme","body","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","_colorsMapping","getHexCode","AnnotationEditorUIManager","AbortController","_editorUndoBar","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","hasSomethingToControl","textInputChecker","_self","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","mlManager","editorUndoBar","supportsPinchToZoom","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_supportsPinchToZoom","abort","layer","clearTimeout","combinedSignal","ac","AbortSignal","any","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","pair","highlightColorNames","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","firstTime","getSignature","switchToMode","mode","on","once","dispatch","source","setPreference","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","textLayer","currentLayer","hasTextLayer","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","closest","getSelectionBoxes","empty","isNoneMode","createAndAddNewEditor","showAllEditors","addToAnnotationStorage","setValue","activeLayer","toggleDrawing","pointerup","blur","hasSelection","lastEditor","lastActiveElement","keydown","keyup","copy","cut","paste","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","editors","serialized","serialize","clipboardData","setData","getData","ex","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","entries","some","assign","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","promise","withResolvers","loadSignatures","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateColor","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","updateUIForDefaultProperties","toggleSelected","select","isSelected","firstSelectedEditor","cleanUndoStack","drawingEditor","endDrawingSession","commit","noCommit","totalX","totalY","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","setCanvas","addMissingCanvas","AltText","added","review","initialize","l10n","_l10n","label","onClick","_reportTelemetry","guessedText","focusVisible","hasData","setGuessedText","generatedAltText","toggleAltTextBadge","badge","isForCopying","decorative","textWithDisclaimer","cancel","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","removeAttribute","textContent","parentNode","getElementForAltText","TouchManager","isPinchingDisabled","isPinchingStopped","onPinchStart","onPinching","onPinchEnd","passive","MIN_TOUCH_DISTANCE_TO_PINCH","touches","pointerDownAC","cancelPointerDown","pointerType","opt","onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","screen0X","screen0Y","screen1X","screen1Y","touchInfo","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","hypot","pDistance","origin","AnnotationEditor","_isCopy","_editToolbar","_initialOptions","_initialData","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","_type","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","focusin","focusout","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","_onTranslating","translate","scrollIntoView","findNewParent","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","angle","pageTranslationToScreen","parentScale","setDims","fixDims","widthPercent","heightPercent","getInitialTranslation","classes","savedDraggable","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","_onResized","newWidth","newHeight","_round","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","deltaX","deltaY","ratioX","ratioY","fromKeyboard","lastScreenX","lastScreenY","oldDiag","_onResizing","altTextFinish","addEditToolbar","removeEditToolbar","addContainer","editToolbarDiv","before","getClientDimensions","addAltTextButton","altTextData","guessedAltText","setGuessedAltText","serializeAltText","hasAltText","hasAltTextData","defaultL10nId","maxWidth","maxHeight","isResizable","_origin","prevDistance","factor","transfCenterPoint","newTransfCenterPoint","pointerdown","hasDraggingStarted","cancelDrag","_onStopDragging","clientX","clientY","pointerId","_onStartDragging","isPrimary","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","isInEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","bottom","right","innerHeight","innerWidth","rotate","_angle","serializeDeleted","popupRef","accessibilityData","isCopy","timeout","makeResizable","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","lastChild","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","canChangeContent","dblclick","_editorType","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","ArrayBuffer","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","resetModifiedIds","modifiedIds","ids","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","baseFontName","font","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","otherRequest","_loadTestFont","int32","offset","spliceString","insert","called","XXXX_VALUE","checksum","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","objId","cmds","Path2D","fontExtraProperties","getFactoryUrlProp","isRefProxy","num","gen","isValidExplicitDest","validRef","validName","dest","page","zoom","argsLen","allowNull","LoopbackPort","listener","rmAbort","aborted","onAbort","removeEventListener","onFn","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","stream","capability","reason","actionName","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","onPull","onCancel","success","streamController","dataReason","allSettled","BaseCanvasFactory","enableHWA","_createCanvas","canvasAndContext","DOMCanvasFactory","BaseCMapReaderFactory","isCompressed","_fetch","cMapData","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","DOMFilterFactory","docId","contain","svg","createElementNS","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","step","newStart","newStep","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","DOMStandardFontDataFactory","BaseWasmFactory","DOMWasmFactory","node_utils_fetchData","fs","getBuiltinModule","readFile","NodeFilterFactory","NodeCanvasFactory","createRequire","require","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","PathType","applyBoundingBox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","ownerBBox","current","getClippedPathBoundingBox","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p2","p3","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","Float32Array","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","strokeStyle","fillColor","strokeColor","convertBlackAndWhiteToRGBA","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","CachedCanvases","canvasFactory","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","patternStroke","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","clipBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","img","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","op","path2d","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","needRestore","paths","pendingTextPaths","invTransf","preMultiplySelf","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","invPatternTransform","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","GlobalWorkerOptions","workerPort","workerSrc","Metadata","parsedData","getRaw","INTERNAL","OptionalContentGroup","renderingIntent","usage","rbGroups","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","policy","setVisibility","preserveRB","rbGroup","otherId","setOCGState","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","onProgress","_removeRangeReader","reader","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","read","requestCapability","_end","_queuedChunk","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","validateRangeRequestCapabilities","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","decoder","TextDecoder","fatal","quotindex","replaceAll","extvalue","encodingend","charset","hex","getFilenameFromContentDispositionHeader","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","abortController","credentials","redirect","getArrayBuffer","PDFFetchStream","_responseOrigin","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","getReader","_readCapability","responseOrigin","NetworkManager","currXhrId","pendingRequests","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","lengthComputable","_requestId","_close","urlRegex","PDFNodeStream","sourceUrl","pathToFileURL","parseUrlOrPath","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_readableStream","lstat","stat","_setReadableStream","createReadStream","_error","readableStream","INITIAL_DATA","PDFObjects","TextLayer","FontInspector","WeakMap","textContentSource","fontFamilyMap","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","cleanup","alpha","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","XfaText","xfa","walk","shouldBuildText","attributes","getDocument","task","PDFDocumentLoadingTask","getUrlProp","Buffer","getDataProp","password","rangeTransport","PDFDataRangeTransport","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","port","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","transport","WorkerTransport","_transport","_capability","onPassword","_pendingDestroy","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","_intentStates","getViewport","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","_isSameOrigin","otherUrl","base","other","_createCDNWrapper","wrapper","fromPort","terminateEarly","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","import","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","modifiedIdsHash","terminated","sink","readyReason","_numPages","htmlForXfa","updatePassword","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","imageData","refStr","metadata","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_canvas","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","G_CMYK","G_RGB","G_rgb","G_HTML","RGB_G","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","RGB_CMYK","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","html","storage","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","root","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","titleObj","contentsObj","richText","_isEditable","isEditable","hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","findIndex","selectChild","editable","changeEx","keyDown","PopupElement","elementIds","ariaHasPopup","trigger","flatMap","baseColor","outlineColor","header","dateObj","valueOf","contents","_formatContents","popupLines","popupContent","lineAttributes","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","vertices","points","polyline","it","inkLists","thickness","AnnotationLayer","accessibilityManager","annotationEditorUIManager","structTreeLayer","_annotationEditorUIManager","hasEditableAnnotations","contentElement","ariaAttributes","getAriaAttributes","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","addLinkAnnotations","_defaultBorderStyle","replaceWith","after","editableAnnotation","_hasNoCanvas","getEditableAnnotations","getEditableAnnotation","rawWidth","EOL_PATTERN","FreeTextEditor","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","innerText","prevChild","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","_translate","svgRound","_normalizePoint","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","scaleFactor","innerMargin","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","lastTopX","lastTopY","lastBottomX","lastBottomY","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","last","N","lastPoint","lastPointX","lastPointY","ltrCallback","newOutliner","getNewOutline","outliner","HighlightOutliner","shiftedMinX","shiftedMinY","lastEdge","edge","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","HighlightOutline","middle","y4","polygon","prevX","prevY","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","ColorPicker","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","blue","green","pink","red","yellow","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeDraw","drawOutline","rootClass","highlightOutline","free","updateProperties","setColorAndOpacity","opa","savedOpacity","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","draw","highlightDiv","pointerover","hovered","pointerleave","setPosition","startHighlighting","_freeHighlight","_freeHighlightId","_freeHighlightClipId","DrawingOptions","updateProperty","updateSVGProperty","toSVGProperties","updateAll","DrawingEditor","_drawId","mustBeCommitted","_addOutlines","drawOutlines","drawId","drawingOptions","_drawingOptions","defaultProperties","_mergeSVGProperties","defaultSVGProperties","p1Keys","getDefaultDrawingOptions","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","_currentDrawId","_updateProperty","savedValue","setter","getPathResizingSVGProperties","getPathResizedSVGProperties","_y","getPathTranslatedSVGProperties","moving","updateParent","pW","pH","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","_endDraw","isCancellable","removeLastElement","_drawMove","timeStamp","startNew","_cleanup","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","InkDrawOutliner","Float64Array","InkDrawOutline","firstX","firstY","lastIndexOf","secondX","secondY","c1x","c1y","c2x","c2y","build","serializedLines","serializedPoints","rescaleFn","newLines","margin","marginX","marginY","oldMarginX","oldMarginY","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","PRECISION","s1x","s1y","s2x","s2y","newParentWidth","newParentHeight","InkDrawingOptions","viewerParameters","_viewParameters","InkEditor","ContourDrawOutline","SignatureExtractor","sigmaSFactor","sigmaR","kernelSize","i0","j0","Int32Array","kk","lnbd","nbd","contours","ij","pix","i2","j2","isHole","contour","contour0","shiftI","shiftJ","i1","j1","i3","j3","i4","j4","ij3","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","sigmaS","kernel","sigmaS2","halfSize","rangeValues","sigmaR2","histogram","sum","neighbour","Uint8ClampedArray","M","L","spos","originalBitmap","prevWidth","prevHeight","log2","isteps","grayImage","extractContoursFromText","fontStyle","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","uint8Buf","contourList","processDrawnLines","curves","mustSmooth","areContours","linesAndPoints","xScale","yScale","newCurves","reducedPoints","newPoints","compressSignature","bufferType","minDiff","maxDiff","outlinesLength","dx","Int8Array","Int16Array","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","write","BufferCtor","diffs","Response","readable","decompressSignature","signatureData","fromBase64","DecompressionStream","numberOfDrawings","diffsOffset","POINTS_PROPERTIES_NUMBER","SignatureOptions","DrawnSignatureOptions","SignatureEditor","_defaultDrawnSignatureOptions","hasDescription","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","isSignature","alt","StampEditor","bitmapUrl","bitmapFile","pasteEditor","getAsFile","hasAltTextStats","fromId","alt_text_modal","alt_text_type","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","accept","click","bitmapId","MAX_RATIO","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","scaledWidth","scaledHeight","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","toUrl","toDataURL","missingCanvas","structParent","_structTree","changes","isSame","isSameAltText","stamps","area","prevData","isSamePageIndex","AnnotationEditorLayer","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","annotationElementIds","editables","changedAnnotations","resetAnnotations","attach","detach","removePointerInTextLayer","currentMode","startDrawingSession","pause","oldRotation","DrawLayer","_svgFactory","pathId","clipPathUse","isPathUpdatable","hasClip","use","mustRemoveSelfIntersections","maskId","use1","use2","cloneNode","elementOrId","pathElement","cleanImage","_cleanImage","filterImageFiles","_filterImageFiles","imageFiles","pdfFiles","canvasToFile","convertedPdfFiles","pdffile","pdf","pageNum","uniqueName","allImages","processedImages","pdfjsLib","_arrayLikeToArray","_unsupportedIterableToArray","_n","F","markupImages","_markupImages","original_images","markup_data","markedImages","_loop","_t3","original_file","image_name","key_object","key_center","value_object","value_center","_key_object","_key_center","distances","_value_object","_value_center","dy","_value_center2","markedBlob","markedFile","center_value","arc","revokeObjectURL","_regeneratorValues","markupOCR","_markupOCR","OCR_word_list","_iterator7","_step7","_loop2","_t4","cur_page_words","_iterator8","_step8","cur_page_word","word_center","word_object","textBaseline","_pdfjsTestingUtils","FeatureTest","getFilenameFromUrl","getPdfFilenameFromUrl","defaultFilename","reFilename","splitURI","suggestedFilename","getXfaPageViewport","xfaPage","ImageKind","normalizeUnicode","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","slider","spanId","getElementById","final_data","imageKeyValueMap","ocr_marked_image_list","imageWindow","alert"],"sourceRoot":""}