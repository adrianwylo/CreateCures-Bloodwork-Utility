{"version":3,"file":"popup.bundle.js","mappings":"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","sources":["webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/loadImage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/spawnWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createJob.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/resolvePaths.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createWorker.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/languages.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getId.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/Tesseract.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/PSM.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/onMessage.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/OEM.js","webpack://createcures-bloodwork-utility/./node_modules/regenerator-runtime/runtime.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/createScheduler.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/index.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/getEnvironment.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/constants/defaultOptions.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/send.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/utils/log.js","webpack://createcures-bloodwork-utility/./node_modules/tesseract.js/src/worker/browser/terminateWorker.js","webpack://createcures-bloodwork-utility/webpack/bootstrap","webpack://createcures-bloodwork-utility/./node_modules/fuse.js/dist/fuse.mjs","webpack://createcures-bloodwork-utility/./formatCsvRow.js","webpack://createcures-bloodwork-utility/./imageProcessor.js","webpack://createcures-bloodwork-utility/./node_modules/pdfjs-dist/build/pdf.mjs","webpack://createcures-bloodwork-utility/./imageCleaner.js","webpack://createcures-bloodwork-utility/./imageMarkup.js","webpack://createcures-bloodwork-utility/./popup.js"],"sourcesContent":["'use strict';\r\n\r\n/**\r\n * readFromBlobOrFile\r\n *\r\n * @name readFromBlobOrFile\r\n * @function\r\n * @access private\r\n */\r\nconst readFromBlobOrFile = (blob) => (\r\n  new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      resolve(fileReader.result);\r\n    };\r\n    fileReader.onerror = ({ target: { error: { code } } }) => {\r\n      reject(Error(`File could not be read! Code=${code}`));\r\n    };\r\n    fileReader.readAsArrayBuffer(blob);\r\n  })\r\n);\r\n\r\n/**\r\n * loadImage\r\n *\r\n * @name loadImage\r\n * @function load image from different source\r\n * @access private\r\n */\r\nconst loadImage = async (image) => {\r\n  let data = image;\r\n  if (typeof image === 'undefined') {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof image === 'string') {\r\n    // Base64 Image\r\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\r\n      data = atob(image.split(',')[1])\r\n        .split('')\r\n        .map((c) => c.charCodeAt(0));\r\n    } else {\r\n      const resp = await fetch(image);\r\n      data = await resp.arrayBuffer();\r\n    }\r\n  } else if (typeof HTMLElement !== 'undefined' && image instanceof HTMLElement) {\r\n    if (image.tagName === 'IMG') {\r\n      data = await loadImage(image.src);\r\n    }\r\n    if (image.tagName === 'VIDEO') {\r\n      data = await loadImage(image.poster);\r\n    }\r\n    if (image.tagName === 'CANVAS') {\r\n      await new Promise((resolve) => {\r\n        image.toBlob(async (blob) => {\r\n          data = await readFromBlobOrFile(blob);\r\n          resolve();\r\n        });\r\n      });\r\n    }\r\n  } else if (typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas) {\r\n    const blob = await image.convertToBlob();\r\n    data = await readFromBlobOrFile(blob);\r\n  } else if (image instanceof File || image instanceof Blob) {\r\n    data = await readFromBlobOrFile(image);\r\n  }\r\n\r\n  return new Uint8Array(data);\r\n};\r\n\r\nmodule.exports = loadImage;\r\n","'use strict';\r\n\r\n/**\r\n * spawnWorker\r\n *\r\n * @name spawnWorker\r\n * @function create a new Worker in browser\r\n * @access public\r\n */\r\nmodule.exports = ({ workerPath, workerBlobURL }) => {\r\n  let worker;\r\n  if (Blob && URL && workerBlobURL) {\r\n    const blob = new Blob([`importScripts(\"${workerPath}\");`], {\r\n      type: 'application/javascript',\r\n    });\r\n    worker = new Worker(URL.createObjectURL(blob));\r\n  } else {\r\n    worker = new Worker(workerPath);\r\n  }\r\n\r\n  return worker;\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Tesseract Worker adapter for browser\r\n *\r\n * @fileoverview Tesseract Worker adapter for browser\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nconst defaultOptions = require('./defaultOptions');\r\nconst spawnWorker = require('./spawnWorker');\r\nconst terminateWorker = require('./terminateWorker');\r\nconst onMessage = require('./onMessage');\r\nconst send = require('./send');\r\nconst loadImage = require('./loadImage');\r\n\r\nmodule.exports = {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  send,\r\n  loadImage,\r\n};\r\n","'use strict';\r\n\r\nconst getId = require('./utils/getId');\r\n\r\nlet jobCounter = 0;\r\n\r\nmodule.exports = ({\r\n  id: _id,\r\n  action,\r\n  payload = {},\r\n}) => {\r\n  let id = _id;\r\n  if (typeof id === 'undefined') {\r\n    id = getId('Job', jobCounter);\r\n    jobCounter += 1;\r\n  }\r\n\r\n  return {\r\n    id,\r\n    action,\r\n    payload,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst isBrowser = require('./getEnvironment')('type') === 'browser';\r\n\r\nconst resolveURL = isBrowser ? s => (new URL(s, window.location.href)).href : s => s; // eslint-disable-line\r\n\r\nmodule.exports = (options) => {\r\n  const opts = { ...options };\r\n  ['corePath', 'workerPath', 'langPath'].forEach((key) => {\r\n    if (options[key]) {\r\n      opts[key] = resolveURL(opts[key]);\r\n    }\r\n  });\r\n  return opts;\r\n};\r\n","'use strict';\r\n\r\nconst resolvePaths = require('./utils/resolvePaths');\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\nconst OEM = require('./constants/OEM');\r\nconst {\r\n  defaultOptions,\r\n  spawnWorker,\r\n  terminateWorker,\r\n  onMessage,\r\n  loadImage,\r\n  send,\r\n} = require('./worker/node');\r\n\r\nlet workerCounter = 0;\r\n\r\nmodule.exports = async (langs = 'eng', oem = OEM.LSTM_ONLY, _options = {}, config = {}) => {\r\n  const id = getId('Worker', workerCounter);\r\n  const {\r\n    logger,\r\n    errorHandler,\r\n    ...options\r\n  } = resolvePaths({\r\n    ...defaultOptions,\r\n    ..._options,\r\n  });\r\n  const promises = {};\r\n\r\n  // Current langs, oem, and config file.\r\n  // Used if the user ever re-initializes the worker using `worker.reinitialize`.\r\n  const currentLangs = typeof langs === 'string' ? langs.split('+') : langs;\r\n  let currentOem = oem;\r\n  let currentConfig = config;\r\n  const lstmOnlyCore = [OEM.DEFAULT, OEM.LSTM_ONLY].includes(oem) && !options.legacyCore;\r\n\r\n  let workerResReject;\r\n  let workerResResolve;\r\n  const workerRes = new Promise((resolve, reject) => {\r\n    workerResResolve = resolve;\r\n    workerResReject = reject;\r\n  });\r\n  const workerError = (event) => { workerResReject(event.message); };\r\n\r\n  let worker = spawnWorker(options);\r\n  worker.onerror = workerError;\r\n\r\n  workerCounter += 1;\r\n\r\n  const startJob = ({ id: jobId, action, payload }) => (\r\n    new Promise((resolve, reject) => {\r\n      log(`[${id}]: Start ${jobId}, action=${action}`);\r\n      // Using both `action` and `jobId` in case user provides non-unique `jobId`.\r\n      const promiseId = `${action}-${jobId}`;\r\n      promises[promiseId] = { resolve, reject };\r\n      send(worker, {\r\n        workerId: id,\r\n        jobId,\r\n        action,\r\n        payload,\r\n      });\r\n    })\r\n  );\r\n\r\n  const load = () => (\r\n    console.warn('`load` is depreciated and should be removed from code (workers now come pre-loaded)')\r\n  );\r\n\r\n  const loadInternal = (jobId) => (\r\n    startJob(createJob({\r\n      id: jobId, action: 'load', payload: { options: { lstmOnly: lstmOnlyCore, corePath: options.corePath, logging: options.logging } },\r\n    }))\r\n  );\r\n\r\n  const writeText = (path, text, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'writeFile', args: [path, text] },\r\n    }))\r\n  );\r\n\r\n  const readText = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'readFile', args: [path, { encoding: 'utf8' }] },\r\n    }))\r\n  );\r\n\r\n  const removeFile = (path, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method: 'unlink', args: [path] },\r\n    }))\r\n  );\r\n\r\n  const FS = (method, args, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'FS',\r\n      payload: { method, args },\r\n    }))\r\n  );\r\n\r\n  const loadLanguageInternal = (_langs, jobId) => startJob(createJob({\r\n    id: jobId,\r\n    action: 'loadLanguage',\r\n    payload: {\r\n      langs: _langs,\r\n      options: {\r\n        langPath: options.langPath,\r\n        dataPath: options.dataPath,\r\n        cachePath: options.cachePath,\r\n        cacheMethod: options.cacheMethod,\r\n        gzip: options.gzip,\r\n        lstmOnly: [OEM.DEFAULT, OEM.LSTM_ONLY].includes(currentOem)\r\n          && !options.legacyLang,\r\n      },\r\n    },\r\n  }));\r\n\r\n  const initializeInternal = (_langs, _oem, _config, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'initialize',\r\n      payload: { langs: _langs, oem: _oem, config: _config },\r\n    }))\r\n  );\r\n\r\n  const reinitialize = (langs = 'eng', oem, config, jobId) => { // eslint-disable-line\r\n\r\n    if (lstmOnlyCore && [OEM.TESSERACT_ONLY, OEM.TESSERACT_LSTM_COMBINED].includes(oem)) throw Error('Legacy model requested but code missing.');\r\n\r\n    const _oem = oem || currentOem;\r\n    currentOem = _oem;\r\n\r\n    const _config = config || currentConfig;\r\n    currentConfig = _config;\r\n\r\n    // Only load langs that are not already loaded.\r\n    // This logic fails if the user downloaded the LSTM-only English data for a language\r\n    // and then uses `worker.reinitialize` to switch to the Legacy engine.\r\n    // However, the correct data will still be downloaded after initialization fails\r\n    // and this can be avoided entirely if the user loads the correct data ahead of time.\r\n    const langsArr = typeof langs === 'string' ? langs.split('+') : langs;\r\n    const _langs = langsArr.filter((x) => !currentLangs.includes(x));\r\n    currentLangs.push(..._langs);\r\n\r\n    if (_langs.length > 0) {\r\n      return loadLanguageInternal(_langs, jobId)\r\n        .then(() => initializeInternal(langs, _oem, _config, jobId));\r\n    }\r\n\r\n    return initializeInternal(langs, _oem, _config, jobId);\r\n  };\r\n\r\n  const setParameters = (params = {}, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'setParameters',\r\n      payload: { params },\r\n    }))\r\n  );\r\n\r\n  const recognize = async (image, opts = {}, output = {\r\n    text: true,\r\n  }, jobId) => (\r\n    startJob(createJob({\r\n      id: jobId,\r\n      action: 'recognize',\r\n      payload: { image: await loadImage(image), options: opts, output },\r\n    }))\r\n  );\r\n\r\n  const detect = async (image, jobId) => {\r\n    if (lstmOnlyCore) throw Error('`worker.detect` requires Legacy model, which was not loaded.');\r\n\r\n    return startJob(createJob({\r\n      id: jobId,\r\n      action: 'detect',\r\n      payload: { image: await loadImage(image) },\r\n    }));\r\n  };\r\n\r\n  const terminate = async () => {\r\n    if (worker !== null) {\r\n      /*\r\n      await startJob(createJob({\r\n        id: jobId,\r\n        action: 'terminate',\r\n      }));\r\n      */\r\n      terminateWorker(worker);\r\n      worker = null;\r\n    }\r\n    return Promise.resolve();\r\n  };\r\n\r\n  onMessage(worker, ({\r\n    workerId, jobId, status, action, data,\r\n  }) => {\r\n    const promiseId = `${action}-${jobId}`;\r\n    if (status === 'resolve') {\r\n      log(`[${workerId}]: Complete ${jobId}`);\r\n      promises[promiseId].resolve({ jobId, data });\r\n      delete promises[promiseId];\r\n    } else if (status === 'reject') {\r\n      promises[promiseId].reject(data);\r\n      delete promises[promiseId];\r\n      if (action === 'load') workerResReject(data);\r\n      if (errorHandler) {\r\n        errorHandler(data);\r\n      } else {\r\n        throw Error(data);\r\n      }\r\n    } else if (status === 'progress') {\r\n      logger({ ...data, userJobId: jobId });\r\n    }\r\n  });\r\n\r\n  const resolveObj = {\r\n    id,\r\n    worker,\r\n    load,\r\n    writeText,\r\n    readText,\r\n    removeFile,\r\n    FS,\r\n    reinitialize,\r\n    setParameters,\r\n    recognize,\r\n    detect,\r\n    terminate,\r\n  };\r\n\r\n  loadInternal()\r\n    .then(() => loadLanguageInternal(langs))\r\n    .then(() => initializeInternal(langs, oem, config))\r\n    .then(() => workerResResolve(resolveObj))\r\n    .catch(() => {});\r\n\r\n  return workerRes;\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * languages with existing tesseract traineddata\r\n * https://tesseract-ocr.github.io/tessdoc/Data-Files#data-files-for-version-400-november-29-2016\r\n */\r\n\r\n/**\r\n * @typedef {object} Languages\r\n * @property {string} AFR Afrikaans\r\n * @property {string} AMH Amharic\r\n * @property {string} ARA Arabic\r\n * @property {string} ASM Assamese\r\n * @property {string} AZE Azerbaijani\r\n * @property {string} AZE_CYRL Azerbaijani - Cyrillic\r\n * @property {string} BEL Belarusian\r\n * @property {string} BEN Bengali\r\n * @property {string} BOD Tibetan\r\n * @property {string} BOS Bosnian\r\n * @property {string} BUL Bulgarian\r\n * @property {string} CAT Catalan; Valencian\r\n * @property {string} CEB Cebuano\r\n * @property {string} CES Czech\r\n * @property {string} CHI_SIM Chinese - Simplified\r\n * @property {string} CHI_TRA Chinese - Traditional\r\n * @property {string} CHR Cherokee\r\n * @property {string} CYM Welsh\r\n * @property {string} DAN Danish\r\n * @property {string} DEU German\r\n * @property {string} DZO Dzongkha\r\n * @property {string} ELL Greek, Modern (1453-)\r\n * @property {string} ENG English\r\n * @property {string} ENM English, Middle (1100-1500)\r\n * @property {string} EPO Esperanto\r\n * @property {string} EST Estonian\r\n * @property {string} EUS Basque\r\n * @property {string} FAS Persian\r\n * @property {string} FIN Finnish\r\n * @property {string} FRA French\r\n * @property {string} FRK German Fraktur\r\n * @property {string} FRM French, Middle (ca. 1400-1600)\r\n * @property {string} GLE Irish\r\n * @property {string} GLG Galician\r\n * @property {string} GRC Greek, Ancient (-1453)\r\n * @property {string} GUJ Gujarati\r\n * @property {string} HAT Haitian; Haitian Creole\r\n * @property {string} HEB Hebrew\r\n * @property {string} HIN Hindi\r\n * @property {string} HRV Croatian\r\n * @property {string} HUN Hungarian\r\n * @property {string} IKU Inuktitut\r\n * @property {string} IND Indonesian\r\n * @property {string} ISL Icelandic\r\n * @property {string} ITA Italian\r\n * @property {string} ITA_OLD Italian - Old\r\n * @property {string} JAV Javanese\r\n * @property {string} JPN Japanese\r\n * @property {string} KAN Kannada\r\n * @property {string} KAT Georgian\r\n * @property {string} KAT_OLD Georgian - Old\r\n * @property {string} KAZ Kazakh\r\n * @property {string} KHM Central Khmer\r\n * @property {string} KIR Kirghiz; Kyrgyz\r\n * @property {string} KOR Korean\r\n * @property {string} KUR Kurdish\r\n * @property {string} LAO Lao\r\n * @property {string} LAT Latin\r\n * @property {string} LAV Latvian\r\n * @property {string} LIT Lithuanian\r\n * @property {string} MAL Malayalam\r\n * @property {string} MAR Marathi\r\n * @property {string} MKD Macedonian\r\n * @property {string} MLT Maltese\r\n * @property {string} MSA Malay\r\n * @property {string} MYA Burmese\r\n * @property {string} NEP Nepali\r\n * @property {string} NLD Dutch; Flemish\r\n * @property {string} NOR Norwegian\r\n * @property {string} ORI Oriya\r\n * @property {string} PAN Panjabi; Punjabi\r\n * @property {string} POL Polish\r\n * @property {string} POR Portuguese\r\n * @property {string} PUS Pushto; Pashto\r\n * @property {string} RON Romanian; Moldavian; Moldovan\r\n * @property {string} RUS Russian\r\n * @property {string} SAN Sanskrit\r\n * @property {string} SIN Sinhala; Sinhalese\r\n * @property {string} SLK Slovak\r\n * @property {string} SLV Slovenian\r\n * @property {string} SPA Spanish; Castilian\r\n * @property {string} SPA_OLD Spanish; Castilian - Old\r\n * @property {string} SQI Albanian\r\n * @property {string} SRP Serbian\r\n * @property {string} SRP_LATN Serbian - Latin\r\n * @property {string} SWA Swahili\r\n * @property {string} SWE Swedish\r\n * @property {string} SYR Syriac\r\n * @property {string} TAM Tamil\r\n * @property {string} TEL Telugu\r\n * @property {string} TGK Tajik\r\n * @property {string} TGL Tagalog\r\n * @property {string} THA Thai\r\n * @property {string} TIR Tigrinya\r\n * @property {string} TUR Turkish\r\n * @property {string} UIG Uighur; Uyghur\r\n * @property {string} UKR Ukrainian\r\n * @property {string} URD Urdu\r\n * @property {string} UZB Uzbek\r\n * @property {string} UZB_CYRL Uzbek - Cyrillic\r\n * @property {string} VIE Vietnamese\r\n * @property {string} YID Yiddish\r\n */\r\n\r\n/**\r\n  * @type {Languages}\r\n  */\r\nmodule.exports = {\r\n  AFR: 'afr',\r\n  AMH: 'amh',\r\n  ARA: 'ara',\r\n  ASM: 'asm',\r\n  AZE: 'aze',\r\n  AZE_CYRL: 'aze_cyrl',\r\n  BEL: 'bel',\r\n  BEN: 'ben',\r\n  BOD: 'bod',\r\n  BOS: 'bos',\r\n  BUL: 'bul',\r\n  CAT: 'cat',\r\n  CEB: 'ceb',\r\n  CES: 'ces',\r\n  CHI_SIM: 'chi_sim',\r\n  CHI_TRA: 'chi_tra',\r\n  CHR: 'chr',\r\n  CYM: 'cym',\r\n  DAN: 'dan',\r\n  DEU: 'deu',\r\n  DZO: 'dzo',\r\n  ELL: 'ell',\r\n  ENG: 'eng',\r\n  ENM: 'enm',\r\n  EPO: 'epo',\r\n  EST: 'est',\r\n  EUS: 'eus',\r\n  FAS: 'fas',\r\n  FIN: 'fin',\r\n  FRA: 'fra',\r\n  FRK: 'frk',\r\n  FRM: 'frm',\r\n  GLE: 'gle',\r\n  GLG: 'glg',\r\n  GRC: 'grc',\r\n  GUJ: 'guj',\r\n  HAT: 'hat',\r\n  HEB: 'heb',\r\n  HIN: 'hin',\r\n  HRV: 'hrv',\r\n  HUN: 'hun',\r\n  IKU: 'iku',\r\n  IND: 'ind',\r\n  ISL: 'isl',\r\n  ITA: 'ita',\r\n  ITA_OLD: 'ita_old',\r\n  JAV: 'jav',\r\n  JPN: 'jpn',\r\n  KAN: 'kan',\r\n  KAT: 'kat',\r\n  KAT_OLD: 'kat_old',\r\n  KAZ: 'kaz',\r\n  KHM: 'khm',\r\n  KIR: 'kir',\r\n  KOR: 'kor',\r\n  KUR: 'kur',\r\n  LAO: 'lao',\r\n  LAT: 'lat',\r\n  LAV: 'lav',\r\n  LIT: 'lit',\r\n  MAL: 'mal',\r\n  MAR: 'mar',\r\n  MKD: 'mkd',\r\n  MLT: 'mlt',\r\n  MSA: 'msa',\r\n  MYA: 'mya',\r\n  NEP: 'nep',\r\n  NLD: 'nld',\r\n  NOR: 'nor',\r\n  ORI: 'ori',\r\n  PAN: 'pan',\r\n  POL: 'pol',\r\n  POR: 'por',\r\n  PUS: 'pus',\r\n  RON: 'ron',\r\n  RUS: 'rus',\r\n  SAN: 'san',\r\n  SIN: 'sin',\r\n  SLK: 'slk',\r\n  SLV: 'slv',\r\n  SPA: 'spa',\r\n  SPA_OLD: 'spa_old',\r\n  SQI: 'sqi',\r\n  SRP: 'srp',\r\n  SRP_LATN: 'srp_latn',\r\n  SWA: 'swa',\r\n  SWE: 'swe',\r\n  SYR: 'syr',\r\n  TAM: 'tam',\r\n  TEL: 'tel',\r\n  TGK: 'tgk',\r\n  TGL: 'tgl',\r\n  THA: 'tha',\r\n  TIR: 'tir',\r\n  TUR: 'tur',\r\n  UIG: 'uig',\r\n  UKR: 'ukr',\r\n  URD: 'urd',\r\n  UZB: 'uzb',\r\n  UZB_CYRL: 'uzb_cyrl',\r\n  VIE: 'vie',\r\n  YID: 'yid',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (prefix, cnt) => (\r\n  `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`\r\n);\r\n","'use strict';\r\n\r\nconst createWorker = require('./createWorker');\r\n\r\nconst recognize = async (image, langs, options) => {\r\n  const worker = await createWorker(langs, 1, options);\r\n  return worker.recognize(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nconst detect = async (image, options) => {\r\n  const worker = await createWorker('osd', 0, options);\r\n  return worker.detect(image)\r\n    .finally(async () => {\r\n      await worker.terminate();\r\n    });\r\n};\r\n\r\nmodule.exports = {\r\n  recognize,\r\n  detect,\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * PSM = Page Segmentation Mode\r\n */\r\nmodule.exports = {\r\n  OSD_ONLY: '0',\r\n  AUTO_OSD: '1',\r\n  AUTO_ONLY: '2',\r\n  AUTO: '3',\r\n  SINGLE_COLUMN: '4',\r\n  SINGLE_BLOCK_VERT_TEXT: '5',\r\n  SINGLE_BLOCK: '6',\r\n  SINGLE_LINE: '7',\r\n  SINGLE_WORD: '8',\r\n  CIRCLE_WORD: '9',\r\n  SINGLE_CHAR: '10',\r\n  SPARSE_TEXT: '11',\r\n  SPARSE_TEXT_OSD: '12',\r\n  RAW_LINE: '13',\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (worker, handler) => {\r\n  worker.onmessage = ({ data }) => { // eslint-disable-line\r\n    handler(data);\r\n  };\r\n};\r\n","'use strict';\r\n\r\n/*\r\n * OEM = OCR Engine Mode, and there are 4 possible modes.\r\n *\r\n * By default tesseract.js uses LSTM_ONLY mode.\r\n *\r\n */\r\nmodule.exports = {\r\n  TESSERACT_ONLY: 0,\r\n  LSTM_ONLY: 1,\r\n  TESSERACT_LSTM_COMBINED: 2,\r\n  DEFAULT: 3,\r\n};\r\n","/**\r\n * Copyright (c) 2014-present, Facebook, Inc.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nvar runtime = (function (exports) {\r\n  \"use strict\";\r\n\r\n  var Op = Object.prototype;\r\n  var hasOwn = Op.hasOwnProperty;\r\n  var defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; };\r\n  var undefined; // More compressible than void 0.\r\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\r\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\r\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\r\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\r\n\r\n  function define(obj, key, value) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n    return obj[key];\r\n  }\r\n  try {\r\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\r\n    define({}, \"\");\r\n  } catch (err) {\r\n    define = function(obj, key, value) {\r\n      return obj[key] = value;\r\n    };\r\n  }\r\n\r\n  function wrap(innerFn, outerFn, self, tryLocsList) {\r\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\r\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\r\n    var generator = Object.create(protoGenerator.prototype);\r\n    var context = new Context(tryLocsList || []);\r\n\r\n    // The ._invoke method unifies the implementations of the .next,\r\n    // .throw, and .return methods.\r\n    defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) });\r\n\r\n    return generator;\r\n  }\r\n  exports.wrap = wrap;\r\n\r\n  // Try/catch helper to minimize deoptimizations. Returns a completion\r\n  // record like context.tryEntries[i].completion. This interface could\r\n  // have been (and was previously) designed to take a closure to be\r\n  // invoked without arguments, but in all the cases we care about we\r\n  // already have an existing method we want to call, so there's no need\r\n  // to create a new function object. We can even get away with assuming\r\n  // the method takes exactly one argument, since that happens to be true\r\n  // in every case, so we don't have to touch the arguments object. The\r\n  // only additional allocation required is the completion record, which\r\n  // has a stable shape and so hopefully should be cheap to allocate.\r\n  function tryCatch(fn, obj, arg) {\r\n    try {\r\n      return { type: \"normal\", arg: fn.call(obj, arg) };\r\n    } catch (err) {\r\n      return { type: \"throw\", arg: err };\r\n    }\r\n  }\r\n\r\n  var GenStateSuspendedStart = \"suspendedStart\";\r\n  var GenStateSuspendedYield = \"suspendedYield\";\r\n  var GenStateExecuting = \"executing\";\r\n  var GenStateCompleted = \"completed\";\r\n\r\n  // Returning this object from the innerFn has the same effect as\r\n  // breaking out of the dispatch switch statement.\r\n  var ContinueSentinel = {};\r\n\r\n  // Dummy constructor functions that we use as the .constructor and\r\n  // .constructor.prototype properties for functions that return Generator\r\n  // objects. For full spec compliance, you may wish to configure your\r\n  // minifier not to mangle the names of these two functions.\r\n  function Generator() {}\r\n  function GeneratorFunction() {}\r\n  function GeneratorFunctionPrototype() {}\r\n\r\n  // This is a polyfill for %IteratorPrototype% for environments that\r\n  // don't natively support it.\r\n  var IteratorPrototype = {};\r\n  define(IteratorPrototype, iteratorSymbol, function () {\r\n    return this;\r\n  });\r\n\r\n  var getProto = Object.getPrototypeOf;\r\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\r\n  if (NativeIteratorPrototype &&\r\n      NativeIteratorPrototype !== Op &&\r\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\r\n    // This environment has a native %IteratorPrototype%; use it instead\r\n    // of the polyfill.\r\n    IteratorPrototype = NativeIteratorPrototype;\r\n  }\r\n\r\n  var Gp = GeneratorFunctionPrototype.prototype =\r\n    Generator.prototype = Object.create(IteratorPrototype);\r\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\r\n  defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: true });\r\n  defineProperty(\r\n    GeneratorFunctionPrototype,\r\n    \"constructor\",\r\n    { value: GeneratorFunction, configurable: true }\r\n  );\r\n  GeneratorFunction.displayName = define(\r\n    GeneratorFunctionPrototype,\r\n    toStringTagSymbol,\r\n    \"GeneratorFunction\"\r\n  );\r\n\r\n  // Helper for defining the .next, .throw, and .return methods of the\r\n  // Iterator interface in terms of a single ._invoke method.\r\n  function defineIteratorMethods(prototype) {\r\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\r\n      define(prototype, method, function(arg) {\r\n        return this._invoke(method, arg);\r\n      });\r\n    });\r\n  }\r\n\r\n  exports.isGeneratorFunction = function(genFun) {\r\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\r\n    return ctor\r\n      ? ctor === GeneratorFunction ||\r\n        // For the native GeneratorFunction constructor, the best we can\r\n        // do is to check its .name property.\r\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\r\n      : false;\r\n  };\r\n\r\n  exports.mark = function(genFun) {\r\n    if (Object.setPrototypeOf) {\r\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\r\n    } else {\r\n      genFun.__proto__ = GeneratorFunctionPrototype;\r\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\r\n    }\r\n    genFun.prototype = Object.create(Gp);\r\n    return genFun;\r\n  };\r\n\r\n  // Within the body of any async function, `await x` is transformed to\r\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\r\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\r\n  // meant to be awaited.\r\n  exports.awrap = function(arg) {\r\n    return { __await: arg };\r\n  };\r\n\r\n  function AsyncIterator(generator, PromiseImpl) {\r\n    function invoke(method, arg, resolve, reject) {\r\n      var record = tryCatch(generator[method], generator, arg);\r\n      if (record.type === \"throw\") {\r\n        reject(record.arg);\r\n      } else {\r\n        var result = record.arg;\r\n        var value = result.value;\r\n        if (value &&\r\n            typeof value === \"object\" &&\r\n            hasOwn.call(value, \"__await\")) {\r\n          return PromiseImpl.resolve(value.__await).then(function(value) {\r\n            invoke(\"next\", value, resolve, reject);\r\n          }, function(err) {\r\n            invoke(\"throw\", err, resolve, reject);\r\n          });\r\n        }\r\n\r\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\r\n          // When a yielded Promise is resolved, its final value becomes\r\n          // the .value of the Promise<{value,done}> result for the\r\n          // current iteration.\r\n          result.value = unwrapped;\r\n          resolve(result);\r\n        }, function(error) {\r\n          // If a rejected Promise was yielded, throw the rejection back\r\n          // into the async generator function so it can be handled there.\r\n          return invoke(\"throw\", error, resolve, reject);\r\n        });\r\n      }\r\n    }\r\n\r\n    var previousPromise;\r\n\r\n    function enqueue(method, arg) {\r\n      function callInvokeWithMethodAndArg() {\r\n        return new PromiseImpl(function(resolve, reject) {\r\n          invoke(method, arg, resolve, reject);\r\n        });\r\n      }\r\n\r\n      return previousPromise =\r\n        // If enqueue has been called before, then we want to wait until\r\n        // all previous Promises have been resolved before calling invoke,\r\n        // so that results are always delivered in the correct order. If\r\n        // enqueue has not been called before, then it is important to\r\n        // call invoke immediately, without waiting on a callback to fire,\r\n        // so that the async generator function has the opportunity to do\r\n        // any necessary setup in a predictable way. This predictability\r\n        // is why the Promise constructor synchronously invokes its\r\n        // executor callback, and why async functions synchronously\r\n        // execute code before the first await. Since we implement simple\r\n        // async functions in terms of async generators, it is especially\r\n        // important to get this right, even though it requires care.\r\n        previousPromise ? previousPromise.then(\r\n          callInvokeWithMethodAndArg,\r\n          // Avoid propagating failures to Promises returned by later\r\n          // invocations of the iterator.\r\n          callInvokeWithMethodAndArg\r\n        ) : callInvokeWithMethodAndArg();\r\n    }\r\n\r\n    // Define the unified helper method that is used to implement .next,\r\n    // .throw, and .return (see defineIteratorMethods).\r\n    defineProperty(this, \"_invoke\", { value: enqueue });\r\n  }\r\n\r\n  defineIteratorMethods(AsyncIterator.prototype);\r\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\r\n    return this;\r\n  });\r\n  exports.AsyncIterator = AsyncIterator;\r\n\r\n  // Note that simple async functions are implemented on top of\r\n  // AsyncIterator objects; they just return a Promise for the value of\r\n  // the final result produced by the iterator.\r\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\r\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\r\n\r\n    var iter = new AsyncIterator(\r\n      wrap(innerFn, outerFn, self, tryLocsList),\r\n      PromiseImpl\r\n    );\r\n\r\n    return exports.isGeneratorFunction(outerFn)\r\n      ? iter // If outerFn is a generator, return the full iterator.\r\n      : iter.next().then(function(result) {\r\n          return result.done ? result.value : iter.next();\r\n        });\r\n  };\r\n\r\n  function makeInvokeMethod(innerFn, self, context) {\r\n    var state = GenStateSuspendedStart;\r\n\r\n    return function invoke(method, arg) {\r\n      if (state === GenStateExecuting) {\r\n        throw new Error(\"Generator is already running\");\r\n      }\r\n\r\n      if (state === GenStateCompleted) {\r\n        if (method === \"throw\") {\r\n          throw arg;\r\n        }\r\n\r\n        // Be forgiving, per 25.3.3.3.3 of the spec:\r\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\r\n        return doneResult();\r\n      }\r\n\r\n      context.method = method;\r\n      context.arg = arg;\r\n\r\n      while (true) {\r\n        var delegate = context.delegate;\r\n        if (delegate) {\r\n          var delegateResult = maybeInvokeDelegate(delegate, context);\r\n          if (delegateResult) {\r\n            if (delegateResult === ContinueSentinel) continue;\r\n            return delegateResult;\r\n          }\r\n        }\r\n\r\n        if (context.method === \"next\") {\r\n          // Setting context._sent for legacy support of Babel's\r\n          // function.sent implementation.\r\n          context.sent = context._sent = context.arg;\r\n\r\n        } else if (context.method === \"throw\") {\r\n          if (state === GenStateSuspendedStart) {\r\n            state = GenStateCompleted;\r\n            throw context.arg;\r\n          }\r\n\r\n          context.dispatchException(context.arg);\r\n\r\n        } else if (context.method === \"return\") {\r\n          context.abrupt(\"return\", context.arg);\r\n        }\r\n\r\n        state = GenStateExecuting;\r\n\r\n        var record = tryCatch(innerFn, self, context);\r\n        if (record.type === \"normal\") {\r\n          // If an exception is thrown from innerFn, we leave state ===\r\n          // GenStateExecuting and loop back for another invocation.\r\n          state = context.done\r\n            ? GenStateCompleted\r\n            : GenStateSuspendedYield;\r\n\r\n          if (record.arg === ContinueSentinel) {\r\n            continue;\r\n          }\r\n\r\n          return {\r\n            value: record.arg,\r\n            done: context.done\r\n          };\r\n\r\n        } else if (record.type === \"throw\") {\r\n          state = GenStateCompleted;\r\n          // Dispatch the exception by looping back around to the\r\n          // context.dispatchException(context.arg) call above.\r\n          context.method = \"throw\";\r\n          context.arg = record.arg;\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  // Call delegate.iterator[context.method](context.arg) and handle the\r\n  // result, either by returning a { value, done } result from the\r\n  // delegate iterator, or by modifying context.method and context.arg,\r\n  // setting context.delegate to null, and returning the ContinueSentinel.\r\n  function maybeInvokeDelegate(delegate, context) {\r\n    var methodName = context.method;\r\n    var method = delegate.iterator[methodName];\r\n    if (method === undefined) {\r\n      // A .throw or .return when the delegate iterator has no .throw\r\n      // method, or a missing .next mehtod, always terminate the\r\n      // yield* loop.\r\n      context.delegate = null;\r\n\r\n      // Note: [\"return\"] must be used for ES3 parsing compatibility.\r\n      if (methodName === \"throw\" && delegate.iterator[\"return\"]) {\r\n        // If the delegate iterator has a return method, give it a\r\n        // chance to clean up.\r\n        context.method = \"return\";\r\n        context.arg = undefined;\r\n        maybeInvokeDelegate(delegate, context);\r\n\r\n        if (context.method === \"throw\") {\r\n          // If maybeInvokeDelegate(context) changed context.method from\r\n          // \"return\" to \"throw\", let that override the TypeError below.\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n      if (methodName !== \"return\") {\r\n        context.method = \"throw\";\r\n        context.arg = new TypeError(\r\n          \"The iterator does not provide a '\" + methodName + \"' method\");\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var record = tryCatch(method, delegate.iterator, context.arg);\r\n\r\n    if (record.type === \"throw\") {\r\n      context.method = \"throw\";\r\n      context.arg = record.arg;\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    var info = record.arg;\r\n\r\n    if (! info) {\r\n      context.method = \"throw\";\r\n      context.arg = new TypeError(\"iterator result is not an object\");\r\n      context.delegate = null;\r\n      return ContinueSentinel;\r\n    }\r\n\r\n    if (info.done) {\r\n      // Assign the result of the finished delegate to the temporary\r\n      // variable specified by delegate.resultName (see delegateYield).\r\n      context[delegate.resultName] = info.value;\r\n\r\n      // Resume execution at the desired location (see delegateYield).\r\n      context.next = delegate.nextLoc;\r\n\r\n      // If context.method was \"throw\" but the delegate handled the\r\n      // exception, let the outer generator proceed normally. If\r\n      // context.method was \"next\", forget context.arg since it has been\r\n      // \"consumed\" by the delegate iterator. If context.method was\r\n      // \"return\", allow the original .return call to continue in the\r\n      // outer generator.\r\n      if (context.method !== \"return\") {\r\n        context.method = \"next\";\r\n        context.arg = undefined;\r\n      }\r\n\r\n    } else {\r\n      // Re-yield the result returned by the delegate method.\r\n      return info;\r\n    }\r\n\r\n    // The delegate iterator is finished, so forget it and continue with\r\n    // the outer generator.\r\n    context.delegate = null;\r\n    return ContinueSentinel;\r\n  }\r\n\r\n  // Define Generator.prototype.{next,throw,return} in terms of the\r\n  // unified ._invoke helper method.\r\n  defineIteratorMethods(Gp);\r\n\r\n  define(Gp, toStringTagSymbol, \"Generator\");\r\n\r\n  // A Generator should always return itself as the iterator object when the\r\n  // @@iterator function is called on it. Some browsers' implementations of the\r\n  // iterator prototype chain incorrectly implement this, causing the Generator\r\n  // object to not be returned from this call. This ensures that doesn't happen.\r\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\r\n  define(Gp, iteratorSymbol, function() {\r\n    return this;\r\n  });\r\n\r\n  define(Gp, \"toString\", function() {\r\n    return \"[object Generator]\";\r\n  });\r\n\r\n  function pushTryEntry(locs) {\r\n    var entry = { tryLoc: locs[0] };\r\n\r\n    if (1 in locs) {\r\n      entry.catchLoc = locs[1];\r\n    }\r\n\r\n    if (2 in locs) {\r\n      entry.finallyLoc = locs[2];\r\n      entry.afterLoc = locs[3];\r\n    }\r\n\r\n    this.tryEntries.push(entry);\r\n  }\r\n\r\n  function resetTryEntry(entry) {\r\n    var record = entry.completion || {};\r\n    record.type = \"normal\";\r\n    delete record.arg;\r\n    entry.completion = record;\r\n  }\r\n\r\n  function Context(tryLocsList) {\r\n    // The root entry object (effectively a try statement without a catch\r\n    // or a finally block) gives us a place to store values thrown from\r\n    // locations where there is no enclosing try statement.\r\n    this.tryEntries = [{ tryLoc: \"root\" }];\r\n    tryLocsList.forEach(pushTryEntry, this);\r\n    this.reset(true);\r\n  }\r\n\r\n  exports.keys = function(val) {\r\n    var object = Object(val);\r\n    var keys = [];\r\n    for (var key in object) {\r\n      keys.push(key);\r\n    }\r\n    keys.reverse();\r\n\r\n    // Rather than returning an object with a next method, we keep\r\n    // things simple and return the next function itself.\r\n    return function next() {\r\n      while (keys.length) {\r\n        var key = keys.pop();\r\n        if (key in object) {\r\n          next.value = key;\r\n          next.done = false;\r\n          return next;\r\n        }\r\n      }\r\n\r\n      // To avoid creating an additional object, we just hang the .value\r\n      // and .done properties off the next function object itself. This\r\n      // also ensures that the minifier will not anonymize the function.\r\n      next.done = true;\r\n      return next;\r\n    };\r\n  };\r\n\r\n  function values(iterable) {\r\n    if (iterable) {\r\n      var iteratorMethod = iterable[iteratorSymbol];\r\n      if (iteratorMethod) {\r\n        return iteratorMethod.call(iterable);\r\n      }\r\n\r\n      if (typeof iterable.next === \"function\") {\r\n        return iterable;\r\n      }\r\n\r\n      if (!isNaN(iterable.length)) {\r\n        var i = -1, next = function next() {\r\n          while (++i < iterable.length) {\r\n            if (hasOwn.call(iterable, i)) {\r\n              next.value = iterable[i];\r\n              next.done = false;\r\n              return next;\r\n            }\r\n          }\r\n\r\n          next.value = undefined;\r\n          next.done = true;\r\n\r\n          return next;\r\n        };\r\n\r\n        return next.next = next;\r\n      }\r\n    }\r\n\r\n    // Return an iterator with no values.\r\n    return { next: doneResult };\r\n  }\r\n  exports.values = values;\r\n\r\n  function doneResult() {\r\n    return { value: undefined, done: true };\r\n  }\r\n\r\n  Context.prototype = {\r\n    constructor: Context,\r\n\r\n    reset: function(skipTempReset) {\r\n      this.prev = 0;\r\n      this.next = 0;\r\n      // Resetting context._sent for legacy support of Babel's\r\n      // function.sent implementation.\r\n      this.sent = this._sent = undefined;\r\n      this.done = false;\r\n      this.delegate = null;\r\n\r\n      this.method = \"next\";\r\n      this.arg = undefined;\r\n\r\n      this.tryEntries.forEach(resetTryEntry);\r\n\r\n      if (!skipTempReset) {\r\n        for (var name in this) {\r\n          // Not sure about the optimal order of these conditions:\r\n          if (name.charAt(0) === \"t\" &&\r\n              hasOwn.call(this, name) &&\r\n              !isNaN(+name.slice(1))) {\r\n            this[name] = undefined;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    stop: function() {\r\n      this.done = true;\r\n\r\n      var rootEntry = this.tryEntries[0];\r\n      var rootRecord = rootEntry.completion;\r\n      if (rootRecord.type === \"throw\") {\r\n        throw rootRecord.arg;\r\n      }\r\n\r\n      return this.rval;\r\n    },\r\n\r\n    dispatchException: function(exception) {\r\n      if (this.done) {\r\n        throw exception;\r\n      }\r\n\r\n      var context = this;\r\n      function handle(loc, caught) {\r\n        record.type = \"throw\";\r\n        record.arg = exception;\r\n        context.next = loc;\r\n\r\n        if (caught) {\r\n          // If the dispatched exception was caught by a catch block,\r\n          // then let that catch block handle the exception normally.\r\n          context.method = \"next\";\r\n          context.arg = undefined;\r\n        }\r\n\r\n        return !! caught;\r\n      }\r\n\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        var record = entry.completion;\r\n\r\n        if (entry.tryLoc === \"root\") {\r\n          // Exception thrown outside of any try block that could handle\r\n          // it, so set the completion value of the entire function to\r\n          // throw the exception.\r\n          return handle(\"end\");\r\n        }\r\n\r\n        if (entry.tryLoc <= this.prev) {\r\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\r\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\r\n\r\n          if (hasCatch && hasFinally) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            } else if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else if (hasCatch) {\r\n            if (this.prev < entry.catchLoc) {\r\n              return handle(entry.catchLoc, true);\r\n            }\r\n\r\n          } else if (hasFinally) {\r\n            if (this.prev < entry.finallyLoc) {\r\n              return handle(entry.finallyLoc);\r\n            }\r\n\r\n          } else {\r\n            throw new Error(\"try statement without catch or finally\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    abrupt: function(type, arg) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc <= this.prev &&\r\n            hasOwn.call(entry, \"finallyLoc\") &&\r\n            this.prev < entry.finallyLoc) {\r\n          var finallyEntry = entry;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (finallyEntry &&\r\n          (type === \"break\" ||\r\n           type === \"continue\") &&\r\n          finallyEntry.tryLoc <= arg &&\r\n          arg <= finallyEntry.finallyLoc) {\r\n        // Ignore the finally entry if control is not jumping to a\r\n        // location outside the try/catch block.\r\n        finallyEntry = null;\r\n      }\r\n\r\n      var record = finallyEntry ? finallyEntry.completion : {};\r\n      record.type = type;\r\n      record.arg = arg;\r\n\r\n      if (finallyEntry) {\r\n        this.method = \"next\";\r\n        this.next = finallyEntry.finallyLoc;\r\n        return ContinueSentinel;\r\n      }\r\n\r\n      return this.complete(record);\r\n    },\r\n\r\n    complete: function(record, afterLoc) {\r\n      if (record.type === \"throw\") {\r\n        throw record.arg;\r\n      }\r\n\r\n      if (record.type === \"break\" ||\r\n          record.type === \"continue\") {\r\n        this.next = record.arg;\r\n      } else if (record.type === \"return\") {\r\n        this.rval = this.arg = record.arg;\r\n        this.method = \"return\";\r\n        this.next = \"end\";\r\n      } else if (record.type === \"normal\" && afterLoc) {\r\n        this.next = afterLoc;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    },\r\n\r\n    finish: function(finallyLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.finallyLoc === finallyLoc) {\r\n          this.complete(entry.completion, entry.afterLoc);\r\n          resetTryEntry(entry);\r\n          return ContinueSentinel;\r\n        }\r\n      }\r\n    },\r\n\r\n    \"catch\": function(tryLoc) {\r\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\r\n        var entry = this.tryEntries[i];\r\n        if (entry.tryLoc === tryLoc) {\r\n          var record = entry.completion;\r\n          if (record.type === \"throw\") {\r\n            var thrown = record.arg;\r\n            resetTryEntry(entry);\r\n          }\r\n          return thrown;\r\n        }\r\n      }\r\n\r\n      // The context.catch method must only be called with a location\r\n      // argument that corresponds to a known catch block.\r\n      throw new Error(\"illegal catch attempt\");\r\n    },\r\n\r\n    delegateYield: function(iterable, resultName, nextLoc) {\r\n      this.delegate = {\r\n        iterator: values(iterable),\r\n        resultName: resultName,\r\n        nextLoc: nextLoc\r\n      };\r\n\r\n      if (this.method === \"next\") {\r\n        // Deliberately forget the last sent value so that we don't\r\n        // accidentally pass it on to the delegate.\r\n        this.arg = undefined;\r\n      }\r\n\r\n      return ContinueSentinel;\r\n    }\r\n  };\r\n\r\n  // Regardless of whether this script is executing as a CommonJS module\r\n  // or not, return the runtime object so that we can declare the variable\r\n  // regeneratorRuntime in the outer scope, which allows this module to be\r\n  // injected easily by `bin/regenerator --include-runtime script.js`.\r\n  return exports;\r\n\r\n}(\r\n  // If this script is executing as a CommonJS module, use module.exports\r\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\r\n  // object. Either way, the resulting object will be used to initialize\r\n  // the regeneratorRuntime variable at the top of this file.\r\n  typeof module === \"object\" ? module.exports : {}\r\n));\r\n\r\ntry {\r\n  regeneratorRuntime = runtime;\r\n} catch (accidentalStrictMode) {\r\n  // This module should not be running in strict mode, so the above\r\n  // assignment should always work unless something is misconfigured. Just\r\n  // in case runtime.js accidentally runs in strict mode, in modern engines\r\n  // we can explicitly access globalThis. In older engines we can escape\r\n  // strict mode using a global Function call. This could conceivably fail\r\n  // if a Content Security Policy forbids using Function, but in that case\r\n  // the proper solution is to fix the accidental strict mode problem. If\r\n  // you've misconfigured your bundler to force strict mode and applied a\r\n  // CSP to forbid Function, and you're not willing to fix either of those\r\n  // problems, please detail your unique predicament in a GitHub issue.\r\n  if (typeof globalThis === \"object\") {\r\n    globalThis.regeneratorRuntime = runtime;\r\n  } else {\r\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\r\n  }\r\n}\r\n","'use strict';\r\n\r\nconst createJob = require('./createJob');\r\nconst { log } = require('./utils/log');\r\nconst getId = require('./utils/getId');\r\n\r\nlet schedulerCounter = 0;\r\n\r\nmodule.exports = () => {\r\n  const id = getId('Scheduler', schedulerCounter);\r\n  const workers = {};\r\n  const runningWorkers = {};\r\n  let jobQueue = [];\r\n\r\n  schedulerCounter += 1;\r\n\r\n  const getQueueLen = () => jobQueue.length;\r\n  const getNumWorkers = () => Object.keys(workers).length;\r\n\r\n  const dequeue = () => {\r\n    if (jobQueue.length !== 0) {\r\n      const wIds = Object.keys(workers);\r\n      for (let i = 0; i < wIds.length; i += 1) {\r\n        if (typeof runningWorkers[wIds[i]] === 'undefined') {\r\n          jobQueue[0](workers[wIds[i]]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const queue = (action, payload) => (\r\n    new Promise((resolve, reject) => {\r\n      const job = createJob({ action, payload });\r\n      jobQueue.push(async (w) => {\r\n        jobQueue.shift();\r\n        runningWorkers[w.id] = job;\r\n        try {\r\n          resolve(await w[action].apply(this, [...payload, job.id]));\r\n        } catch (err) {\r\n          reject(err);\r\n        } finally {\r\n          delete runningWorkers[w.id];\r\n          dequeue();\r\n        }\r\n      });\r\n      log(`[${id}]: Add ${job.id} to JobQueue`);\r\n      log(`[${id}]: JobQueue length=${jobQueue.length}`);\r\n      dequeue();\r\n    })\r\n  );\r\n\r\n  const addWorker = (w) => {\r\n    workers[w.id] = w;\r\n    log(`[${id}]: Add ${w.id}`);\r\n    log(`[${id}]: Number of workers=${getNumWorkers()}`);\r\n    dequeue();\r\n    return w.id;\r\n  };\r\n\r\n  const addJob = async (action, ...payload) => {\r\n    if (getNumWorkers() === 0) {\r\n      throw Error(`[${id}]: You need to have at least one worker before adding jobs`);\r\n    }\r\n    return queue(action, payload);\r\n  };\r\n\r\n  const terminate = async () => {\r\n    Object.keys(workers).forEach(async (wid) => {\r\n      await workers[wid].terminate();\r\n    });\r\n    jobQueue = [];\r\n  };\r\n\r\n  return {\r\n    addWorker,\r\n    addJob,\r\n    terminate,\r\n    getQueueLen,\r\n    getNumWorkers,\r\n  };\r\n};\r\n","'use strict';\r\n\r\nconst version = require('../../../package.json').version;\r\nconst defaultOptions = require('../../constants/defaultOptions');\r\n\r\n/*\r\n * Default options for browser worker\r\n */\r\nmodule.exports = {\r\n  ...defaultOptions,\r\n  workerPath: `https://cdn.jsdelivr.net/npm/tesseract.js@v${version}/dist/worker.min.js`,\r\n};\r\n","'use strict';\r\n\r\n/**\r\n *\r\n * Entry point for tesseract.js, should be the entry when bundling.\r\n *\r\n * @fileoverview entry point for tesseract.js\r\n * @author Kevin Kwok <antimatter15@gmail.com>\r\n * @author Guillermo Webster <gui@mit.edu>\r\n * @author Jerome Wu <jeromewus@gmail.com>\r\n */\r\nrequire('regenerator-runtime/runtime');\r\nconst createScheduler = require('./createScheduler');\r\nconst createWorker = require('./createWorker');\r\nconst Tesseract = require('./Tesseract');\r\nconst languages = require('./constants/languages');\r\nconst OEM = require('./constants/OEM');\r\nconst PSM = require('./constants/PSM');\r\nconst { setLogging } = require('./utils/log');\r\n\r\nmodule.exports = {\r\n  languages,\r\n  OEM,\r\n  PSM,\r\n  createScheduler,\r\n  createWorker,\r\n  setLogging,\r\n  ...Tesseract,\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = (key) => {\r\n  const env = {};\r\n\r\n  if (typeof WorkerGlobalScope !== 'undefined') {\r\n    env.type = 'webworker';\r\n  } else if (typeof document === 'object') {\r\n    env.type = 'browser';\r\n  } else if (typeof process === 'object' && typeof require === 'function') {\r\n    env.type = 'node';\r\n  }\r\n\r\n  if (typeof key === 'undefined') {\r\n    return env;\r\n  }\r\n\r\n  return env[key];\r\n};\r\n","'use strict';\r\n\r\nmodule.exports = {\r\n  /*\r\n   * Use BlobURL for worker script by default\r\n   * TODO: remove this option\r\n   *\r\n   */\r\n  workerBlobURL: true,\r\n  logger: () => {},\r\n};\r\n","'use strict';\r\n\r\n/**\r\n * send\r\n *\r\n * @name send\r\n * @function send packet to worker and create a job\r\n * @access public\r\n */\r\nmodule.exports = async (worker, packet) => {\r\n  worker.postMessage(packet);\r\n};\r\n","'use strict';\r\n\r\nlet logging = false;\r\n\r\nexports.logging = logging;\r\n\r\nexports.setLogging = (_logging) => {\r\n  logging = _logging;\r\n};\r\n\r\nexports.log = (...args) => (logging ? console.log.apply(this, args) : null);\r\n","'use strict';\r\n\r\n/**\r\n * terminateWorker\r\n *\r\n * @name terminateWorker\r\n * @function terminate worker\r\n * @access public\r\n */\r\nmodule.exports = (worker) => {\r\n  worker.terminate();\r\n};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Fuse.js v7.1.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2025 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When `true`, the algorithm will ignore diacritics (accents) in comparisons\n  ignoreDiacritics: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nconst stripDiacritics = String.prototype.normalize\n    ? ((str) => str.normalize('NFD').replace(/[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C04\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00-\\u0D03\\u0D3B\\u0D3C\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF7-\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F]/g, ''))\n    : ((str) => str);\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, ignoreDiacritics, includeMatches } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreDiacritics,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreDiacritics = Config.ignoreDiacritics,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      ignoreDiacritics,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    pattern = ignoreDiacritics ? stripDiacritics(pattern) : pattern;\n    this.pattern = pattern;\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive, ignoreDiacritics } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n    text = ignoreDiacritics ? stripDiacritics(text) : text;\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.1.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n","\r\nimport Fuse from 'fuse.js';\r\n\r\n\r\nconst Default_Row_Format = {\r\n    Date: null,\r\n    Intervention: null,\r\n    AST: null,\r\n    AST_RangeLow: 8,\r\n    AST_RangeHigh: 33,\r\n    ALT: null,\r\n    ALT_RangeLow: 4,\r\n    ALT_RangeHigh: 36,\r\n    GLOBULIN: null,\r\n    GLOBULIN_RangeLow: 1.9,\r\n    GLOBULIN_RangeHigh: 4.1,\r\n    BUN: null,\r\n    BUN_RangeLow: 6,\r\n    BUN_RangeHigh: 20,\r\n    FASTING_GLUCOSE: null,\r\n    FASTING_GLUCOSE_RangeLow: 70,\r\n    FASTING_GLUCOSE_RangeHigh: 99,\r\n    A1C: null,\r\n    A1C_RangeLow: 0,\r\n    A1C_RangeHigh: 5.5,\r\n    RBC: null,\r\n    RBC_RangeLow: 4.5,\r\n    RBC_RangeHigh: 5.9,\r\n    HGB: null,\r\n    HGB_RangeLow: 13.5,\r\n    HGB_RangeHigh: 17.5,\r\n    HCT: null,\r\n    HCT_RangeLow: 41,\r\n    HCT_RangeHigh: 53,\r\n    WBC: null,\r\n    WBC_RangeLow: 4,\r\n    WBC_RangeHigh: 11,\r\n    PLATELETS: null,\r\n    PLATELETS_RangeLow: 150,\r\n    PLATELETS_RangeHigh: 400,\r\n    SODIUM: null,\r\n    SODIUM_RangeLow: 135,\r\n    SODIUM_RangeHigh: 145,\r\n    POTASSIUM: null,\r\n    POTASSIUM_RangeLow: 3.4,\r\n    POTASSIUM_RangeHigh: 5,\r\n    CHLORIDE: null,\r\n    CHLORIDE_RangeLow: 98,\r\n    CHLORIDE_RangeHigh: 108,\r\n    CALCIUM: null,\r\n    CALCIUM_RangeLow: 8.5,\r\n    CALCIUM_RangeHigh: 10.5,\r\n    CO2: null,\r\n    CO2_RangeLow: 23,\r\n    CO2_RangeHigh: 32,\r\n    IGF1: null,\r\n    IGF1_RangeLow: 120,\r\n    IGF1_RangeHigh: 160,\r\n    FASTING_INSULIN: null,\r\n    FASTING_INSULIN_RangeLow: 2,\r\n    FASTING_INSULIN_RangeHigh: 6,\r\n    BETA_HYDROXYBUTYRATE: null,\r\n    BETA_HYDROXYBUTYRATE_RangeLow: 0,\r\n    BETA_HYDROXYBUTYRATE_RangeHigh: 7,\r\n    B12: null,\r\n    B12_RangeLow: 500,\r\n    B12_RangeHigh: 1300,\r\n    MAGNESIUM: null,\r\n    MAGNESIUM_RangeLow: 1.7,\r\n    MAGNESIUM_RangeHigh: 2.4,\r\n    CRP: null,\r\n    CRP_RangeLow: 1,\r\n    CRP_RangeHigh: 3,\r\n    IRON: null,\r\n    IRON_MaleRangeLow: 50,\r\n    IRON_MaleRangeHigh: 150,\r\n    IRON_FemaleRangeLow: 35,\r\n    IRON_FemaleRangeHigh: 145,\r\n    CHOLESTEROL: null,\r\n    CHOLESTEROL_RangeLow: 0,\r\n    CHOLESTEROL_RangeHigh: 200,\r\n    HOMOCYSTEINE: null,\r\n    HOMOCYSTEINE_RangeLow: 5,\r\n    HOMOCYSTEINE_RangeHigh: 15,\r\n    Vitamin_D: null,\r\n    Vitamin_D_RangeLow: 40,\r\n    Vitamin_D_RangeHigh: 90\r\n};\r\n\r\n\r\nexport const field_names = [\r\n    { csvfield: 'AST', replacements: ['ast', 'aspartate aminotransferase', 'aspartate transaminase', 'sgot', 'serum glutamic oxaloacetic transaminase', 'asp aminotransferase'] },\r\n    { csvfield: 'ALT', replacements: ['alt', 'alanine aminotransferase', 'alanine transaminase', 'sgpt', 'serum glutamic pyruvic transaminase', 'ala aminotransferase', 'alat'] },\r\n    { csvfield: 'GLOBULIN', replacements: ['globulin', 'serum globulin', 'total globulin', 'glob', 'globulins'] },\r\n    { csvfield: 'BUN', replacements: ['bun', 'blood urea nitrogen', 'urea nitrogen', 'urea', 'blood urea'] },\r\n    { csvfield: 'FASTING_GLUCOSE', replacements: ['fasting glucose', 'glucose fasting', 'fbs', 'fasting blood sugar', 'glucose', 'blood glucose', 'serum glucose', 'plasma glucose', 'gluc', 'glu', 'fast glucose', 'glucose fast'] },\r\n    { csvfield: 'A1C', replacements: ['a1c', 'hba1c', 'hemoglobin a1c', 'glycated hemoglobin', 'glycohemoglobin', 'hgb a1c', 'hb a1c', 'a1c hemoglobin', 'hemoglobin a1c'] },\r\n    { csvfield: 'RBC', replacements: ['rbc', 'red blood cells', 'red blood cell count', 'erythrocytes', 'red cell count', 'rbc count', 'red cells'] },\r\n    { csvfield: 'HGB', replacements: ['hgb', 'hemoglobin', 'hb', 'haemoglobin', 'hemo'] },\r\n    { csvfield: 'HCT', replacements: ['hct', 'hematocrit', 'haematocrit', 'packed cell volume', 'pcv'] },\r\n    { csvfield: 'WBC', replacements: ['wbc', 'white blood cells', 'white blood cell count', 'leukocytes', 'white cell count', 'wbc count', 'white cells', 'leucocytes'] },\r\n    { csvfield: 'PLATELETS', replacements: ['platelets', 'platelet count', 'plt', 'thrombocytes', 'plts'] },\r\n    { csvfield: 'SODIUM', replacements: ['sodium', 'na', 'serum sodium', 'na+', 'sod'] },\r\n    { csvfield: 'POTASSIUM', replacements: ['potassium', 'k', 'serum potassium', 'k+', 'pot'] },\r\n    { csvfield: 'CHLORIDE', replacements: ['chloride', 'cl', 'serum chloride', 'cl-', 'chlor'] },\r\n    { csvfield: 'CALCIUM', replacements: ['calcium', 'ca', 'serum calcium', 'ca++', 'total calcium', 'ca2+'] },\r\n    { csvfield: 'CO2', replacements: ['co2', 'carbon dioxide', 'bicarbonate', 'hco3', 'total co2', 'co2 total', 'bicarb', 'tco2'] },\r\n    { csvfield: 'IGF1', replacements: ['igf1', 'igf-1', 'insulin-like growth factor 1', 'insulin like growth factor', 'somatomedin c', 'igf 1'] },\r\n    { csvfield: 'FASTING_INSULIN', replacements: ['fasting insulin', 'insulin fasting', 'insulin', 'serum insulin', 'plasma insulin', 'fast insulin', 'insulin fast'] },\r\n    { csvfield: 'BETA_HYDROXYBUTYRATE', replacements: ['beta hydroxybutyrate', 'beta-hydroxybutyrate', 'b-hydroxybutyrate', 'bhb', 'ketones', 'serum ketones', 'beta hydroxy butyrate'] },\r\n    { csvfield: 'B12', replacements: ['b12', 'vitamin b12', 'vitamin b-12', 'cobalamin', 'cyanocobalamin', 'b 12', 'vit b12', 'folate b12'] },\r\n    { csvfield: 'Vitamin_D', replacements: ['vitamin d', 'vitamin d3', 'vitamin d 25-oh', '25-hydroxyvitamin d', '25 oh vitamin d', 'calcidiol', 'vit d', 'vitamin d total', '25-oh-d3', '25(oh)d', 'vitamin d 25 hydroxy'] },\r\n    { csvfield: 'MAGNESIUM', replacements: ['magnesium', 'mg', 'serum magnesium', 'mg++', 'mag'] },\r\n    { csvfield: 'IRON', replacements: ['iron', 'fe', 'serum iron', 'iron serum', 'total iron'] },\r\n    { csvfield: 'CRP', replacements: ['crp', 'c-reactive protein', 'c reactive protein', 'c-rp', 'high sensitivity crp', 'hs-crp', 'hs crp'] },\r\n    { csvfield: 'CHOLESTEROL', replacements: ['cholesterol', 'total cholesterol', 'chol', 'tc', 'serum cholesterol', 'total chol'] },\r\n    { csvfield: 'HOMOCYSTEINE', replacements: ['homocysteine', 'hcy', 'homo-cysteine', 'homocyst', 'total homocysteine'] }\r\n];\r\n\r\n//placeholder for persistent curRowFormat\r\nlet curRowFormat = { ...Default_Row_Format };\r\n\r\n//modify row format based on field and range value\r\nexport async function modifyRowFormat(field, rangeValue, newValue) {\r\n    // Check if the field exists in curRowFormat\r\n    if (curRowFormat.hasOwnProperty(field)) {\r\n        // If modifying the main field value\r\n        if (!rangeValue) {\r\n            curRowFormat[field] = newValue;\r\n        } else {\r\n            // If modifying a range value (e.g., RangeLow or RangeHigh)\r\n            const rangeKey = `${field}_${rangeValue}`;\r\n            if (curRowFormat.hasOwnProperty(rangeKey)) {\r\n                curRowFormat[rangeKey] = newValue;\r\n            } else {\r\n                console.error(`Range key \"${rangeKey}\" does not exist in curRowFormat.`);\r\n            }\r\n        }\r\n    } else {\r\n        console.error(`Field \"${field}\" does not exist in curRowFormat.`);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport async function testingJsonProcessing( ocr_object_list) {\r\n    // This function is for debugging purposes to test the JSON processing logic\r\n\r\n    //mutates json input with a new property for potential of being a value and a bounding box center point\r\n    for (var word_object of ocr_object_list){\r\n        const possible_val = word_object.word_text\r\n        const val_score = scoreOCRNumber(possible_val)\r\n        word_object['number_score'] = val_score\r\n        word_object['center_value'] = {\r\n            centerx: (word_object.word_bbox.x1 + word_object.word_bbox.x0)/2,\r\n            centery: (word_object.word_bbox.y1 + word_object.word_bbox.y0)/2,\r\n        }\r\n        word_object['potential_keys_for'] = new Set()\r\n    }\r\n\r\n    //finds which ocr values are probably a sought after csv field (will mutate ocr_object_list)\r\n    let probable_keys = {}\r\n    for (const field of field_names) {\r\n        const field_name = field.csvfield\r\n        const field_replacements = field.replacements\r\n        const field_key_value_pair = await evalKeyConfidence(field_name, field_replacements, ocr_object_list)\r\n        probable_keys[field_key_value_pair.csv_value] = field_key_value_pair.closest_matches\r\n    }\r\n\r\n    console.log(ocr_object_list)\r\n\r\n    //search for innate structural offset between different probable keys and probable values\r\n    //isolate each page\r\n    let image_dic = {}\r\n    for (var word_object of ocr_object_list) {\r\n        const page_key = word_object.imageName\r\n        if (page_key in image_dic) {\r\n            // Check if key or value and add to appropriate key or value\r\n            if (word_object.potential_keys_for instanceof Set) {\r\n                if (word_object.potential_keys_for.size > 0) {\r\n                    // console.log('Pushing key:', word_object.word_text, 'potential_keys_for:', word_object.potential_keys_for);\r\n                    image_dic[page_key].keys.push(word_object);\r\n                    continue;\r\n                } else {\r\n                    // Debug: Set is empty\r\n                    //console.log('Empty potential_keys_for Set for:', word_object.word_text);\r\n                }\r\n            } else {\r\n                // Debug: Not a Set\r\n                //console.warn('potential_keys_for is not a Set for:', word_object.word_text, word_object.potential_keys_for);\r\n            }\r\n            if (word_object.number_score > 0.9) {\r\n                image_dic[page_key].values.push(word_object);\r\n                continue;\r\n            }\r\n        } else {\r\n            image_dic[page_key] = {\r\n                keys: [],\r\n                values: []\r\n            };\r\n        }\r\n    }\r\n    console.log(image_dic)\r\n    return image_dic\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n//  Processes the input JSON data to extract relevant fields and format them into a CSV row.\r\n//  Returns an array of objects, each representing a row in the CSV format.\r\nexport async function processJsonToCSV(ocr_object_list) {\r\n    let probable_keys = {}\r\n    for (const field of field_names) {\r\n        const field_name = field.csvfield\r\n        const field_replacements = field.replacements\r\n        const field_key_value_pair = evalKeyConfidence(field_name, field_replacements, ocr_object_list)\r\n        probable_keys[field_key_value_pair.csv_value] = field_key_value_pair.closest_matches\r\n    }\r\n}\r\n","import {createScheduler, createWorker, PSM} from 'tesseract.js';\r\nimport Fuse from 'fuse.js';\r\nimport { field_names} from './formatCsvRow';\r\n\r\n/**\r\n * Processes an array of image files using Tesseract.js OCR with multiple workers.\r\n * Performs text recognition on each image and extracts word-level data including confidence, choices, bounding boxes, and rotation.\r\n * Returns a flattened array of word objects for all processed images.\r\n *\r\n * @async\r\n * @param {File[]} files - Array of image files to be processed.\r\n * @returns {Promise<Object[]>} Resolves to an array of word objects containing OCR results for each image.\r\n * @throws {Error} Throws if no images are provided.\r\n */\r\nexport async function ocrProcessing(files) {    \r\n    if (!files || !files.length) {\r\n        throw new Error('No images provided to ocrProcessing.');\r\n    }\r\n\r\n    // Create a scheduler and workers\r\n    const workerN = 7;\r\n    const scheduler = createScheduler();\r\n\r\n    const workerGen = async () => {\r\n        const worker = await createWorker(\"eng\", 1, { \r\n            logger: m => console.log(m), cachePath: \".\",\r\n            workerPath: chrome.runtime.getURL('node_modules/tesseract.js/dist/worker.min.js'),\r\n            corePath: chrome.runtime.getURL('node_modules/tesseract.js-core/tesseract-core-lstm.wasm.js'),\r\n            workerBlobURL: false,\r\n        });\r\n        await worker.setParameters({\r\n            tessedit_pageseg_mode: PSM.SPARSE_TEXT_OSD\r\n        });\r\n        scheduler.addWorker(worker);\r\n    };\r\n\r\n    await Promise.all(Array(workerN).fill(0).map(async () => await workerGen())); \r\n    \r\n\r\n    \r\n    const jobPromises = files.map(async (file) => {\r\n        return scheduler.addJob('recognize', file, {}, {\r\n            text: true,\r\n            blocks: true,\r\n            hocr: false,\r\n            tsv: false,\r\n        })\r\n        .then(out => {\r\n            // console.log(out) //for debugging\r\n            const wordsArray = [];\r\n            const imageName = file.name\r\n            const rotateRadians = out.data.rotateRadians\r\n            if (out.data?.blocks) {\r\n                out.data.blocks.forEach((block, blockIdx) => {\r\n                    block.paragraphs.forEach((para, paraIdx) => {\r\n                        const paragraphKey = `block_${blockIdx};paragraph_${paraIdx}`;\r\n                        para.lines.forEach((line, lineIdx) => {\r\n                            const lineKey = `${paragraphKey};line_${lineIdx}`;\r\n                            line.words.forEach((word, wordIdx) => {\r\n                                var word_choices = word.choices\r\n                                if (word_choices.length < 2) {\r\n                                    word_choices = []\r\n                                }\r\n                                const uniqueKey = `${lineKey};word_${wordIdx};`\r\n                                wordsArray.push({\r\n                                    word_text: word.text,\r\n                                    word_confidence: word.confidence,\r\n                                    word_choices: word_choices,\r\n                                    word_y: word.bbox.y0,\r\n                                    word_x: word.bbox.x0,\r\n                                    height: word.bbox.y1 - word.bbox.y0,\r\n                                    width: word.bbox.x1 - word.bbox.x0,\r\n                                    potential_matches: new Set(),\r\n                                    uniqueKey: uniqueKey,\r\n                                    imageName: imageName,\r\n                                    rotateRadians: rotateRadians,\r\n                                    numberScore: 0\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            return wordsArray\r\n        })\r\n        .catch(error => ({\r\n            imageName: file.webkitRelativePath || file.name,\r\n            error: error.message,\r\n        }));\r\n    });\r\n\r\n    const results = await Promise.all(jobPromises);\r\n    const flatResults = results.flat()\r\n    // Terminate workers and save results\r\n    await scheduler.terminate();\r\n\r\n    console.log('OCR processing completed. \\n here are results:');\r\n    console.log(flatResults)\r\n    return flatResults;\r\n\r\n}\r\n\r\n\r\n/**\r\n * Evaluates selection of word objects that match closestr to the given csv value or its potential csv replacement values\r\n *\r\n * @param {String} csv_value - current key being searched for\r\n * @param {Array} csv_replacement_values - list of potential replacement strings to match for for csv_value\r\n * @param {Object[]} ocr_object_list - Array of word objects from OCR output. Each object should contain at least 'word_text', 'word_bbox', and 'imageName'.\r\n * @returns {Object} An object representing the searched for word and a list of closest word object matches\r\n *   {\r\n *     [csv_value]: String //searched for csv_value,\r\n *     [closest_matches]: Array //list of word objects ordered by score\r\n *   }\r\n */\r\nasync function evalKeyConfidence(csv_value, csv_replacement_values, ocr_object_list, total_threshold, max_entries, fuseThreshold) {\r\n    // Type checks\r\n    if (typeof csv_value !== 'string') {\r\n        throw new Error('evalKeyConfidence: csv_value must be a string');\r\n    }\r\n    if (!Array.isArray(csv_replacement_values) || !csv_replacement_values.every(val => typeof val === 'string')) {\r\n        throw new Error('evalKeyConfidence: csv_replacement_values must be an array of strings');\r\n    }\r\n    \r\n    // console.log(`searching for \"${csv_value}\" and found`)\r\n    const fuseOptions = {\r\n        isCaseSensitive: false,\r\n        includeScore: true,\r\n        ignoreDiacritics: true, \r\n        shouldSort: true,\r\n        includeMatches: false,\r\n        findAllMatches: true,\r\n        minMatchCharLength: 2,\r\n        location: 0,\r\n        threshold: fuseThreshold, //tentative\r\n        distance: 100,\r\n        useExtendedSearch: false,\r\n        ignoreLocation: true,\r\n        ignoreFieldNorm: true,\r\n        // fieldNormWeight: 1,\r\n        keys: [\"word_text\"]\r\n    };\r\n    \r\n    //looped operation that finds best matches (searching based on main csv_value before csv_replacement value searches)\r\n    let valid_entries = [];\r\n    let threshold = 0.1;\r\n    let seen_indexes = new Set()\r\n    const fuse = new Fuse(ocr_object_list, fuseOptions);\r\n\r\n    while (threshold < total_threshold) {\r\n        const pure_results = fuse\r\n            .search(csv_value)\r\n            .filter(result => result.score < threshold && result.score >= threshold - 0.1);\r\n        for (const pure_result of pure_results) {\r\n            if (!seen_indexes.has(pure_result.refIndex)) {\r\n                seen_indexes.add(pure_result.refIndex)\r\n                valid_entries.push(pure_result)\r\n\r\n                //mutate ocr list\r\n                pure_result.item.potential_matches.add({\r\n                    'matched_word': csv_value,\r\n                    'word_score': pure_result.score\r\n                })\r\n\r\n            }\r\n        }\r\n\r\n        // Try replacements only if nothing matched\r\n        if (pure_results.length === 0) {\r\n            for (const replacement_value of csv_replacement_values) {\r\n                const replacement_results = fuse\r\n                    .search(replacement_value)\r\n                    .filter(result => result.score < threshold && result.score >= threshold - 0.1);\r\n                for (const replacement_result of replacement_results) {\r\n                    if (!seen_indexes.has(replacement_result.refIndex)) {\r\n                        seen_indexes.add(replacement_result.refIndex);\r\n                        valid_entries.push(replacement_result);\r\n\r\n                        //mutate ocr list\r\n                        replacement_result.item.potential_matches.add({\r\n                            'matched_word': replacement_value,\r\n                            'word_score': replacement_result.score\r\n                        })\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Sort \r\n        valid_entries.sort((a, b) => a.score - b.score);\r\n        if (valid_entries.length > max_entries) {\r\n            break;\r\n        }\r\n        threshold += 0.05;\r\n    }\r\n    \r\n    // console.log(valid_entries)\r\n    // console.log(ocr_object_list)\r\n    return {\r\n        csv_value: csv_value, //csv value in question\r\n        closest_matches: valid_entries //list of matched ocr objects\r\n    }\r\n}\r\n\r\n/**\r\n * Scores the likelihood that a given string represents a valid OCR-extracted number.\r\n * The function attempts to correct common OCR misinterpretations (e.g., 'O' -> '0', 'I' -> '1'),\r\n * then uses a regex to extract a numeric value. The score is reduced based on the number of replacements\r\n * and regex corrections required.\r\n *\r\n * @param {string} str - The string to evaluate as a possible number.\r\n * @param {number} replace_strikes_weight - The penalty weight for each character replacement.\r\n * @param {number} regex_strikes_weight - The penalty weight for regex-based corrections.\r\n * @returns {number} A score between 0 and 1 indicating the confidence that the string is a valid number.\r\n */\r\nfunction scoreOCRNumber(str, replace_strikes_weight, regex_strikes_weight) {\r\n    const replacements = {\r\n        'o': '0', 'O': '0',\r\n        'I': '1', 'l': '1', 'L': '1',\r\n        'S': '5', 's': '5',\r\n        'B': '8',\r\n        'q': '9', 'g': '9',\r\n        'Z': '2', 'z': '2',\r\n        'G': '6',\r\n        'A': '4',\r\n        'T': '7'\r\n    };\r\n\r\n    //might want to consider how confidence of OCR factors into things, but at same time, lower confidence would not lead to anytrhing MORE accurate\r\n    let replace_strikes = 0;\r\n    let transformed = '';\r\n    let regex_strikes = 0;\r\n    let regex_transformed = '';\r\n\r\n    for (let i = 0; i < str.length; i++) {\r\n        const char = str[i];\r\n        if (replacements.hasOwnProperty(char)) {\r\n            transformed += replacements[char];\r\n            replace_strikes++;\r\n        } else {\r\n            transformed += char;\r\n        }\r\n    }\r\n    const match = transformed.match(/(?<!\\d)(\\d+(\\.\\d+)?)(?!\\d)/)\r\n    \r\n    if (match) {\r\n        regex_transformed = match[0];\r\n        if (transformed !== regex_transformed) {\r\n            regex_strikes = 1\r\n        }\r\n    } else {\r\n        return 0\r\n    }\r\n\r\n    if (regex_transformed.trim() === '' || isNaN(Number(regex_transformed))) {\r\n        return 0\r\n    } else {\r\n        return Math.max(1 - replace_strikes * replace_strikes_weight - regex_strikes * regex_strikes_weight, 0)\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Enhances an array of OCR word objects with additional metadata for markup analysis.\r\n * - Identifies probable keys and values for each image and groups them by image name.\r\n *\r\n * @param {Object[]} ocr_object_list - Array of word objects from OCR output. Each object should contain at least 'word_text', 'word_bbox', and 'imageName'.\r\n * @returns {Object} An object mapping image names to their detected keys and values:\r\n *   {\r\n *     [imageName]: {\r\n *       keys: Object[],   // Word objects identified as probable keys\r\n *       values: Object[]  // Word objects identified as probable values (numbers)\r\n *     }\r\n *   }\r\n */\r\nexport async function generateimageKeyValueList(ocr_object_list, fuseThreshold, keySearchThreshold, maxKeyEntries, replaceStrikesWeight, regexStrikesWeight) {\r\n    console.log(\"running generateimageKeyValueList\")\r\n    console.log(\"ocr_object_list: \")\r\n    console.log(ocr_object_list)\r\n    for (var wordObj of ocr_object_list){\r\n        const wordText = wordObj.word_text;\r\n        const numberScore = scoreOCRNumber(wordText, replaceStrikesWeight, regexStrikesWeight);\r\n        wordObj.numberScore = numberScore;\r\n    }\r\n\r\n    // Finds which ocr values are probably a sought after csv field (will mutate ocr_object_list)\r\n    let probableKeys = {};\r\n    for (const field of field_names) {\r\n        const csvField = field.csvfield;\r\n        const replacementList = field.replacements;\r\n        const keyMatchResult = await evalKeyConfidence(csvField, replacementList, ocr_object_list, keySearchThreshold, maxKeyEntries, fuseThreshold);\r\n        probableKeys[keyMatchResult.csv_value] = keyMatchResult.closest_matches;\r\n    }\r\n\r\n    //search for innate structural offset between different probable keys and probable values\r\n    //isolate each page\r\n    let imageDic = {};\r\n    for (var wordObj of ocr_object_list) {\r\n        const pageKey = wordObj.imageName;\r\n        if (!(pageKey in imageDic)) {\r\n            imageDic[pageKey] = {\r\n                keys: [],\r\n                values: []\r\n            };\r\n        }\r\n        // Check if key or value and add to appropriate key or value\r\n        if (wordObj.potential_matches.size > 0) {\r\n            imageDic[pageKey].keys.push(wordObj);\r\n            continue;\r\n        }\r\n        if (wordObj.numberScore > 0.8) {\r\n            imageDic[pageKey].values.push(wordObj);\r\n            continue;\r\n        }\r\n    }\r\n          \r\n    console.log(\"final generateimageKeyValueList output: \")\r\n    console.log(imageDic);\r\n    return imageDic;\r\n}\r\n\r\n\r\n//TODO\r\nexport async function findKeyValuePairs(imageKeyValueList, ) {\r\n    \r\n    for (const pageObj of Object.values(imageKeyValueList)) {\r\n        const dataStructPattern = findDataStructPat(pageObj) //atm just finds list of key value pairs that show spatial allignment of some sort\r\n        for (const keyWordObj of page.keys) {\r\n            \r\n\r\n\r\n            // code for searching for best value\r\n            // find closest value\r\n            //find most horizontally in line\r\n\r\n            //\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//mutates imageKeyValList to include information about keys with structure\r\nexport async function findDataStructPattern(imageKeyValueList) {\r\n    console.log(\"running findDataStructPattern\")\r\n    console.log(\"imageKeyValueList:\")\r\n    console.log(imageKeyValueList)\r\n    for (var pageObj of Object.values(imageKeyValueList)) {\r\n        pageObj['keyValStructPattern'] = findPageDataStructPattern(pageObj)\r\n    }\r\n}\r\n\r\n\r\n//identifies if there is a positional pattern between keywords and values by noting distances between each keyword and all values\r\n//notes if distance/direction is the same and is indicative of a positional data structure\r\n//also notes keys in relation to each otehr\r\n\r\nfunction findPageDataStructPattern(pageObj, angleTolerance = 5) {\r\n    console.log(\"running findPageDataStructPattern\")\r\n    console.log(\"pageObj: \")\r\n    console.log(pageObj)\r\n\r\n    const keywords = pageObj.keys \r\n    const values = pageObj.values\r\n\r\n    const keyValueDistances = {};\r\n\r\n    for (const key of keywords) {\r\n        let valueDic = {}\r\n        for (const value of values) {\r\n            const dx = value.word_x - key.word_x\r\n            const dy = value.word_y - key.word_y\r\n            const distance = Math.sqrt(dx * dx + dy * dy);\r\n            const angle = Math.atan2(dy, dx) * (180 / Math.PI);\r\n            valueDic[value.uniqueKey] = {\r\n                valUniqueKey: value.uniqueKey,\r\n                dx,\r\n                dy,\r\n                distance,\r\n                angle\r\n            }\r\n        }\r\n        keyValueDistances[key.uniqueKey] = valueDic\r\n    }\r\n\r\n    //\r\n    let evidenceGroupings = []\r\n    console.log(`iterating over the following:`)\r\n    console.log(keyValueDistances)\r\n    //identifies key and value pairs based on matching angles\r\n    for (const keyUniqueKey of Object.keys(keyValueDistances)) {\r\n\r\n        const valueDic = keyValueDistances[keyUniqueKey]\r\n        console.log(`nested iterating over the following:`)\r\n        console.log(valueDic)\r\n        for (const valueUniqueKey of Object.keys(valueDic)) {\r\n            const valueInfo = valueDic[valueUniqueKey]\r\n            //find if there is group match\r\n            let foundGroup = false\r\n            for (var grouping of evidenceGroupings) {\r\n                const newAverageAngle = (grouping.averagedAngle * grouping.count + valueInfo.angle) / (grouping.count + 1)\r\n                const sameAngle = Math.abs(newAverageAngle - grouping.averagedAngle) <= angleTolerance\r\n                \r\n                if (!sameAngle) continue;\r\n                \r\n                const horizontalAngle = isHorizontalAngle(valueInfo.angle)\r\n                const verticalAngle = isVerticalAngle(valueInfo.angle)\r\n                const isDirectional = horizontalAngle || verticalAngle\r\n                const exists = keyUniqueKey in grouping.keyValuePairs;\r\n\r\n                if (exists && isDirectional) continue;\r\n\r\n                if (!exists) {\r\n                    grouping.keyValuePairs[keyUniqueKey] = [];\r\n                }\r\n\r\n                grouping.keyValuePairs[keyUniqueKey].push(valueInfo);\r\n                grouping.averagedAngle = newAverageAngle;\r\n                grouping.count += 1;\r\n                foundGroup = true\r\n                break\r\n            }\r\n            //create new group if none found\r\n            if (!foundGroup) {\r\n                evidenceGroupings.push({\r\n                    keyValuePairs: {\r\n                        [keyUniqueKey]: [valueInfo]\r\n                    },\r\n                    averagedAngle: valueInfo.angle,\r\n                    count: 1\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n    return evidenceGroupings.filter(grouping => grouping.count > 1)\r\n}\r\n\r\nfunction isHorizontalAngle(angle, tolerance = 10) {\r\n    return (\r\n        Math.abs(angle) <= tolerance ||        // near 0 (right)\r\n        Math.abs(angle - 180) <= tolerance     // near 180 (left)\r\n    );\r\n}\r\n\r\nfunction isVerticalAngle(angle, tolerance = 10) {\r\n    return (\r\n        Math.abs(angle - 90) <= tolerance ||   // near 90 (down)\r\n        Math.abs(angle + 90) <= tolerance      // near -90 (up)\r\n    );\r\n}","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/**\n * pdfjsVersion = 5.3.31\n * pdfjsBuild = 47ad820d9\n */\n\n;// ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  SIGNATURE: 101\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    const {\n      platform,\n      userAgent\n    } = navigator;\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox: userAgent.includes(\"Firefox\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"\", \"t\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Promise.try !== \"function\") {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\n;// ./src/display/display_utils.js\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(window.screen.availWidth * window.screen.availHeight * this.pixelRatio ** 2 * (1 + capAreaFactor / 100));\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\n\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n  }\n  #addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      _uiManager.delete();\n    }, {\n      signal: _uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n    this.#altText = altText;\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this.#signatureManager = signatureManager;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      const ac = new AbortController();\n      const signal = this.combinedSignal(ac);\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        ac.abort();\n        activeLayer?.toggleDrawing(true);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      this._editorUndoBar?.hide();\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId || editor.id === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  isSelected = false;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      style\n    } = this.div;\n    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    if (this.#altText) {\n      await this._editToolbar.addAltText(this.#altText);\n    }\n    return this._editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10n);\n    this.#altText = new AltText(this);\n    if (this.#accessibilityData) {\n      this.#altText.data = this.#accessibilityData;\n      this.#accessibilityData = null;\n    }\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n    return true;\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n    return true;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  get canChangeContent() {\n    return false;\n  }\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id\n    });\n  }\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n}\n\n;// ./src/display/api_utils.js\n\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\n;// ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n;// ./src/display/filter_factory.js\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\nif (isNodeJS) {\n  warn(\"Please use the `legacy` build in Node.js environments.\");\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const {\n          fillStyle,\n          strokeStyle\n        } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height) {\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](path);\n      return;\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](path);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(path) {\n    this.stroke(path);\n  }\n  fill(path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(path, intersect);\n    }\n  }\n  eoFill(path) {\n    this.pendingEOFill = true;\n    this.fill(path);\n  }\n  fillStroke(path) {\n    this.fill(path, false);\n    this.stroke(path, false);\n    this.consumePath(path);\n  }\n  eoFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  closeFillStroke(path) {\n    this.fillStroke(path);\n  }\n  closeEOFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  endPath(path) {\n    this.consumePath(path);\n  }\n  rawFillPath(path) {\n    this.ctx.fill(path);\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      return;\n    }\n    const newPath = new Path2D();\n    const invTransf = ctx.getTransform().invertSelf();\n    for (const {\n      transform,\n      x,\n      y,\n      fontSize,\n      path\n    } of paths) {\n      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n    }\n    ctx.clip(newPath);\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(matrix) {\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill || patternStroke) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n    this.current.patternStroke = true;\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(color) {\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent() {\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(color) {\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  setFillTransparent() {\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath();\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/pdf_objects.js\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    });\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.3.31\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : isNodeJS ? PDFNodeStream : PDFNetworkStream;\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n  #progressiveDoneListeners = [];\n  #progressiveReadListeners = [];\n  #progressListeners = [];\n  #rangeListeners = [];\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this.#capability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n  #messageHandler = null;\n  #port = null;\n  #webWorker = null;\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts = new WeakMap();\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n    this.fromPort = params => {\n      deprecated(\"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\");\n      if (!params?.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      return this.create(params);\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n  }\n  get promise() {\n    return this.#capability.promise;\n  }\n  #resolve() {\n    this.#capability.resolve();\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this.#port;\n  }\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {});\n    this.#resolve();\n  }\n  #initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this.#setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this.#webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this.#setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this.#setupFakeWorker();\n  }\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this.#capability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this.#port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this.#capability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.create - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.3.31\";\nconst build = \"47ad820d9\";\n\n;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      data\n    } = this;\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id);\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n    return true;\n  }\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n    return true;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  get canChangeContent() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n        Util.rectBoundingBox(...bbox, minMax);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\nclass HighlightOutliner {\n  #box;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  #type;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa\n        }\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.#opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.annotationElementId = data.id || null;\n    editor._initialData = initialData;\n    return editor;\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const A = buf[(i << 2) + 3];\n      if (A === 0) {\n        max = out[i] = 0xff;\n        continue;\n      }\n      const pix = out[i] = buf[i << 2];\n      if (pix > max) {\n        max = pix;\n      }\n      if (pix < min) {\n        min = pix;\n      }\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0; i < N; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.signatureManager && this.#description !== null) {\n      await toolbar.addEditSignatureButton(this._uiManager.signatureManager, this.#signatureUUID, this.#description);\n      toolbar.show();\n    }\n    return toolbar;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.#description = description;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.#description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor({\n      mode: AnnotationEditorType.STAMP\n    }, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._editToolbar.hide();\n      this._uiManager.editAltText(this, true);\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    editor.annotationElementId = data.id || null;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, build, createValidAbsoluteUrl, fetchData, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map","import * as pdfjsLib from './node_modules/pdfjs-dist/build/pdf.mjs';\r\npdfjsLib.GlobalWorkerOptions.workerSrc = './node_modules/pdfjs-dist/build/pdf.worker.mjs';\r\n\r\n\r\nexport async function cleanImage(file) {\r\n    // Placeholder for image cleaning logic\r\n    // This function should handle the image processing and return a cleaned image\r\n    return file; // For now, just return the original file\r\n}\r\n\r\n//filter function for incoming uploaded files\r\nexport async function filterImageFiles(files) {\r\n    \r\n    // Separate image and PDF files\r\n    const imageFiles = Array.from(files)\r\n        .filter(file => file.type.startsWith('image/'));\r\n    const pdfFiles = Array.from(files).filter(file => file.type === 'application/pdf');\r\n\r\n    // Convert PDF files to File objects\r\n    function canvasToFile(canvas, name) {\r\n        return new Promise(resolve => {\r\n            canvas.toBlob(blob => {\r\n                resolve(new File([blob], name, { type: 'image/png' }));\r\n            }, 'image/png');\r\n        });\r\n    }\r\n\r\n    const convertedPdfFiles = [];\r\n    for (const pdffile of pdfFiles) {\r\n        try {\r\n            const arrayBuffer = await pdffile.arrayBuffer();\r\n            const loadingTask = pdfjsLib.getDocument({ data: arrayBuffer });\r\n            const pdf = await loadingTask.promise;\r\n            console.log(`PDF loaded: ${pdffile.name}`);\r\n            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\r\n                const page = await pdf.getPage(pageNum);\r\n                const viewport = page.getViewport({ scale: 2 });\r\n                const canvas = document.createElement('canvas');\r\n                const context = canvas.getContext('2d');\r\n                canvas.width = viewport.width;\r\n                canvas.height = viewport.height;\r\n                await page.render({ canvasContext: context, viewport }).promise;\r\n                const uniqueName = `${pdffile.name}_page${pageNum}.png`;\r\n                const file = await canvasToFile(canvas, uniqueName);\r\n                convertedPdfFiles.push(file);\r\n            }\r\n        } catch (err) {\r\n            console.error(`Error loading ${pdffile.name}:`, err);\r\n        }\r\n    }\r\n\r\n    // Combine all image sources as File objects\r\n    const allImages = [...imageFiles, ...convertedPdfFiles];\r\n    if (!Array.isArray(allImages) || allImages.length === 0) {\r\n        throw new Error('No valid images found after filtering.');\r\n    }\r\n\r\n    // Clean all images and filter out failures\r\n    const processedImages = await Promise.all(\r\n        allImages.map(async image => {\r\n            // Clean image (async)\r\n            return await cleanImage(image);\r\n        })\r\n    );\r\n\r\n    // Remove any undefined images\r\n    return processedImages.filter(img => img !== undefined);\r\n}","// Draws lines between key centers and value centers for each image, returns array of marked-up image Files\r\nexport async function markupStructure(original_images, imageKeyValList) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n    const markedImages = [];\r\n    for (const original_file of original_images) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n\r\n        if (!imageKeyValList[image_name]) {\r\n            console.warn('No markup data for image:', image_name);\r\n        }\r\n\r\n        const page_info = imageKeyValList[image_name] \r\n\r\n        //circles keys\r\n        const keys = page_info.keys;\r\n        for (const key_object of keys) {\r\n            ctx.beginPath();\r\n            ctx.arc(key_object.word_x, key_object.word_y, 10, 0, 2 * Math.PI);\r\n            ctx.strokeStyle = 'red';\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n        }\r\n        const values = page_info.values;\r\n        for (const value_object of values) {\r\n            ctx.beginPath();\r\n            ctx.arc(value_object.word_x, value_object.word_y, 10, 0, 2 * Math.PI);\r\n            ctx.strokeStyle = 'blue';\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n        }\r\n\r\n        // Draw green lines between each key and its 2 closest values\r\n        for (const key_object of keys) {\r\n            const keyObjectUniqueKey = key_object.uniqueKey\r\n            const keyValStruct = page_info.keyValStructPattern\r\n            const keyFoundInStruct = keyObjectUniqueKey in keyValStruct\r\n\r\n            const key_x = key_object.word_x\r\n            const key_y = key_object.word_y\r\n\r\n            // Compute distances to all values\r\n            const structDistances = [];\r\n            const regDistances = [];\r\n            for (const value_object of values) {\r\n                const valObjectUniqueKey = value_object.uniqueKey\r\n                if (keyFoundInStruct) {\r\n                    if (valObjectUniqueKey in keyValStruct[keyObjectUniqueKey]) {\r\n                        const dx = keyValStruct[keyObjectUniqueKey][valObjectUniqueKey].dx\r\n                        const dy = keyValStruct[keyObjectUniqueKey][valObjectUniqueKey].dy\r\n                        const dist = Math.sqrt(dx * dx + dy * dy);\r\n                        structDistances.push({key_x, key_y, dx, dy, dist});\r\n                        continue \r\n                    } \r\n                }\r\n\r\n                \r\n                const dx = value_object.word_x - key_object.word_x;\r\n                const dy = value_object.word_y - key_object.word_y;\r\n                const dist = Math.sqrt(dx * dx + dy * dy);\r\n                regDistances.push({key_x, key_y, dx, dy, dist});\r\n            }\r\n            // Sort by distance and take 2 closest\r\n            regDistances.sort((a, b) => a.dist - b.dist);\r\n            for (const distanceInfo of regDistances.slice(0, 3)) {\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(distanceInfo.key_x, distanceInfo.key_y);\r\n                ctx.lineTo(distanceInfo.key_x + distanceInfo.dx, distanceInfo.key_y + distanceInfo.dy);\r\n                ctx.strokeStyle = 'yellow';\r\n                ctx.lineWidth = 2;\r\n                ctx.stroke();\r\n            }\r\n\r\n            for (const distanceInfo of structDistances) {\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(distanceInfo.key_x, distanceInfo.key_y);\r\n                ctx.lineTo(distanceInfo.key_x + dx, distanceInfo.key_y + dy);\r\n                ctx.strokeStyle = 'green';\r\n                ctx.lineWidth = 3;\r\n                ctx.stroke();\r\n            }\r\n        }\r\n            \r\n      \r\n\r\n\r\n\r\n\r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}\r\n\r\n// Process that creates a list of marked up images that display the found OCR results in their processed key value map form\r\nexport async function markupOCR(original_images, OCR_word_list) {\r\n    // Helper to load image from File/Blob\r\n    function loadImage(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const img = new window.Image();\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = URL.createObjectURL(file);\r\n        });\r\n    }\r\n\r\n    \r\n\r\n    const markedImages = [];\r\n    for (const original_file of original_images) {\r\n        const image_name = original_file.name;\r\n        const img = await loadImage(original_file);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(img, 0, 0);\r\n        \r\n        const cur_page_words = OCR_word_list.filter(word_object => image_name === word_object.imageName);\r\n        // console.log(cur_page_words)\r\n        for (const cur_page_word of cur_page_words) {\r\n            ctx.beginPath();\r\n            ctx.rect(cur_page_word.word_x, cur_page_word.word_y, cur_page_word.width, cur_page_word.height);\r\n\r\n            if (cur_page_word.potential_matches.size > 0) {\r\n                ctx.strokeStyle = 'blue';\r\n            } else if (cur_page_word.numberScore > 0.9) {\r\n                ctx.strokeStyle = 'red';\r\n            } else {\r\n                ctx.strokeStyle = 'green';\r\n            }\r\n\r\n            ctx.lineWidth = 3;\r\n            ctx.stroke();\r\n\r\n            // Draw the word text at the center\r\n            ctx.save();\r\n            ctx.font = '16px Arial';\r\n            ctx.fillStyle = 'white';\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText(cur_page_word.word_text, cur_page_word.word_x, cur_page_word.word_y);\r\n            ctx.restore();\r\n\r\n\r\n\r\n\r\n        } \r\n        \r\n        // Convert canvas to Blob (PNG)\r\n        const markedBlob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n        // Optionally, you can create a File with the same name\r\n        const markedFile = new File([markedBlob], image_name, { type: 'image/png' });\r\n        markedImages.push(markedFile);\r\n        // Clean up\r\n        URL.revokeObjectURL(img.src);\r\n    }\r\n    return markedImages;\r\n}","import {ocrProcessing, generateimageKeyValueList, findKeyValuePairs, findDataStructPattern} from './imageProcessor.js'\r\nimport {filterImageFiles} from './imageCleaner.js'\r\nimport {processJsonToCSV, testingJsonProcessing} from './formatCsvRow.js'\r\nimport {markupOCR, markupStructure} from './imageMarkup.js'\r\n\r\ndocument.querySelectorAll('input[type=\"range\"]').forEach(slider => {\r\n    const spanId = slider.id + '-value';\r\n    const display = document.getElementById(spanId);\r\n    if (display) {\r\n    display.textContent = slider.value;\r\n    slider.addEventListener('input', () => {\r\n        display.textContent = slider.value;\r\n    });\r\n    }\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    document.getElementById('process-btn-test').addEventListener('click', async () => {\r\n        //fuse parameters\r\n        const fuseThreshold = parseFloat(document.getElementById('slider-fuse-threshold').value);\r\n        const keySearchThreshold = parseFloat(document.getElementById('slider-key-search-threshold').value);\r\n        const maxKeyEntries = parseInt(document.getElementById('slider-max-key-entries').value, 10);\r\n        const replaceStrikesWeight = parseFloat(document.getElementById('slider-replace-strikes-weight').value);\r\n        const regexStrikesWeight = parseFloat(document.getElementById('slider-regex-strikes-weight').value);\r\n        const downloadOcr = document.getElementById('downloadOCRJson').checked\r\n        const displayKeyValList = document.getElementById('displayKeyValueList').checked\r\n        const displayKeyValStruct = document.getElementById('displayKeyValueStruct').checked\r\n        console.log({\r\n            fuseThreshold,\r\n            keySearchThreshold,\r\n            maxKeyEntries,\r\n            replaceStrikesWeight,\r\n            regexStrikesWeight\r\n        });\r\n\r\n        try {\r\n  \r\n            const files = document.getElementById('bloodwork-files').files;\r\n            const allImages = await filterImageFiles(files);\r\n            console.log('Number of image files found:', allImages.length);\r\n            console.log('Files ready for processing', allImages);\r\n            const ocr_results = await ocrProcessing(allImages);\r\n\r\n             //generate imageKeyValues per page\r\n            const imageKeyValueList = await generateimageKeyValueList(\r\n                ocr_results,\r\n                fuseThreshold,\r\n                keySearchThreshold,\r\n                maxKeyEntries,\r\n                replaceStrikesWeight,\r\n                regexStrikesWeight\r\n            );\r\n\r\n            // Download OCR JSON output\r\n            if (downloadOcr) {\r\n                console.log(\"requesting ocr json output download\")\r\n                const json = JSON.stringify(ocr_results, null, 2);\r\n                const json_blob = new Blob([json], { type: 'application/json' });\r\n                const json_url = URL.createObjectURL(json_blob);\r\n                const json_a = document.createElement('a');\r\n                json_a.href = json_url;\r\n                json_a.download = 'mutated_json_output.json';\r\n                document.body.appendChild(json_a);\r\n                json_a.click();\r\n                document.body.removeChild(json_a);\r\n                URL.revokeObjectURL(json_url);\r\n            }\r\n\r\n            // Opens popup of marked valued ocr output (based off of mutation to ocr from imageKeyValueList)\r\n            const ocr_marked_image_list = await markupOCR(allImages, ocr_results)\r\n            if (displayKeyValList) {\r\n                console.log('ran the display')\r\n                displayImages(ocr_marked_image_list)\r\n            }\r\n            \r\n            //mutates imageKeyValueList to find structure\r\n            await findDataStructPattern(imageKeyValueList)\r\n            const marked_struct_image_list = await markupStructure(allImages, imageKeyValueList)\r\n            if (displayKeyValStruct) {\r\n                console.log('ran the display')\r\n                displayImages(marked_struct_image_list)\r\n            }\r\n//----------------------------------------------------------------------------------------------\r\n            \r\n            \r\n            \r\n           \r\n\r\n            \r\n\r\n            \r\n\r\n\r\n\r\n            // const results = findKeyValuePairs(imageKeyValueList)\r\n\r\n            \r\n            \r\n\r\n            \r\n\r\n\r\n            //debug testing\r\n            // const modified_json = JSON.stringify(await testingJsonProcessing(ocr_results), null, 2);\r\n            // const json_blob = new Blob([modified_json], { type: 'application/json' });\r\n            // const json_url = URL.createObjectURL(json_blob);\r\n            // const json_a = document.createElement('a');\r\n            // json_a.href = json_url;\r\n            // json_a.download = 'mod_json_output.json';\r\n            // document.body.appendChild(json_a);\r\n            // json_a.click();\r\n            // document.body.removeChild(json_a);\r\n            // URL.revokeObjectURL(json_url);\r\n\r\n\r\n\r\n            // Download CSV output\r\n            // const csv = await processJsonToCSV(ocr_results); // Pass the object, not the string\r\n            // const csv_blob = new Blob([csv], { type: 'application/csv' });\r\n            // const csv_url = URL.createObjectURL(csv_blob);\r\n            // const csv_a = document.createElement('a');\r\n            // csv_a.href = csv_url;\r\n            // csv_a.download = 'output.csv';\r\n            // document.body.appendChild(csv_a);\r\n            // csv_a.click();\r\n            // document.body.removeChild(csv_a);\r\n            // URL.revokeObjectURL(csv_url);\r\n        } catch (err) {\r\n            console.error('Error during processing:', err);\r\n        }\r\n    });\r\n});\r\n\r\n\r\nfunction displayImages(image_list) {\r\n    console.log('ran the display')\r\n    // Open a new window and display all marked images there\r\n    const imageWindow = window.open('', '_blank', 'width=1200,height=900,scrollbars=yes,resizable=yes');\r\n    if (imageWindow) {\r\n        imageWindow.document.write('<!DOCTYPE html><html><head><title>Marked Images</title>');\r\n        imageWindow.document.write('<style>body{background:#222;color:#fff;font-family:sans-serif;margin:0;padding:2em;} .img-wrap{margin:2em 0;text-align:center;} img{max-width:95vw;max-height:80vh;box-shadow:0 0 10px #000;} button{position:fixed;top:1em;right:1em;z-index:1000;padding:0.5em 1em;font-size:1.2em;}</style>');\r\n        imageWindow.document.write('</head><body>');\r\n        imageWindow.document.write('<button onclick=\"window.close()\">Close</button>');\r\n        for (const markedFile of image_list) {\r\n            const url = imageWindow.URL.createObjectURL(markedFile);\r\n            imageWindow.document.write('<div class=\"img-wrap\"><img src=\"' + url + '\" alt=\"' + (markedFile.name || 'marked_image.png') + '\"></div>');\r\n        }\r\n        imageWindow.document.write('</body></html>');\r\n        imageWindow.document.close();\r\n    } else {\r\n        alert('Popup blocked! Please allow popups for this site to view marked images.');\r\n    }\r\n}"],"names":["readFromBlobOrFile","blob","Promise","resolve","reject","fileReader","FileReader","onload","result","onerror","target","error","code","Error","readAsArrayBuffer","loadImage","async","image","data","test","atob","split","map","c","charCodeAt","resp","fetch","arrayBuffer","HTMLElement","tagName","src","poster","toBlob","OffscreenCanvas","convertToBlob","File","Blob","Uint8Array","module","exports","workerPath","workerBlobURL","worker","URL","type","Worker","createObjectURL","defaultOptions","spawnWorker","terminateWorker","onMessage","send","getId","jobCounter","id","_id","action","payload","resolveURL","s","window","location","href","options","opts","forEach","key","resolvePaths","createJob","log","OEM","workerCounter","langs","oem","LSTM_ONLY","_options","config","logger","errorHandler","promises","currentLangs","currentOem","currentConfig","lstmOnlyCore","DEFAULT","includes","legacyCore","workerResReject","workerResResolve","workerRes","event","message","startJob","jobId","workerId","loadLanguageInternal","_langs","langPath","dataPath","cachePath","cacheMethod","gzip","lstmOnly","legacyLang","initializeInternal","_oem","_config","status","promiseId","userJobId","resolveObj","load","console","warn","writeText","path","text","method","args","readText","encoding","removeFile","FS","reinitialize","TESSERACT_ONLY","TESSERACT_LSTM_COMBINED","filter","x","push","length","then","setParameters","params","recognize","output","detect","terminate","corePath","logging","catch","AFR","AMH","ARA","ASM","AZE","AZE_CYRL","BEL","BEN","BOD","BOS","BUL","CAT","CEB","CES","CHI_SIM","CHI_TRA","CHR","CYM","DAN","DEU","DZO","ELL","ENG","ENM","EPO","EST","EUS","FAS","FIN","FRA","FRK","FRM","GLE","GLG","GRC","GUJ","HAT","HEB","HIN","HRV","HUN","IKU","IND","ISL","ITA","ITA_OLD","JAV","JPN","KAN","KAT","KAT_OLD","KAZ","KHM","KIR","KOR","KUR","LAO","LAT","LAV","LIT","MAL","MAR","MKD","MLT","MSA","MYA","NEP","NLD","NOR","ORI","PAN","POL","POR","PUS","RON","RUS","SAN","SIN","SLK","SLV","SPA","SPA_OLD","SQI","SRP","SRP_LATN","SWA","SWE","SYR","TAM","TEL","TGK","TGL","THA","TIR","TUR","UIG","UKR","URD","UZB","UZB_CYRL","VIE","YID","prefix","cnt","Math","random","toString","slice","createWorker","finally","OSD_ONLY","AUTO_OSD","AUTO_ONLY","AUTO","SINGLE_COLUMN","SINGLE_BLOCK_VERT_TEXT","SINGLE_BLOCK","SINGLE_LINE","SINGLE_WORD","CIRCLE_WORD","SINGLE_CHAR","SPARSE_TEXT","SPARSE_TEXT_OSD","RAW_LINE","handler","onmessage","runtime","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","record","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","schedulerCounter","workers","runningWorkers","jobQueue","getNumWorkers","dequeue","wIds","queue","job","w","shift","apply","addWorker","addJob","wid","getQueueLen","version","createScheduler","Tesseract","languages","PSM","setLogging","env","WorkerGlobalScope","document","process","packet","postMessage","_logging","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","isArray","Array","getTag","isString","isNumber","isObject","isDefined","isBlank","trim","KeyStore","_keys","_keyMap","totalWeight","createKey","weight","get","keyId","toJSON","JSON","stringify","getFn","createKeyPath","createKeyId","INVALID_KEY_WEIGHT_VALUE","join","Config","isCaseSensitive","ignoreDiacritics","includeScore","shouldSort","sortFn","a","b","score","idx","includeMatches","findAllMatches","minMatchCharLength","threshold","distance","useExtendedSearch","list","arr","deepGet","index","isObjectLike","isBoolean","baseToString","len","ignoreLocation","ignoreFieldNorm","fieldNormWeight","SPACE","FuseIndex","norm","mantissa","cache","Map","m","pow","numTokens","match","has","n","parseFloat","round","set","clear","isCreated","setIndexRecords","setSources","docs","records","setKeys","_keysMap","doc","docIndex","_addString","_addObject","add","size","removeAt","splice","getValueForItemAtKeyId","item","v","$","keyIndex","subRecords","stack","nestedArrIndex","subRecord","k","createIndex","myIndex","computeScore$1","pattern","errors","currentLocation","expectedLocation","accuracy","proximity","abs","MAX_BITS","createPatternAlphabet","mask","char","stripDiacritics","String","normalize","str","replace","BitapSearch","toLowerCase","chunks","addChunk","startIndex","alphabet","remainder","end","substr","searchIn","isMatch","indices","allIndices","totalScore","hasMatches","patternAlphabet","patternLen","textLen","max","min","currentThreshold","bestLocation","computeMatches","matchMask","indexOf","lastBitArr","finalScore","binMax","binMin","binMid","floor","start","bitArr","j","charMatch","matchmask","convertMaskToIndices","search","BaseMatch","isMultiMatch","getMatch","multiRegex","isSingleMatch","singleRegex","exp","matches","FuzzyMatch","super","_bitapSearch","IncludeMatch","searchers","startsWith","endsWith","searchersLen","SPACE_RE","MultiMatchSet","Set","registeredSearchers","createSearcher","searcherClass","condition","LogicalOperator","KeyType","isExpression","query","convertToExplicit","parse","auto","isQueryPath","isPath","isLeaf","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","searcher","node","children","operator","transformMatches","refIndex","transformScore","Fuse","_keyStore","setCollection","_docs","_myIndex","remove","predicate","results","getIndex","limit","_searchStringList","_searchObjectList","_searchLogical","Number","EPSILON","computeScore","sort","transformers","transformer","format","expression","evaluate","_findMatches","res","child","resultMap","expResults","_typeof","o","ownKeys","e","r","t","getOwnPropertySymbols","getOwnPropertyDescriptor","_defineProperty","toPrimitive","_toPrimitive","_toPropertyKey","parseIndex","parseQuery","register","queryItem","found","token","_","numMatches","qLen","pLen","field_names","csvfield","replacements","u","_regeneratorDefine2","f","p","y","G","d","bind","l","_regenerator","_createForOfIteratorHelper","_arrayLikeToArray","from","_unsupportedIterableToArray","_n","F","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","ocrProcessing","_x","_ocrProcessing","_callee4","files","scheduler","workerGen","jobPromises","flatResults","_context4","_ref","_callee","_context","chrome","getURL","tessedit_pageseg_mode","all","fill","_callee2","_context2","_ref3","_callee3","file","_context3","blocks","hocr","tsv","out","_out$data","wordsArray","imageName","rotateRadians","block","blockIdx","paragraphs","para","paraIdx","paragraphKey","concat","lines","line","lineIdx","lineKey","words","word","wordIdx","word_choices","choices","uniqueKey","word_text","word_confidence","confidence","word_y","bbox","y0","word_x","x0","height","y1","width","x1","potential_matches","numberScore","webkitRelativePath","_x14","flat","evalKeyConfidence","_x2","_x3","_x4","_x5","_x6","_x7","_evalKeyConfidence","_callee5","csv_value","csv_replacement_values","ocr_object_list","total_threshold","max_entries","fuseThreshold","fuseOptions","valid_entries","seen_indexes","fuse","pure_results","_iterator4","_step4","pure_result","_iterator5","_step5","replacement_value","replacement_results","_iterator6","_step6","replacement_result","_context5","every","closest_matches","scoreOCRNumber","replace_strikes_weight","regex_strikes_weight","replace_strikes","transformed","regex_strikes","regex_transformed","generateimageKeyValueList","_x8","_x9","_x0","_x1","_x10","_x11","_generateimageKeyValueList","_callee6","keySearchThreshold","maxKeyEntries","replaceStrikesWeight","regexStrikesWeight","_iterator7","_step7","wordObj","wordText","probableKeys","_iterator8","_step8","field","csvField","replacementList","keyMatchResult","imageDic","_iterator9","_step9","pageKey","_t","_t2","_context6","findDataStructPattern","_x13","_findDataStructPattern","_callee8","imageKeyValueList","_i4","_Object$values2","pageObj","_context8","findPageDataStructPattern","angleTolerance","_step","keywords","keyValueDistances","_iterator","_step3","valueDic","_iterator3","dx","dy","sqrt","angle","atan2","PI","valUniqueKey","evidenceGroupings","_i","_Object$keys","keyUniqueKey","_i2","_Object$keys2","_step2","valueInfo","foundGroup","_iterator2","grouping","newAverageAngle","averagedAngle","count","horizontalAngle","isHorizontalAngle","verticalAngle","isVerticalAngle","isDirectional","exists","keyValuePairs","tolerance","getOwnPropertyDescriptors","defineProperties","_objectSpread","Date","Intervention","AST","AST_RangeLow","AST_RangeHigh","ALT","ALT_RangeLow","ALT_RangeHigh","GLOBULIN","GLOBULIN_RangeLow","GLOBULIN_RangeHigh","BUN","BUN_RangeLow","BUN_RangeHigh","FASTING_GLUCOSE","FASTING_GLUCOSE_RangeLow","FASTING_GLUCOSE_RangeHigh","A1C","A1C_RangeLow","A1C_RangeHigh","RBC","RBC_RangeLow","RBC_RangeHigh","HGB","HGB_RangeLow","HGB_RangeHigh","HCT","HCT_RangeLow","HCT_RangeHigh","WBC","WBC_RangeLow","WBC_RangeHigh","PLATELETS","PLATELETS_RangeLow","PLATELETS_RangeHigh","SODIUM","SODIUM_RangeLow","SODIUM_RangeHigh","POTASSIUM","POTASSIUM_RangeLow","POTASSIUM_RangeHigh","CHLORIDE","CHLORIDE_RangeLow","CHLORIDE_RangeHigh","CALCIUM","CALCIUM_RangeLow","CALCIUM_RangeHigh","CO2","CO2_RangeLow","CO2_RangeHigh","IGF1","IGF1_RangeLow","IGF1_RangeHigh","FASTING_INSULIN","FASTING_INSULIN_RangeLow","FASTING_INSULIN_RangeHigh","BETA_HYDROXYBUTYRATE","BETA_HYDROXYBUTYRATE_RangeLow","BETA_HYDROXYBUTYRATE_RangeHigh","B12","B12_RangeLow","B12_RangeHigh","MAGNESIUM","MAGNESIUM_RangeLow","MAGNESIUM_RangeHigh","CRP","CRP_RangeLow","CRP_RangeHigh","IRON","IRON_MaleRangeLow","IRON_MaleRangeHigh","IRON_FemaleRangeLow","IRON_FemaleRangeHigh","CHOLESTEROL","CHOLESTEROL_RangeLow","CHOLESTEROL_RangeHigh","HOMOCYSTEINE","HOMOCYSTEINE_RangeLow","HOMOCYSTEINE_RangeHigh","Vitamin_D","Vitamin_D_RangeLow","Vitamin_D_RangeHigh","isNodeJS","versions","nw","electron","FONT_IDENTITY_MATRIX","LINE_FACTOR","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","SIGNATURE","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","verbosity","setVerbosityLevel","level","isInteger","getVerbosityLevel","msg","unreachable","assert","cond","createValidAbsoluteUrl","url","baseUrl","addDefaultProtocol","dots","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","protocol","_isValidProtocol","updateUrlHash","hash","allowRel","shadow","prop","nonSerializable","BaseException","PasswordException","UnknownErrorException","details","InvalidPDFException","ResponseException","missing","FormatError","AbortException","bytesToString","bytes","MAX_ARGUMENT_COUNT","fromCharCode","strBuf","chunkEnd","chunk","subarray","stringToBytes","util_FeatureTest","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","isOffscreenCanvasSupported","isImageDecoderSupported","ImageDecoder","platform","userAgent","navigator","isAndroid","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","CSS","supports","hexNumbers","padStart","Util","makeHexColor","g","scaleMinMax","minMax","temp","m1","m2","applyTransform","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","axialAlignedBoundingBox","rect","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","inverseTransform","singularValueDecompose2dScale","matrix","first","second","normalizeRect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","rectBoundingBox","x2","x3","y2","y3","mt","tt","ttt","delta","sqrtDelta","bezierBoundingBox","NormalizeRegex","NormalizationMap","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","MathClamp","toBase64Util","toBase64","btoa","try","sumPrecise","numbers","reduce","SVG_NS","PixelsPerInch","static","PDF","fetchData","isValidFetchUrl","baseURI","response","ok","statusText","json","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","PageViewport","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","rawDims","dims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","substring","isPdfFile","filename","StatTimer","started","times","time","now","timeEnd","outBuf","longest","padEnd","noContextMenu","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","input","RegExp","exec","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getRGB","color","colorRGB","getCurrentTransform","ctx","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","style","useRound","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","capAreaFactor","maxAreaScale","Infinity","maxWidthScale","maxHeightScale","capPixels","maxScale","devicePixelRatio","winPixels","ceil","screen","availWidth","availHeight","SupportedImageMimeTypes","EditorToolbar","editor","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","createElement","classList","signal","_uiManager","_signal","addEventListener","buttons","className","append","position","toolbarPosition","direction","insetInlineEnd","top","_focusEventsAllowed","element","capture","hide","hideDropdown","show","shown","editorType","button","tabIndex","delete","divider","addAltText","altText","prepend","addColorPicker","colorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","updateEditSignatureButton","description","title","destroy","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","ImageManager","_isSVGFittingCanvas","getContext","willReadFrequently","Image","decode","drawImage","getImageData","rawData","bitmap","refCounter","isSvg","mustRemoveAspectRatioPromise","imageElement","imagePromise","svgUrl","readAsDataURL","createImageBitmap","getFromFile","lastModified","getFromUrl","getFromBlob","blobPromise","getFromId","getFromCanvas","canvas","offscreen","transferToImageBitmap","getSvgUrl","deleteId","transferFromImageBitmap","close","isValidId","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","KeyboardManager","callbacks","allKeys","callback","isMacKey","at","altKey","ctrlKey","metaKey","shiftKey","bubbles","checker","ColorManager","_colors","colors","visibility","colorScheme","body","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","_colorsMapping","getHexCode","AnnotationEditorUIManager","AbortController","_editorUndoBar","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","_keyboardManager","proto","arrowChecker","contains","activeElement","hasSomethingToControl","textInputChecker","_self","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","mlManager","editorUndoBar","supportsPinchToZoom","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","annotationStorage","filterFactory","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_supportsPinchToZoom","abort","layer","clearTimeout","combinedSignal","ac","AbortSignal","any","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","pair","highlightColorNames","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","firstTime","getSignature","switchToMode","mode","on","once","dispatch","source","setPreference","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","anchorNode","nodeType","Node","TEXT_NODE","parentElement","textLayer","currentLayer","hasTextLayer","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","closest","getSelectionBoxes","empty","isNoneMode","createAndAddNewEditor","showAllEditors","addToAnnotationStorage","setValue","activeLayer","toggleDrawing","pointerup","blur","hasSelection","lastEditor","lastActiveElement","keydown","keyup","copy","cut","paste","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","editors","serialized","serialize","clipboardData","setData","getData","ex","newEditors","deserializedEditor","deserialize","addCommands","isEditorHandlingKeyboard","entries","some","assign","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getLayer","pageIndex","currentPageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","promise","withResolvers","loadSignatures","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateColor","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","getEditors","getEditor","addEditor","removeEditor","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","ed","updateUI","updateUIForDefaultProperties","toggleSelected","select","isSelected","firstSelectedEditor","cleanUndoStack","drawingEditor","endDrawingSession","commit","noCommit","totalX","totalY","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","setCanvas","addMissingCanvas","AltText","added","review","initialize","l10n","_l10n","label","onClick","_reportTelemetry","guessedText","focusVisible","hasData","setGuessedText","generatedAltText","toggleAltTextBadge","badge","isForCopying","decorative","textWithDisclaimer","cancel","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","removeAttribute","textContent","parentNode","getElementForAltText","TouchManager","isPinchingDisabled","isPinchingStopped","onPinchStart","onPinching","onPinchEnd","passive","MIN_TOUCH_DISTANCE_TO_PINCH","touches","pointerDownAC","cancelPointerDown","pointerType","opt","onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","screen0X","screen0Y","screen1X","screen1Y","touchInfo","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","hypot","pDistance","origin","AnnotationEditor","_isCopy","_editToolbar","_initialOptions","_initialData","_isVisible","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","_type","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","zIndex","setInForeground","setParent","focusin","focusout","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","_onTranslating","translate","scrollIntoView","findNewParent","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","pageTranslationToScreen","parentScale","setDims","fixDims","widthPercent","heightPercent","getInitialTranslation","classes","savedDraggable","togglePointerEvents","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","_onResized","newWidth","newHeight","_round","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","deltaX","deltaY","ratioX","ratioY","fromKeyboard","lastScreenX","lastScreenY","oldDiag","_onResizing","altTextFinish","addEditToolbar","removeEditToolbar","addContainer","editToolbarDiv","before","getClientDimensions","addAltTextButton","altTextData","guessedAltText","setGuessedAltText","serializeAltText","hasAltText","hasAltTextData","defaultL10nId","maxWidth","maxHeight","isResizable","_origin","prevDistance","factor","transfCenterPoint","newTransfCenterPoint","pointerdown","hasDraggingStarted","cancelDrag","_onStopDragging","clientX","clientY","pointerId","_onStartDragging","isPrimary","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","isInEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","bottom","right","innerHeight","innerWidth","rotate","_angle","serializeDeleted","popupRef","accessibilityData","isCopy","timeout","makeResizable","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","firstChild","lastChild","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","canChangeContent","dblclick","_editorType","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","ArrayBuffer","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","transfer","AnnotationStorage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","modified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","computeTelemetryFinalData","resetModifiedIds","modifiedIds","ids","structuredClone","FontLoader","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","baseFontName","font","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","otherRequest","_loadTestFont","int32","offset","spliceString","insert","called","XXXX_VALUE","checksum","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","objId","cmds","Path2D","fontExtraProperties","getFactoryUrlProp","isRefProxy","num","gen","isValidExplicitDest","validRef","validName","dest","page","zoom","argsLen","allowNull","LoopbackPort","listener","rmAbort","aborted","onAbort","removeEventListener","onFn","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","stream","capability","reason","actionName","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","onPull","onCancel","success","streamController","dataReason","allSettled","BaseCanvasFactory","enableHWA","_createCanvas","canvasAndContext","DOMCanvasFactory","BaseCMapReaderFactory","isCompressed","_fetch","cMapData","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","DOMFilterFactory","docId","contain","svg","createElementNS","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","step","newStart","newStep","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","DOMStandardFontDataFactory","BaseWasmFactory","DOMWasmFactory","node_utils_fetchData","fs","getBuiltinModule","readFile","NodeFilterFactory","NodeCanvasFactory","createRequire","require","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","PathType","applyBoundingBox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","ownerBBox","current","getClippedPathBoundingBox","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p2","p3","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","Float32Array","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","strokeStyle","fillColor","strokeColor","convertBlackAndWhiteToRGBA","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","CachedCanvases","canvasFactory","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","patternStroke","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","clipBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","hcmFilterId","savedFilter","_scaleImage","img","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","op","path2d","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","needRestore","paths","pendingTextPaths","invTransf","preMultiplySelf","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","invPatternTransform","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","GlobalWorkerOptions","workerPort","workerSrc","Metadata","parsedData","getRaw","INTERNAL","OptionalContentGroup","renderingIntent","usage","rbGroups","view","viewState","printState","_setVisible","internal","userSet","OptionalContentConfig","creator","order","groups","baseState","off","getHash","array","policy","setVisibility","preserveRB","rbGroup","otherId","setOCGState","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","onProgress","_removeRangeReader","reader","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","read","requestCapability","_end","_queuedChunk","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","validateRangeRequestCapabilities","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","decoder","TextDecoder","fatal","quotindex","replaceAll","extvalue","encodingend","charset","hex","getFilenameFromContentDispositionHeader","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","abortController","credentials","redirect","getArrayBuffer","PDFFetchStream","_responseOrigin","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","getReader","_readCapability","responseOrigin","NetworkManager","currXhrId","pendingRequests","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","lengthComputable","_requestId","_close","urlRegex","PDFNodeStream","sourceUrl","pathToFileURL","parseUrlOrPath","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_readableStream","lstat","stat","_setReadableStream","createReadStream","_error","readableStream","INITIAL_DATA","PDFObjects","TextLayer","FontInspector","WeakMap","textContentSource","fontFamilyMap","pump","lang","styles","onBefore","abortEx","textDivs","textContentItemsStr","geom","textDiv","textDivProperties","hasText","hasEOL","fontName","fontSubstitution","fontHeight","fontAscent","sin","cos","scaleFactorStr","divStyle","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","cleanup","alpha","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","XfaText","xfa","walk","shouldBuildText","attributes","getDocument","task","PDFDocumentLoadingTask","getUrlProp","Buffer","getDataProp","password","rangeTransport","PDFDataRangeTransport","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","port","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","transport","WorkerTransport","_transport","_capability","onPassword","_pendingDestroy","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","_intentStates","getViewport","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","_isSameOrigin","otherUrl","base","other","_createCDNWrapper","wrapper","fromPort","terminateEarly","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","cachedPort","pdfjsWorker","import","loader","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cachedPromise","isOpList","modifiedIdsHash","terminated","sink","readyReason","_numPages","htmlForXfa","updatePassword","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","imageData","refStr","metadata","RenderTask","onContinue","form","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_canvas","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","G_CMYK","G_RGB","G_rgb","G_HTML","RGB_G","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","RGB_CMYK","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","html","storage","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","root","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","childHtml","xmlns","querySelectorAll","hidden","DEFAULT_TAB_INDEX","GetElementsByNameSet","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","titleObj","contentsObj","richText","_isEditable","isEditable","hasPopupData","updateEdited","popup","resetEdited","currentRect","setRotation","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","defs","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","attachmentDest","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","findIndex","selectChild","editable","changeEx","keyDown","PopupElement","elementIds","ariaHasPopup","trigger","flatMap","baseColor","outlineColor","header","dateObj","valueOf","contents","_formatContents","popupLines","popupContent","lineAttributes","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","containerClassName","svgElementName","vertices","points","polyline","it","inkLists","thickness","AnnotationLayer","accessibilityManager","annotationEditorUIManager","structTreeLayer","_annotationEditorUIManager","hasEditableAnnotations","contentElement","ariaAttributes","getAriaAttributes","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","addLinkAnnotations","_defaultBorderStyle","replaceWith","after","editableAnnotation","_hasNoCanvas","getEditableAnnotations","getEditableAnnotation","rawWidth","EOL_PATTERN","FreeTextEditor","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","setFontsize","editorDiv","savedFontsize","col","savedColor","overlayDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","innerText","prevChild","childNodes","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","posX","posY","nodeValue","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","replaceChildren","padding","structTreeParentId","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","_translate","svgRound","_normalizePoint","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","scaleFactor","innerMargin","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","lastTopX","lastTopY","lastBottomX","lastBottomY","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","last","N","lastPoint","lastPointX","lastPointY","ltrCallback","newOutliner","getNewOutline","outliner","HighlightOutliner","shiftedMinX","shiftedMinY","lastEdge","edge","outlineVerticalEdges","edges","allEdges","edge1","edge2","outlines","HighlightOutline","middle","y4","polygon","prevX","prevY","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","ColorPicker","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","blue","green","pink","red","yellow","swatch","renderMainDropdown","dropdown","role","nextSibling","HighlightEditor","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","numberOfColors","outlinerForOutline","highlightOutlines","clipPathId","drawLayer","finalizeDraw","drawOutline","rootClass","highlightOutline","free","updateProperties","setColorAndOpacity","opa","savedOpacity","savedThickness","setThickness","th","toolbar","addUndoableEditor","mustBeSelected","draw","highlightDiv","pointerover","hovered","pointerleave","setPosition","startHighlighting","_freeHighlight","_freeHighlightId","_freeHighlightClipId","DrawingOptions","updateProperty","updateSVGProperty","toSVGProperties","updateAll","DrawingEditor","_drawId","mustBeCommitted","_addOutlines","drawOutlines","drawId","drawingOptions","_drawingOptions","defaultProperties","_mergeSVGProperties","defaultSVGProperties","p1Keys","getDefaultDrawingOptions","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","_currentDrawId","_updateProperty","savedValue","setter","getPathResizingSVGProperties","getPathResizedSVGProperties","_y","getPathTranslatedSVGProperties","moving","updateParent","pW","pH","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","_endDraw","isCancellable","removeLastElement","_drawMove","timeStamp","startNew","_cleanup","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","InkDrawOutliner","Float64Array","InkDrawOutline","firstX","firstY","lastIndexOf","secondX","secondY","c1x","c1y","c2x","c2y","build","serializedLines","serializedPoints","rescaleFn","newLines","margin","marginX","marginY","oldMarginX","oldMarginY","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","PRECISION","s1x","s1y","s2x","s2y","newParentWidth","newParentHeight","InkDrawingOptions","viewerParameters","_viewParameters","InkEditor","ContourDrawOutline","SignatureExtractor","sigmaSFactor","sigmaR","kernelSize","i0","j0","Int32Array","kk","lnbd","nbd","contours","ij","pix","i2","j2","isHole","contour","contour0","shiftI","shiftJ","i1","j1","i3","j3","i4","j4","ij3","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","sigmaS","kernel","sigmaS2","halfSize","rangeValues","sigmaR2","histogram","sum","neighbour","Uint8ClampedArray","M","L","spos","originalBitmap","prevWidth","prevHeight","log2","isteps","grayImage","extractContoursFromText","fontStyle","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","uint8Buf","contourList","processDrawnLines","curves","mustSmooth","areContours","linesAndPoints","xScale","yScale","newCurves","reducedPoints","newPoints","compressSignature","bufferType","minDiff","maxDiff","outlinesLength","Int8Array","Int16Array","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","write","BufferCtor","diffs","Response","readable","decompressSignature","signatureData","fromBase64","DecompressionStream","numberOfDrawings","diffsOffset","POINTS_PROPERTIES_NUMBER","SignatureOptions","DrawnSignatureOptions","SignatureEditor","_defaultDrawnSignatureOptions","hasDescription","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","isSignature","alt","StampEditor","bitmapUrl","bitmapFile","pasteEditor","getAsFile","hasAltTextStats","fromId","alt_text_modal","alt_text_type","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","accept","click","bitmapId","MAX_RATIO","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","scaledWidth","scaledHeight","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","toUrl","toDataURL","missingCanvas","structParent","_structTree","changes","isSame","isSameAltText","stamps","area","prevData","isSamePageIndex","AnnotationEditorLayer","annotationLayer","editorTypes","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","annotationElementIds","editables","changedAnnotations","resetAnnotations","attach","detach","removePointerInTextLayer","currentMode","startDrawingSession","pause","oldRotation","DrawLayer","_svgFactory","pathId","clipPathUse","isPathUpdatable","hasClip","use","mustRemoveSelfIntersections","maskId","use1","use2","cloneNode","elementOrId","pathElement","cleanImage","_cleanImage","filterImageFiles","_filterImageFiles","imageFiles","pdfFiles","canvasToFile","convertedPdfFiles","pdffile","pdf","pageNum","uniqueName","allImages","processedImages","pdfjsLib","markupStructure","_markupStructure","original_images","imageKeyValList","markedImages","_loop","_t3","original_file","image_name","page_info","key_object","value_object","_key_object","keyObjectUniqueKey","keyValStruct","keyFoundInStruct","key_x","key_y","structDistances","regDistances","_value_object","valObjectUniqueKey","_dx","_dy","_dist","_dx2","_dy2","_distanceInfo","_structDistances","distanceInfo","markedBlob","markedFile","arc","keyValStructPattern","revokeObjectURL","_regeneratorValues","markupOCR","_markupOCR","OCR_word_list","_loop2","_t4","cur_page_words","cur_page_word","word_object","textBaseline","displayImages","image_list","imageWindow","alert","_pdfjsTestingUtils","FeatureTest","getFilenameFromUrl","getPdfFilenameFromUrl","defaultFilename","reFilename","splitURI","suggestedFilename","getXfaPageViewport","xfaPage","ImageKind","normalizeUnicode","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","slider","spanId","getElementById","downloadOcr","displayKeyValList","displayKeyValStruct","ocr_results","json_blob","json_url","json_a","ocr_marked_image_list","marked_struct_image_list","download","appendChild","removeChild"],"sourceRoot":""}